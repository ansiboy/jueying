{"version":3,"sources":["webpack://jueying/webpack/universalModuleDefinition","webpack://jueying/webpack/bootstrap","webpack://jueying/external \"react\"","webpack://jueying/./node_modules/maishu-jueying-core/out/register.js","webpack://jueying/./out/errors.js","webpack://jueying/./node_modules/maishu-jueying-core/out/page.js","webpack://jueying/./node_modules/maishu-jueying-core/out/component-container.js","webpack://jueying/./node_modules/maishu-jueying-core/out/parse-component-data.js","webpack://jueying/./node_modules/maishu-jueying-core/out/page-header.js","webpack://jueying/./node_modules/maishu-jueying-core/out/page-footer.js","webpack://jueying/./out/common.js","webpack://jueying/./out/component.js","webpack://jueying/./out/property-editor.js","webpack://jueying/./out/page-designer.js","webpack://jueying/./node_modules/maishu-jueying-core/out/errors.js","webpack://jueying/./node_modules/maishu-jueying-core/out/page-body.js","webpack://jueying/./out/style.js","webpack://jueying/./node_modules/maishu-toolkit/out/guid.js","webpack://jueying/./node_modules/maishu-toolkit/out/path.js","webpack://jueying/./node_modules/maishu-toolkit/out/errors.js","webpack://jueying/./node_modules/maishu-toolkit/out/callback.js","webpack://jueying/./node_modules/maishu-toolkit/out/data.js","webpack://jueying/./node_modules/maishu-toolkit/out/url.js","webpack://jueying/./node_modules/maishu-toolkit/out/index.js","webpack://jueying/./out/index.js","webpack://jueying/./node_modules/maishu-dilu/dist/index.js","webpack://jueying/./node_modules/maishu-jueying-core/out/index.js","webpack://jueying/./node_modules/maishu-jueying-core/node_modules/maishu-toolkit/out/callback.js","webpack://jueying/./node_modules/maishu-jueying-core/out/style.js","webpack://jueying/./out/editor-panel.js","webpack://jueying/./out/prop-editor.js","webpack://jueying/./out/component-data-handler.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","defineProperty","registerComponent","componentTypes","errors_1","componentName","componentType","name","errors","argumentNull","Errors","Error","fileName","argumentName","pluginId","componentId","fieldName","_components","__classPrivateFieldGet","this","receiver","privateMap","has","TypeError","Page","PageContext","React","register_1","parse_component_data_1","callback_1","createContext","Component","props","super","childComponentCreated","Callback","set","pageData","children","forEach","c","ref","e","id","fire","component","childComponents","filter","o","parentId","map","createElement","Fragment","parseComponentData","className","style","Provider","page","WeakMap","typeName","ComponentContainer","page_1","componentData","Consumer","args","_a","renderChild","contextType","type","componentTypeNotExists","PageHeader","component_container_1","assign","height","display","visible","defaultProps","PageFooter","guid","groupDisplayNames","proptDisplayNames","constants","componentsDir","connectorElementClassName","componentTypeName","componentPosition","s4","Math","floor","random","toString","substring","funcs","Array","func","push","property_editor_1","maishu_jueying_core_1","result","propEditorInfo","componentPropEditors","i","length","propName","componentPropEditorDisplay","controlClassName","getPropEditorByArray","propNames","options","editorType","editorDisplay","group","displayName","defaultValue","validation","defaultGroupName","split","typename","classProps","join","ErrorBoundary","PropertyEditor","component_1","page_designer_1","common_1","maishu_dilu_1","state","designer","commonPropEditorInfos","selectedComponents","propEditorInfos","getPropEditors","items","propInfo1","propInfo2","propName1","propName2","commonFlatProps","control","controlProps","obj","editors","propValue","editorProps","editComponents","updateComponentProp","componentProps","_validator","_validateFields","FormValidator","element","checkElement","updateComponentProps","editor","prop","navPropsNames","DesignerContext","getEditors","empty","customRender","r","_element","groupEditorsArray","groupEditors","g","error","info","setState","message","stack","PageDesigner","maishu_toolkit_1","components","initPageData","componentIds","travelComponentData","item","console","assert","itemRef","fillComponent","setComponetRefProp","namedComponents","num","child","ids","getOwnPropertyNames","arr","pop","selected","componentDatas","findComponentData","componentIndex","parentControl","splice","selectComponents","focus","selectedComponentIds","isSame","isSelectedControl","indexOf","arr1","arr2","removeComponents","controlId","removeComponentFrom","childComponentIndex","appendComponent","collection","controlIndex","shift","pageDataIsNull","keyCode","tabIndex","onKeyDown","pathFieldRequired","canntFindModule","path","PageBody","page_header_1","page_footer_1","marginTop","header","footer","p","marginBottom","removeClassName","appendClassName","classNames","componentSelected","emptyTemplates","loadingTemplates","templateSelected","templateDialog","emptyDocument","componentWrapper","componentPanel","componentIcon","placeholder","editorPanel","moveDown","document","setAttribute","innerHTML","head","appendChild","addonClassName","sourceClassName","targetClassName","replace","RegExp","trim","pathContact","paths","str","expectedType","dataSourceCanntInsert","dataSourceCanntDelete","dataSourceCanntUpdate","primaryKeyNull","inserting","inserted","deleting","deleted","updating","updated","selecting","primaryKeys","delete","insert","update","select","index","canInsert","sender","dataItem","executeInsert","then","data","catch","exc","processError","canDelete","checkPrimaryKeys","executeDelete","canUpdate","executeUpdate","theItem","otherItem","pk","selectArguments","executeSelect","dataItems","totalRowCount","isArray","undefined","queryResultTypeError","selectResult","method","handled","DataSourceSelectArguments","startRowIndex","maximumRows","parseUrl","url","query","match","pl","search","decode","s","decodeURIComponent","urlParams","exec","pareeUrlQuery","substr","ComponentDataHandler","TextInput","PropEditor","EditorPanel","editor_panel_1","prop_editor_1","style_1","component_data_handler_1","modules","installedModules","__webpack_require__","moduleId","l","m","d","Symbol","toStringTag","t","mode","__esModule","ns","create","n","parameterName","msg","fieldElementCanntNull","fieldIndex","elementNotExists","fieldResultExpectBooleanType","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","apply","form","fields","validateOnChanged","elementEvents","field","errorElement","fieldErrorElement","removeProperty","querySelectorAll","getElementsByClassName","errorClassName","fieldElement","nextSibling","parentElement","insertBefore","ps","condition","checkField","checkFieldAsync","all","isAsync","validateFunc","checking","addEventListener","elementType","elements","bindElementEvent","depends","j","dependResult","rules","rule","elementValue","isPass","validate","showElement","elementName","errorText","tagName","inputElement","checked","formValidator_1","rules_1","numericRegex","decimalRegex","emailRegex","ipRegex","urlRegex","mobileRegex","dateRegex","msgs","createValidation","calc","elementValueCompare","otherValue","test","parseFloat","date","validDateArray","validDate","Date","setFullYear","setMonth","setDate","getValidDate","required","matches","otherElement","email","minLength","maxLength","greaterThan","lessThan","equal","ip","mobile","numeric","custom","page_body_1","isFixed","isVisible","getElementById","position","validator","checkAsync","valueType","itemsPromise","textValues","text","onChange","textValue","target","floatRegex","parseInt","dropdown","componentRemoved","componentAppend","componentUpdated","pageDataChanged","_pageData","initComponentData","itemProps","names"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jueying\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"jueying\"] = factory(root[\"react\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.registerComponent = exports.componentTypes = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nexports.componentTypes = {};\r\nfunction registerComponent(componentName, componentType) {\r\n    if (componentType == null && typeof componentName == 'function') {\r\n        componentType = componentName;\r\n        componentName = componentType.name;\r\n        componentType['componentName'] = componentName;\r\n    }\r\n    if (!componentName)\r\n        throw errors_1.errors.argumentNull('componentName');\r\n    if (!componentType)\r\n        throw errors_1.errors.argumentNull('componentType');\r\n    exports.componentTypes[componentName] = componentType;\r\n}\r\nexports.registerComponent = registerComponent;\r\n//# sourceMappingURL=register.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Errors = void 0;\r\nclass Errors {\r\n    static placeHolderIdNull() {\r\n        let msg = `Place holder property id cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static fileNotExists(fileName) {\r\n        return new Error(`File '${fileName}' is not exists.`);\r\n    }\r\n    static argumentNull(argumentName) {\r\n        return new Error(`Argument ${argumentName} is null or empty.`);\r\n    }\r\n    static argumentRangeError(argumentName) {\r\n        return new Error(`Argument ${argumentName} range error.`);\r\n    }\r\n    static pageDataIsNull() {\r\n        return new Error(`Page data is null.`);\r\n    }\r\n    static toolbarRequiredKey() {\r\n        return new Error(`Toolbar has not a key prop.`);\r\n    }\r\n    static loadPluginFail(pluginId) {\r\n        return new Error(`Load plugin '${pluginId}' fail.`);\r\n    }\r\n    static idRequired() {\r\n        return new Error(`Property id is required.`);\r\n    }\r\n    static canntFindMasterPage(componentId) {\r\n        return new Error(`Can not find master page for component container ${componentId}.`);\r\n    }\r\n    static propCanntNull(componentName, property) {\r\n        let msg = `${componentName} property ${property} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static argumentFieldCanntNull(fieldName, argumentName) {\r\n        let msg = `${fieldName} of argument ${argumentName} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n}\r\nexports.Errors = Errors;\r\n//# sourceMappingURL=errors.js.map","\"use strict\";\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _components;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Page = exports.PageContext = void 0;\r\nconst React = require(\"react\");\r\nconst register_1 = require(\"./register\");\r\n// import { component } from \"./decorators\";\r\nconst parse_component_data_1 = require(\"./parse-component-data\");\r\nconst callback_1 = require(\"maishu-toolkit/out/callback\");\r\nexports.PageContext = React.createContext({});\r\n// @component({ type: Page.typeName })\r\nclass Page extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.childComponentCreated = new callback_1.Callback();\r\n        _components.set(this, {});\r\n    }\r\n    get components() {\r\n        return __classPrivateFieldGet(this, _components);\r\n    }\r\n    render() {\r\n        let pageStyle = {};\r\n        let pageData = this.props.pageData;\r\n        pageData.children.forEach(c => {\r\n            c.props.ref = (e) => {\r\n                if (e == null)\r\n                    return;\r\n                if (__classPrivateFieldGet(this, _components)[c.id] == null)\r\n                    this.childComponentCreated.fire({ component: e, id: c.id });\r\n                __classPrivateFieldGet(this, _components)[c.id] = e || __classPrivateFieldGet(this, _components)[c.id];\r\n            };\r\n        });\r\n        let children = pageData.children.filter(o => o.parentId == pageData.id);\r\n        let childComponents = children.map(o => React.createElement(React.Fragment, { key: o.id }, parse_component_data_1.parseComponentData(o)));\r\n        return React.createElement(\"div\", { className: `${Page.className}`, style: pageStyle },\r\n            React.createElement(exports.PageContext.Provider, { value: { page: this, pageData } }, childComponents));\r\n    }\r\n}\r\nexports.Page = Page;\r\n_components = new WeakMap();\r\nPage.typeName = \"article\";\r\nPage.className = \"page-view\";\r\n//========================================================\r\n// \r\nregister_1.registerComponent(\"PageView\", Page);\r\nregister_1.registerComponent(Page.typeName, Page);\r\n//========================================================\r\n//# sourceMappingURL=page.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ComponentContainer = void 0;\r\nconst React = require(\"react\");\r\nconst page_1 = require(\"./page\");\r\nconst parse_component_data_1 = require(\"./parse-component-data\");\r\nclass ComponentContainer extends React.Component {\r\n    renderChild(componentData) {\r\n        return React.createElement(React.Fragment, { key: componentData.id }, parse_component_data_1.parseComponentData(componentData));\r\n    }\r\n    render() {\r\n        return React.createElement(page_1.PageContext.Consumer, null, args => {\r\n            var _a;\r\n            let children = ((_a = args.pageData) === null || _a === void 0 ? void 0 : _a.children.filter(o => o.parentId == this.props.id)) || [];\r\n            return React.createElement(\"div\", { className: this.props.className, style: this.props.style }, children.map(o => this.renderChild(o)));\r\n        });\r\n    }\r\n}\r\nexports.ComponentContainer = ComponentContainer;\r\nComponentContainer.contextType = page_1.PageContext;\r\n//# sourceMappingURL=component-container.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parseComponentData = void 0;\r\nconst React = require(\"react\");\r\nconst register_1 = require(\"./register\");\r\nconst errors_1 = require(\"./errors\");\r\nfunction parseComponentData(componentData) {\r\n    let type = register_1.componentTypes[componentData.type];\r\n    if (type == null) {\r\n        throw errors_1.errors.componentTypeNotExists(componentData.type);\r\n    }\r\n    let children = [];\r\n    if (componentData.children != null) {\r\n        children = componentData.children.map(c => typeof c == \"string\" ? c : parseComponentData(c));\r\n    }\r\n    return React.createElement(type, componentData.props, ...children);\r\n}\r\nexports.parseComponentData = parseComponentData;\r\n//# sourceMappingURL=parse-component-data.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PageHeader = void 0;\r\n// import { component } from \"./decorators\";\r\nconst React = require(\"react\");\r\nconst component_container_1 = require(\"./component-container\");\r\nconst register_1 = require(\"./register\");\r\n// @component({ type: PageHeader.typeName })\r\nclass PageHeader extends React.Component {\r\n    render() {\r\n        let style = this.props.style || {};\r\n        Object.assign(style, { height: this.props.height, display: this.props.visible ? \"\" : \"none\" });\r\n        return React.createElement(component_container_1.ComponentContainer, { id: this.props.id, className: PageHeader.className, style: style });\r\n    }\r\n}\r\nexports.PageHeader = PageHeader;\r\nPageHeader.typeName = \"header\";\r\nPageHeader.className = \"header\";\r\nPageHeader.id = \"page-header\";\r\nPageHeader.defaultProps = { height: 50, visible: true, id: PageHeader.id };\r\nregister_1.registerComponent(PageHeader.typeName, PageHeader);\r\n//# sourceMappingURL=page-header.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PageFooter = void 0;\r\n// import { component } from \"./decorators\";\r\nconst React = require(\"react\");\r\nconst component_container_1 = require(\"./component-container\");\r\nconst register_1 = require(\"./register\");\r\n// @component({ type: PageFooter.typeName })\r\nclass PageFooter extends React.Component {\r\n    render() {\r\n        let style = this.props.style || {};\r\n        Object.assign(style, { height: this.props.height, display: this.props.visible ? \"\" : \"none\" });\r\n        return React.createElement(component_container_1.ComponentContainer, { id: this.props.id, className: PageFooter.className, style: style });\r\n    }\r\n}\r\nexports.PageFooter = PageFooter;\r\nPageFooter.typeName = \"footer\";\r\nPageFooter.className = \"footer\";\r\nPageFooter.id = \"page-footer\";\r\nPageFooter.defaultProps = { id: PageFooter.id, height: 50, visible: true };\r\nregister_1.registerComponent(PageFooter.typeName, PageFooter);\r\n//# sourceMappingURL=page-footer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Callback = exports.guid = exports.groupDisplayNames = exports.proptDisplayNames = exports.constants = void 0;\r\nexports.constants = {\r\n    componentsDir: 'components',\r\n    connectorElementClassName: 'component-container',\r\n    componentTypeName: 'data-component-name',\r\n    componentData: 'component-data',\r\n    componentPosition: \"component-position\"\r\n};\r\nexports.proptDisplayNames = {};\r\nexports.groupDisplayNames = {};\r\nfunction guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\nexports.guid = guid;\r\nclass Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\nexports.Callback = Callback;\r\n//# sourceMappingURL=common.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Component = void 0;\r\nconst property_editor_1 = require(\"./property-editor\");\r\nconst maishu_jueying_core_1 = require(\"maishu-jueying-core\");\r\n// type CreateElementContext = { components: React.Component[], componentTypes: string[] };\r\n// let defaultGroup: GroupedEditor[\"group\"] = { prop: \"\", displayName: \"\" };\r\nclass Component {\r\n    static getPropEditors(componentData) {\r\n        let componentType = componentData.type;\r\n        let result = [];\r\n        let propEditorInfo = this.componentPropEditors[componentType] || [];\r\n        for (let i = 0; i < propEditorInfo.length; i++) {\r\n            let propName = propEditorInfo[i].propName;\r\n            let display = Component.componentPropEditorDisplay[`${componentType}.${propName}`];\r\n            if (display != null && display(componentData) == false)\r\n                continue;\r\n            result.push(propEditorInfo[i]);\r\n        }\r\n        return result;\r\n    }\r\n    static getPropEditor(controlClassName, propName) {\r\n        return this.getPropEditorByArray(controlClassName, propName);\r\n    }\r\n    /**  */\r\n    static getPropEditorByArray(controlClassName, propNames) {\r\n        let classEditors = this.componentPropEditors[controlClassName] || [];\r\n        let editor = classEditors.filter(o => o.propName == propNames)[0];\r\n        return editor;\r\n    }\r\n    static setPropEditor(options) {\r\n        let { componentType, editorType, display: editorDisplay, group, propName, displayName, defaultValue, validation, } = options;\r\n        group = group || property_editor_1.defaultGroupName;\r\n        propName = propName || \"\";\r\n        displayName = displayName || propName;\r\n        // , style.width\r\n        let propNames = propName.split('.');\r\n        let className = typeof componentType == 'string' ? componentType : componentType.prototype.typename || componentType.name;\r\n        Component.componentPropEditorDisplay[`${className}.${propName}`] = editorDisplay;\r\n        let classProps = Component.componentPropEditors[className] = Component.componentPropEditors[className] || [];\r\n        for (let i = 0; i < classProps.length; i++) {\r\n            let propName1 = classProps[i].propName;\r\n            let propName2 = propNames.join('.');\r\n            if (propName1 == propName2) {\r\n                classProps[i].editorType = editorType;\r\n                return;\r\n            }\r\n        }\r\n        classProps.push({\r\n            propName, displayName,\r\n            editorType: editorType,\r\n            group, defaultValue, validation\r\n        });\r\n    }\r\n    static register(typeName, componentType) {\r\n        return maishu_jueying_core_1.registerComponent(typeName, componentType);\r\n    }\r\n}\r\nexports.Component = Component;\r\n//==========================================\r\n//  React  React.Fragment \r\nComponent.Fragment = \"\";\r\n//==========================================\r\nComponent.componentPropEditors = {};\r\nComponent.componentPropEditorDisplay = {};\r\n//# sourceMappingURL=component.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorBoundary = exports.PropertyEditor = exports.defaultGroupName = void 0;\r\nconst React = require(\"react\");\r\nconst component_1 = require(\"./component\");\r\nconst errors_1 = require(\"./errors\");\r\nconst page_designer_1 = require(\"./page-designer\");\r\nconst common_1 = require(\"./common\");\r\nconst maishu_dilu_1 = require(\"maishu-dilu\");\r\nexports.defaultGroupName = \"\";\r\nclass PropertyEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    getEditors(designer) {\r\n        if (designer == null) {\r\n            return [];\r\n        }\r\n        // \r\n        let commonPropEditorInfos = [];\r\n        let selectedComponents = designer.selectedComponents;\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let componentData = selectedComponents[i];\r\n            let propEditorInfos = component_1.Component.getPropEditors(componentData);\r\n            if (i == 0) {\r\n                commonPropEditorInfos = propEditorInfos || [];\r\n            }\r\n            else {\r\n                let items = [];\r\n                commonPropEditorInfos.forEach(propInfo1 => {\r\n                    propEditorInfos.forEach(propInfo2 => {\r\n                        let propName1 = propInfo1.propName; //propInfo1.propNames.join('.')\r\n                        let propName2 = propInfo2.propName; //propInfo2.propNames.join('.')\r\n                        if (propInfo1.editorType == propInfo2.editorType && propName1 == propName2) {\r\n                            items.push(propInfo1);\r\n                        }\r\n                    });\r\n                });\r\n                commonPropEditorInfos = items;\r\n            }\r\n        }\r\n        // \r\n        let commonFlatProps = {};\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let control = selectedComponents[i];\r\n            let controlProps = Object.assign({}, control.props);\r\n            delete controlProps.children;\r\n            if (i == 0) {\r\n                commonFlatProps = controlProps;\r\n            }\r\n            else {\r\n                let obj = {};\r\n                for (let key in commonFlatProps) {\r\n                    if (commonFlatProps[key] == controlProps[key])\r\n                        obj[key] = controlProps[key];\r\n                }\r\n                commonFlatProps = obj;\r\n            }\r\n        }\r\n        let editors = [];\r\n        for (let i = 0; i < commonPropEditorInfos.length; i++) {\r\n            let propEditorInfo = commonPropEditorInfos[i];\r\n            let propName = propEditorInfo.propName;\r\n            ;\r\n            let editorType = propEditorInfo.editorType;\r\n            let value = this.propValue(propName, commonFlatProps);\r\n            if (value == null)\r\n                value = propEditorInfo.defaultValue;\r\n            let editorProps = {\r\n                value: value,\r\n                editComponents: selectedComponents,\r\n                updateComponentProp: (value) => {\r\n                    let componentProps = selectedComponents.map(o => ({\r\n                        componentId: o.id, propName: propEditorInfo.propName, value\r\n                    }));\r\n                    if (this._validator == null) {\r\n                        this._validateFields = commonPropEditorInfos.filter(o => o.validation != null)\r\n                            .map(o => Object.assign(o.validation, { name: o.propName }));\r\n                        this._validator = new maishu_dilu_1.FormValidator(this.element, ...this._validateFields);\r\n                    }\r\n                    if (this._validateFields.filter(o => o.name == propEditorInfo.propName).length > 0)\r\n                        this._validator.checkElement(propEditorInfo.propName);\r\n                    designer.updateComponentProps(componentProps);\r\n                }\r\n            };\r\n            let editor = React.createElement(editorType, editorProps);\r\n            editors.push({ prop: propEditorInfo.propName, displayName: propEditorInfo.displayName, editor, group: propEditorInfo.group });\r\n        }\r\n        return editors;\r\n    }\r\n    propValue(propName, props) {\r\n        if (!propName)\r\n            throw errors_1.Errors.argumentNull(\"propName\");\r\n        if (!props)\r\n            throw errors_1.Errors.argumentNull(\"props\");\r\n        let navPropsNames = propName.split(\".\");\r\n        let obj = props;\r\n        for (let i = 0; i < navPropsNames.length; i++) {\r\n            obj = obj[navPropsNames[i]];\r\n            if (obj == null)\r\n                return null;\r\n        }\r\n        return obj;\r\n    }\r\n    render() {\r\n        return React.createElement(page_designer_1.DesignerContext.Consumer, null, args => {\r\n            let designer = args.designer;\r\n            if (designer == null)\r\n                return null;\r\n            let editors = this.getEditors(designer);\r\n            if (editors.length == 0) {\r\n                let empty = this.props.empty;\r\n                return React.createElement(\"div\", { className: \"text-center\" }, empty);\r\n            }\r\n            if (this.props.customRender) {\r\n                let items = editors.map(o => Object.assign({ displayName: o.displayName }, o));\r\n                let r = this.props.customRender(designer.selectedComponents, items);\r\n                if (r != null) {\r\n                    return React.createElement(\"div\", { ref: e => this._element = e || this._element }, r);\r\n                }\r\n            }\r\n            let groupEditorsArray = [];\r\n            for (let i = 0; i < editors.length; i++) {\r\n                let group = editors[i].group || exports.defaultGroupName;\r\n                let groupEditors = groupEditorsArray.filter(o => o.group == group)[0];\r\n                if (groupEditors == null) {\r\n                    groupEditors = { group: editors[i].group, editors: [] };\r\n                    groupEditorsArray.push(groupEditors);\r\n                }\r\n                groupEditors.editors.push({ prop: editors[i].prop, displayName: editors[i].displayName, editor: editors[i].editor });\r\n            }\r\n            return groupEditorsArray.map((g) => React.createElement(\"div\", { key: g.group, className: \"panel panel-default\", ref: e => this._element = e || this._element },\r\n                g.group ? React.createElement(\"div\", { className: \"panel-heading\" }, common_1.groupDisplayNames[g.group] || g.group) : null,\r\n                React.createElement(\"div\", { className: \"panel-body\" }, g.editors.map((o, i) => React.createElement(\"div\", { key: o.prop, className: \"form-group clearfix\" },\r\n                    React.createElement(\"label\", null, o.displayName),\r\n                    React.createElement(\"div\", { className: \"control\" },\r\n                        React.createElement(ErrorBoundary, null, o.editor)))))));\r\n        });\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n}\r\nexports.PropertyEditor = PropertyEditor;\r\nPropertyEditor.contextType = page_designer_1.DesignerContext;\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // Display fallback UI\r\n        this.setState({ error });\r\n        // You can also log the error to an error reporting service\r\n        //   logErrorToMyService(error, info);\r\n    }\r\n    render() {\r\n        let { error } = this.state || {};\r\n        if (error) {\r\n            return React.createElement(\"div\", { className: \"error\" },\r\n                React.createElement(\"div\", null, error.message),\r\n                React.createElement(\"div\", null, error.stack));\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\nexports.ErrorBoundary = ErrorBoundary;\r\n//# sourceMappingURL=property-editor.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PageDesigner = exports.DesignerContext = void 0;\r\nconst React = require(\"react\");\r\nconst errors_1 = require(\"./errors\");\r\nconst maishu_toolkit_1 = require(\"maishu-toolkit\");\r\nexports.DesignerContext = React.createContext({ designer: null });\r\nclass PageDesigner extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.components = {};\r\n        let pageData = this.props.pageData;\r\n        this.initPageData(pageData);\r\n        this.state = { pageData };\r\n    }\r\n    setComponetRefProp(pageData) {\r\n        //=========================================================\r\n        //  pageData  ID\r\n        let componentIds = {};\r\n        //=========================================================\r\n        PageDesigner.travelComponentData(pageData).forEach(item => {\r\n            console.assert(item.props != null && item.id != null);\r\n            componentIds[item.type] = componentIds[item.type] || [];\r\n            componentIds[item.type].push(item.id);\r\n            let itemRef = item.props.ref;\r\n            item.props.ref = (e) => {\r\n                if (e != null) {\r\n                    this.components[item.type] = this.components[item.type] || {};\r\n                    this.components[item.type][item.id] = e;\r\n                }\r\n                if (typeof itemRef == \"function\")\r\n                    itemRef(e);\r\n            };\r\n        });\r\n    }\r\n    initPageData(pageData) {\r\n        if (pageData == null) {\r\n            return;\r\n        }\r\n        pageData.children = pageData.children || [];\r\n        this.fillComponent(pageData);\r\n        this.setComponetRefProp(pageData);\r\n    }\r\n    /**\r\n    * \r\n    * @param component\r\n    */\r\n    fillComponent(component) {\r\n        let namedComponents = {};\r\n        if (!component[\"name\"]) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (namedComponents[name]);\r\n            namedComponents[name] = component;\r\n            component[\"name\"] = name;\r\n        }\r\n        if (!component.id)\r\n            component.id = maishu_toolkit_1.guid();\r\n        component.children = component.children || [];\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        component.children.forEach(child => {\r\n            if (typeof child == \"string\")\r\n                return true;\r\n            this.fillComponent(child);\r\n        });\r\n    }\r\n    allComponents() {\r\n        let r = [];\r\n        for (let key in this.components) {\r\n            let ids = Object.getOwnPropertyNames(this.components[key]);\r\n            r.push(...ids.map(id => this.components[key][id]));\r\n        }\r\n        return r;\r\n    }\r\n    /**  */\r\n    get pageData() {\r\n        return this.state.pageData;\r\n    }\r\n    /**  */\r\n    get selectedComponentIds() {\r\n        return this.selectedComponents.map(o => o.id);\r\n    }\r\n    /**  */\r\n    get selectedComponents() {\r\n        let arr = new Array();\r\n        let stack = new Array();\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item.props != null && item.selected == true)\r\n                arr.push(item);\r\n            (item.children || []).forEach(child => {\r\n                if (typeof child == \"string\")\r\n                    return true;\r\n                stack.push(child);\r\n            });\r\n        }\r\n        return arr;\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    updateComponentProp(componentId, propName, value) {\r\n        return this.updateComponentProps([{ componentId, propName, value }]);\r\n    }\r\n    updateComponentProps(componentProps) {\r\n        let componentDatas = [];\r\n        for (let i = 0; i < componentProps.length; i++) {\r\n            let { componentId, propName, value } = componentProps[i];\r\n            let componentData = this.findComponentData(componentId);\r\n            if (componentData == null)\r\n                continue;\r\n            let navPropsNames = propName.split(\".\");\r\n            console.assert(componentData != null);\r\n            console.assert(navPropsNames != null, 'props is null');\r\n            componentData.props = componentData.props || {};\r\n            let obj = componentData.props;\r\n            for (let i = 0; i < navPropsNames.length - 1; i++) {\r\n                obj = obj[navPropsNames[i]] = obj[navPropsNames[i]] || {};\r\n            }\r\n            obj[navPropsNames[navPropsNames.length - 1]] = value;\r\n            componentDatas.push(componentData);\r\n        }\r\n        this.setState({ pageData: this.pageData });\r\n    }\r\n    /**\r\n     * \r\n     * @param parentId \r\n     * @param componentData \r\n     * @param componentIndex \r\n     */\r\n    appendComponent(parentId, componentData, componentIndex) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!componentData)\r\n            throw errors_1.Errors.argumentNull('childComponent');\r\n        this.initPageData(componentData);\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        parentControl.children = parentControl.children || [];\r\n        if (componentIndex != null) {\r\n            parentControl.children.splice(componentIndex, 0, componentData);\r\n        }\r\n        else {\r\n            parentControl.children.push(componentData);\r\n        }\r\n        this.selectComponents(componentData.id);\r\n    }\r\n    /**\r\n     * \r\n     * @param control \r\n     */\r\n    selectComponent(componentIds) {\r\n        this.selectComponents(componentIds);\r\n        //====================================================\r\n        // \r\n        if (this._element)\r\n            this._element.focus();\r\n        //====================================================\r\n    }\r\n    /**\r\n     * \r\n     * @param control \r\n     */\r\n    selectComponents(componentIds) {\r\n        if (typeof componentIds == 'string')\r\n            componentIds = [componentIds];\r\n        let selectedComponentIds = this.selectedComponentIds;\r\n        if (this.isSame(componentIds, selectedComponentIds))\r\n            return;\r\n        var stack = [];\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            let isSelectedControl = componentIds.indexOf(item.id) >= 0;\r\n            item.selected = isSelectedControl;\r\n            (item.children || []).forEach(child => {\r\n                if (typeof child == \"string\")\r\n                    return true;\r\n                stack.push(child);\r\n            });\r\n        }\r\n        this.setState({ pageData: this.pageData });\r\n    }\r\n    /**  */\r\n    isSame(arr1, arr2) {\r\n        if (arr1.length != arr2.length)\r\n            return false;\r\n        for (let i = 0; i < arr1.length; i++) {\r\n            if (arr2.indexOf(arr1[i]) < 0)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**  */\r\n    removeComponent(...componentIds) {\r\n        this.removeComponents(componentIds);\r\n    }\r\n    removeComponents(componentIds) {\r\n        let pageData = this.pageData;\r\n        if (!pageData || !pageData.children || pageData.children.length == 0)\r\n            return;\r\n        let children = pageData.children;\r\n        componentIds.forEach(controlId => {\r\n            this.removeComponentFrom(controlId, children);\r\n        });\r\n        this.setState({ pageData });\r\n    }\r\n    /**\r\n     * \r\n     * @param componentId \r\n     * @param parentId \r\n     * @param childComponentIndex \r\n     */\r\n    moveComponent(componentId, parentId, childComponentIndex) {\r\n        let component = this.findComponentData(componentId);\r\n        if (component == null)\r\n            throw new Error(`Cannt find component by id ${componentId}`);\r\n        console.assert(component != null, `Cannt find component by id ${componentId}`);\r\n        let pageData = this.pageData;\r\n        console.assert(pageData.children != null);\r\n        let children = pageData.children;\r\n        this.removeComponentFrom(componentId, children);\r\n        this.appendComponent(parentId, component, childComponentIndex);\r\n    }\r\n    removeComponentFrom(controlId, collection) {\r\n        let controlIndex = null;\r\n        collection = collection || [];\r\n        for (let i = 0; i < collection.length; i++) {\r\n            let child = collection[i];\r\n            if (typeof child == \"string\")\r\n                continue;\r\n            if (controlId == child.id) {\r\n                controlIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (controlIndex == null) {\r\n            for (let i = 0; i < collection.length; i++) {\r\n                let o = collection[i];\r\n                if (typeof o == \"string\")\r\n                    continue;\r\n                let children = o.children || [];\r\n                children.forEach(child => {\r\n                    if (typeof child == \"string\")\r\n                        return true;\r\n                    let isRemoved = this.removeComponentFrom(controlId, children);\r\n                    if (isRemoved) {\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n        if (controlIndex == 0) {\r\n            collection.shift();\r\n        }\r\n        else if (controlIndex == collection.length - 1) {\r\n            collection.pop();\r\n        }\r\n        else {\r\n            collection.splice(controlIndex, 1);\r\n        }\r\n        return true;\r\n    }\r\n    static travelComponentData(pageData, filter) {\r\n        let stack = new Array();\r\n        stack.push(pageData);\r\n        let r = [];\r\n        filter = filter || (() => true);\r\n        while (stack.length > 0) {\r\n            let item = stack.shift();\r\n            if (filter(item)) {\r\n                r.push(item);\r\n            }\r\n            //===============================================\r\n            // , \r\n            let children = (item.children || []).filter(o => typeof o == 'object');\r\n            //===============================================\r\n            stack.push(...children);\r\n        }\r\n        return r;\r\n    }\r\n    /**\r\n     * \r\n     * @param componentId \r\n     */\r\n    findComponentData(componentId) {\r\n        let pageData = this.state.pageData;\r\n        if (!pageData)\r\n            throw errors_1.Errors.pageDataIsNull();\r\n        let componentDatas = PageDesigner.travelComponentData(pageData, (item) => item.id == componentId);\r\n        return componentDatas[0];\r\n    }\r\n    onKeyDown(e) {\r\n        const DELETE_KEY_CODE = 46;\r\n        if (e.keyCode == DELETE_KEY_CODE) {\r\n            if (this.selectedComponents.length == 0)\r\n                return;\r\n            this.removeComponents(this.selectedComponentIds);\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param typeName \r\n     */\r\n    findComponetsByTypeName(typeName) {\r\n        this.components[typeName];\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { tabIndex: 0, ref: e => this._element = this._element || e, onKeyDown: e => this.onKeyDown(e), className: this.props.className, style: this.props.style },\r\n            React.createElement(exports.DesignerContext.Provider, { value: { designer: this } }, this.props.children));\r\n    }\r\n}\r\nexports.PageDesigner = PageDesigner;\r\n//# sourceMappingURL=page-designer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.errors = void 0;\r\nexports.errors = {\r\n    pathFieldRequired(name) {\r\n        let msg = `Path field of '${name}' component config can not be null or empty.`;\r\n        return new Error(msg);\r\n    },\r\n    canntFindModule(name, path) {\r\n        let msg = `Can not find component '${name}' in the module, module path is: '${path}'.`;\r\n        return new Error(msg);\r\n    },\r\n    componentTypeNotExists(name) {\r\n        let msg = `Component '${name}' not exists.`;\r\n        return new Error(msg);\r\n    },\r\n    argumentNull(name) {\r\n        let msg = `Argument '${name}' can not be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n};\r\n//# sourceMappingURL=errors.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PageBody = void 0;\r\n// import { component } from \"./decorators\";\r\nconst React = require(\"react\");\r\nconst component_container_1 = require(\"./component-container\");\r\nconst page_1 = require(\"./page\");\r\nconst page_header_1 = require(\"./page-header\");\r\nconst page_footer_1 = require(\"./page-footer\");\r\nconst register_1 = require(\"./register\");\r\n// @component({ type: PageBody.typeName })\r\nclass PageBody extends React.Component {\r\n    render() {\r\n        return React.createElement(page_1.PageContext.Consumer, null, args => {\r\n            let style = { marginTop: 0 };\r\n            if (args.pageData != null) {\r\n                let header = args.pageData.children.filter(o => o.type == page_header_1.PageHeader.typeName)[0];\r\n                let footer = args.pageData.children.filter(o => o.type == page_footer_1.PageFooter.typeName)[0];\r\n                if (header != null && header.props.visible) {\r\n                    let p = header.props;\r\n                    style.marginTop = p.height;\r\n                    style.height = `calc(100% - ${p.height}px)`;\r\n                }\r\n                if (footer != null && footer.props.visible) {\r\n                    let p = footer.props;\r\n                    style.marginBottom = p.height;\r\n                    style.height = `calc(100% - ${style.marginTop + p.height}px)`;\r\n                }\r\n            }\r\n            style.display = this.props.visible ? \"\" : \"none\";\r\n            return React.createElement(component_container_1.ComponentContainer, Object.assign({ className: PageBody.className }, this.props, { style: style }));\r\n        });\r\n    }\r\n}\r\nexports.PageBody = PageBody;\r\nPageBody.typeName = \"section\";\r\nPageBody.className = \"body\";\r\nPageBody.id = \"page-body\";\r\nPageBody.defaultProps = { id: PageBody.id, visible: true };\r\nPageBody.contextType = page_1.PageContext;\r\nregister_1.registerComponent(PageBody.typeName, PageBody);\r\n//# sourceMappingURL=page-body.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.removeClassName = exports.appendClassName = exports.classNames = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nexports.classNames = {\r\n    componentSelected: `component-selected`,\r\n    emptyTemplates: `empty-templates`,\r\n    loadingTemplates: `loading-templates`,\r\n    templateSelected: `template-selected`,\r\n    templateDialog: `template-dialog`,\r\n    emptyDocument: `empty-document`,\r\n    component: 'component',\r\n    componentWrapper: 'component-wrapper',\r\n    componentPanel: 'component-panel',\r\n    componentIcon: 'component-icon',\r\n    placeholder: 'placeholder',\r\n    editorPanel: 'editor-panel',\r\n    designer: 'designer',\r\n    moveDown: 'move-down',\r\n};\r\nlet templateDialog = {\r\n    nameHeight: 40,\r\n    fontSize: 22\r\n};\r\nlet element = document.createElement('style');\r\nelement.type = 'text/css';\r\nelement.setAttribute(\"data-name\", \"jueying\");\r\nelement.innerHTML = `\r\n            .${exports.classNames.componentSelected} {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${exports.classNames.componentSelected} > :first-child {\r\n                border-color: blue;\r\n              }\r\n              .${exports.classNames.componentSelected} .resize_handle {\r\n                position: absolute;\r\n                height: 6px;\r\n                width: 6px;\r\n                border: 1px solid #89B;\r\n                background: #9AC;\r\n              }\r\n              .${exports.classNames.componentSelected} .move_handle {\r\n                height: 12px;\r\n                width: 12px;\r\n                top: 6px;\r\n                left: 8px;\r\n                border: solid 1px black;\r\n                position: relative;\r\n                margin-top: -12px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NW,\r\n              .${exports.classNames.componentSelected} .NN,\r\n              .${exports.classNames.componentSelected} .NE {\r\n                top: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NE,\r\n              .${exports.classNames.componentSelected} .EE,\r\n              .${exports.classNames.componentSelected} .SE {\r\n                right: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .SW,\r\n              .${exports.classNames.componentSelected}.SS,\r\n              .${exports.classNames.componentSelected} .SE {\r\n                bottom: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NW,\r\n              .${exports.classNames.componentSelected} .WW,\r\n              .${exports.classNames.componentSelected} .SW {\r\n                left: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .SE,\r\n              .${exports.classNames.componentSelected} .NW {\r\n                cursor: nw-resize;\r\n              }\r\n              .${exports.classNames.componentSelected} .SW,\r\n              .${exports.classNames.componentSelected} .NE {\r\n                cursor: ne-resize;\r\n              }\r\n              .${exports.classNames.componentSelected} .NN,\r\n              .${exports.classNames.componentSelected} .SS {\r\n                cursor: n-resize;\r\n                left: 50%;\r\n                margin-left: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .EE,\r\n              .${exports.classNames.componentSelected} .WW {\r\n                cursor: e-resize;\r\n                top: 50%;\r\n                margin-top: -4px;\r\n              }\r\n            .${exports.classNames.emptyTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.loadingTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.templateSelected} .page-view {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${exports.classNames.templateDialog} .name {\r\n                margin-top: -${templateDialog.nameHeight}px;\r\n                height: ${templateDialog.nameHeight}px;\r\n                font-size: ${templateDialog.fontSize}px;\r\n                text-align: center;\r\n                padding-top: 6px;\r\n                background-color: black;\r\n                opacity: 0.5;\r\n            }\r\n            .${exports.classNames.templateDialog} .name span {\r\n                color: white;\r\n            }\r\n            .${exports.classNames.emptyDocument} {\r\n                text-align: center;\r\n                padding: 100px 0;\r\n            }\r\n            .${exports.classNames.component} > .NW,\r\n            .${exports.classNames.component} > .NN,\r\n            .${exports.classNames.component} > .NE,\r\n            .${exports.classNames.component} > .EE,\r\n            .${exports.classNames.component} > .SE,\r\n            .${exports.classNames.component} > .SW,\r\n            .${exports.classNames.component} > .SS,\r\n            .${exports.classNames.component} > .WW {\r\n                display: none;\r\n            }\r\n            .${exports.classNames.componentSelected}.component > .NW,\r\n            .${exports.classNames.componentSelected}.component > .NN,\r\n            .${exports.classNames.componentSelected}.component > .NE,\r\n            .${exports.classNames.componentSelected}.component > .EE,\r\n            .${exports.classNames.componentSelected}.component > .SE,\r\n            .${exports.classNames.componentSelected}.component > .SW,\r\n            .${exports.classNames.componentSelected}.component > .SS,\r\n            .${exports.classNames.componentSelected}.component > .WW {\r\n                display: block;\r\n            }\r\n            .${exports.classNames.placeholder} {\r\n                min-height: 40px;\r\n                width: 100%;\r\n            }\r\n            .${exports.classNames.placeholder}.active,\r\n            .${exports.classNames.componentWrapper}.active,\r\n            .${exports.classNames.componentWrapper}.${exports.classNames.componentSelected}.active {\r\n                border: 1px solid green;\r\n            }\r\n            .${exports.classNames.editorPanel} {\r\n                width: 300px;\r\n                background: white;\r\n                color: black;\r\n                margin: 0;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                overflow: auto;\r\n            }\r\n            .${exports.classNames.editorPanel} label {\r\n                width: 80px;\r\n                float: left;\r\n                padding: 4px;\r\n                text-overflow: ellipsis;\r\n                overflow: hidden;\r\n            }\r\n            .${exports.classNames.editorPanel} .control {\r\n                padding-left: 90px;\r\n            }\r\n            .${exports.classNames.editorPanel} .empty {\r\n                padding-top: 200px;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.designer} .error,\r\n            .${exports.classNames.editorPanel} .error {\r\n                color: red;\r\n            }\r\n            .${exports.classNames.componentPanel} {\r\n                background: white;\r\n                color: black;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                list-style: none;\r\n                padding: 0;\r\n                text-align: center\r\n            }\r\n            .${exports.classNames.componentPanel} .panel-heading {\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.componentPanel} li {\r\n                text-align: center;\r\n                padding: 8px;\r\n            }\r\n            .${exports.classNames.componentWrapper}.${exports.classNames.moveDown} {\r\n         \r\n            }\r\n        `;\r\nif (document.head != null) {\r\n    document.head.appendChild(element);\r\n}\r\nfunction appendClassName(element, addonClassName) {\r\n    if (element == null)\r\n        throw errors_1.Errors.argumentNull('element');\r\n    if (!addonClassName)\r\n        throw errors_1.Errors.argumentNull('addonClassName');\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className;\r\n    sourceClassName = sourceClassName || '';\r\n    console.assert(addonClassName != null);\r\n    if (sourceClassName.indexOf(addonClassName) >= 0)\r\n        return sourceClassName;\r\n    let className = `${sourceClassName} ${addonClassName}`;\r\n    if (typeof element != 'string')\r\n        element.className = className;\r\n    return className;\r\n}\r\nexports.appendClassName = appendClassName;\r\nfunction removeClassName(element, targetClassName) {\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className || '';\r\n    if (sourceClassName.indexOf(targetClassName) < 0)\r\n        return sourceClassName;\r\n    sourceClassName = sourceClassName || '';\r\n    sourceClassName = sourceClassName.replace(new RegExp(targetClassName, 'g'), '');\r\n    sourceClassName = sourceClassName.trim();\r\n    if (typeof element != 'string')\r\n        element.className = sourceClassName;\r\n    return sourceClassName;\r\n}\r\nexports.removeClassName = removeClassName;\r\n//# sourceMappingURL=style.js.map","export function guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\n","/**  */\r\nexport function pathContact(...paths) {\r\n    paths = paths || [];\r\n    if (paths.length == 0)\r\n        return \"\";\r\n    if (paths.length == 1) {\r\n        return paths[0];\r\n    }\r\n    let str = paths.join(\"\");\r\n    //  /  //shop/test//  /shop/test/\r\n    str = str.replace(/\\/+/g, '/');\r\n    return str;\r\n}\r\n","export class Errors {\r\n    argumentNull(argumentName) {\r\n        let error = new Error(`Argument ${argumentName} cannt be null or emtpy.`);\r\n        let name = \"argumentNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    routeDataFieldNull(fieldName) {\r\n        let msg = `The ${fieldName} field of route data cannt be null.`;\r\n        let error = new Error(msg);\r\n        let name = \"routeDataFieldNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    argumentFieldNull(fieldName, argumentName) {\r\n        let msg = `The ${fieldName} field of ${argumentName} cannt be null.`;\r\n        let error = new Error(msg);\r\n        let name = \"argumentFieldNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    argumentTypeIncorrect(argumentName, expectedType) {\r\n        let msg = `Argument ${argumentName} type error, expected type is ${expectedType}.`;\r\n        let error = new Error(msg);\r\n        let name = \"argumentTypeIncorrect\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    queryResultTypeError() {\r\n        let msg = 'Type of the query result is expected as Array or DataSourceSelectResult.';\r\n        return new Error(msg);\r\n    }\r\n}\r\nexport let errors = new Errors();\r\n","export class Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { errors as baseErrors } from \"./errors\";\r\nimport { Callback } from \"./callback\";\r\nlet errors = Object.assign(baseErrors, {\r\n    dataSourceCanntInsert() {\r\n        return new Error(\"DataSource can not insert.\");\r\n    },\r\n    dataSourceCanntDelete() {\r\n        return new Error(\"DataSource can not delete.\");\r\n    },\r\n    dataSourceCanntUpdate() {\r\n        return new Error(\"DataSource can not update.\");\r\n    },\r\n    primaryKeyNull(key) {\r\n        let msg = `Primary key named '${key}' value is null.`;\r\n        return new Error(msg);\r\n    }\r\n});\r\nexport class DataSource {\r\n    constructor(args) {\r\n        this.inserting = new Callback(); //callbacks1<DataSource<T>, T, number>();\r\n        this.inserted = new Callback();\r\n        this.deleting = new Callback(); //callbacks<DataSource<T>, T>();\r\n        this.deleted = new Callback(); //callbacks<DataSource<T>, T>();\r\n        this.updating = new Callback();\r\n        this.updated = new Callback();\r\n        this.selecting = new Callback();\r\n        this.selected = new Callback(); //callbacks<DataSource<T>, DataSourceSelectResult<T>>();\r\n        this.error = new Callback(); //callbacks<this, DataSourceError>();\r\n        this.args = args;\r\n        this.primaryKeys = args.primaryKeys || [];\r\n    }\r\n    ; //callbacks<DataSource<T>, DataSourceSelectArguments>();\r\n    get canDelete() {\r\n        return this.args.delete != null && this.primaryKeys.length > 0;\r\n    }\r\n    get canInsert() {\r\n        return this.args.insert != null && this.primaryKeys.length > 0;\r\n    }\r\n    get canUpdate() {\r\n        return this.args.update != null && this.primaryKeys.length > 0;\r\n    }\r\n    executeInsert(item, args) {\r\n        return this.args.insert(item, args);\r\n    }\r\n    executeDelete(item, args) {\r\n        return this.args.delete(item, args);\r\n    }\r\n    executeUpdate(item, args) {\r\n        return this.args.update(item, args);\r\n    }\r\n    executeSelect(args) {\r\n        args = args || {};\r\n        return this.args.select(args);\r\n    }\r\n    insert(item, args, index) {\r\n        if (!this.canInsert)\r\n            throw errors.dataSourceCanntInsert();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        if (typeof args == 'number') {\r\n            index = args;\r\n            args = null;\r\n        }\r\n        this.inserting.fire({ sender: this, dataItem: item, index });\r\n        return this.executeInsert(item, args).then((data) => {\r\n            Object.assign(item, data);\r\n            this.inserted.fire({ sender: this, dataItem: item, index });\r\n            return data;\r\n        }).catch(exc => {\r\n            this.processError(exc, 'insert');\r\n            throw exc;\r\n        });\r\n    }\r\n    delete(item, args) {\r\n        if (!this.canDelete)\r\n            throw errors.dataSourceCanntDelete();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        this.checkPrimaryKeys(item);\r\n        this.deleting.fire({ sender: this, dataItem: item });\r\n        return this.executeDelete(item, args).then((data) => {\r\n            this.deleted.fire({ sender: this, dataItem: item });\r\n            return data;\r\n        }).catch(exc => {\r\n            this.processError(exc, 'delete');\r\n            throw exc;\r\n        });\r\n    }\r\n    update(item, args) {\r\n        if (!this.canUpdate)\r\n            throw errors.dataSourceCanntUpdate();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        this.checkPrimaryKeys(item);\r\n        this.updating.fire({ sender: this, dataItem: item });\r\n        return this.executeUpdate(item, args).then((data) => {\r\n            Object.assign(item, data);\r\n            this.updated.fire({ sender: this, dataItem: item });\r\n            return data;\r\n        }).catch((exc) => {\r\n            this.processError(exc, 'update');\r\n            throw exc;\r\n        });\r\n    }\r\n    isSameItem(theItem, otherItem) {\r\n        if (theItem == null)\r\n            throw errors.argumentNull('theItem');\r\n        if (otherItem == null)\r\n            throw errors.argumentNull('otherItem');\r\n        if (this.primaryKeys.length == 0)\r\n            return theItem == otherItem;\r\n        this.checkPrimaryKeys(theItem);\r\n        this.checkPrimaryKeys(otherItem);\r\n        for (let pk of this.primaryKeys) {\r\n            if (theItem[pk] != otherItem[pk])\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    checkPrimaryKeys(item) {\r\n        for (let key in item) {\r\n            if (item[key] == null && this.primaryKeys.indexOf(key) >= 0)\r\n                throw errors.primaryKeyNull(key);\r\n        }\r\n    }\r\n    select(args) {\r\n        args = args || {};\r\n        // fireCallback(this.selecting, this, args);\r\n        this.selecting.fire({ sender: this, selectArguments: args });\r\n        return this.executeSelect(args).then((data) => {\r\n            let dataItems;\r\n            let totalRowCount;\r\n            if (Array.isArray(data)) {\r\n                dataItems = data;\r\n                totalRowCount = data.length;\r\n            }\r\n            else if (data.dataItems !== undefined && data.totalRowCount !== undefined) {\r\n                dataItems = data.dataItems;\r\n                totalRowCount = data.totalRowCount;\r\n            }\r\n            else {\r\n                throw errors.queryResultTypeError();\r\n            }\r\n            this.selected.fire({ sender: this, selectResult: { totalRowCount, dataItems } });\r\n            return { totalRowCount, dataItems };\r\n        }).catch(exc => {\r\n            this.processError(exc, 'select');\r\n            throw exc;\r\n        });\r\n    }\r\n    processError(exc, method) {\r\n        exc.method = method;\r\n        this.error.fire({ sender: this, error: exc });\r\n        if (!exc.handled)\r\n            throw exc;\r\n    }\r\n}\r\nexport class DataSourceSelectArguments {\r\n    constructor() {\r\n        this.startRowIndex = 0;\r\n        this.maximumRows = 2147483647;\r\n    }\r\n}\r\nexport class ArrayDataSource extends DataSource {\r\n    constructor(items) {\r\n        super({\r\n            select(args) {\r\n                return __awaiter(this, void 0, void 0, function* () {\r\n                    if (args.sortExpression) {\r\n                    }\r\n                    let dataItems = items.slice(args.startRowIndex, args.startRowIndex + args.maximumRows);\r\n                    let result = { dataItems, totalRowCount: items.length };\r\n                    return result;\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n// }\r\n","export function parseUrl(url) {\r\n    let i = url.indexOf(\"?\");\r\n    if (i < 0)\r\n        return {};\r\n    let query = url.substr(i + 1);\r\n    return pareeUrlQuery(query);\r\n}\r\nfunction pareeUrlQuery(query) {\r\n    let match, pl = /\\+/g, // Regex for replacing addition symbol with a space\r\n    search = /([^&=]+)=?([^&]*)/g, decode = function (s) {\r\n        return decodeURIComponent(s.replace(pl, \" \"));\r\n    };\r\n    let urlParams = {};\r\n    while (match = search.exec(query))\r\n        urlParams[decode(match[1])] = decode(match[2]);\r\n    return urlParams;\r\n}\r\n","export { guid } from \"./guid\";\r\nexport { pathContact } from \"./path\";\r\nexport { Errors, errors } from \"./errors\";\r\nexport { Callback } from \"./callback\";\r\nexport { DataSource, DataSourceSelectArguments } from \"./data\";\r\nexport { parseUrl } from \"./url\";\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ComponentDataHandler = exports.classNames = exports.TextInput = exports.PropEditor = exports.DesignerContext = exports.PageDesigner = exports.EditorPanel = exports.Component = exports.groupDisplayNames = void 0;\r\nvar common_1 = require(\"./common\");\r\nObject.defineProperty(exports, \"groupDisplayNames\", { enumerable: true, get: function () { return common_1.groupDisplayNames; } });\r\nvar component_1 = require(\"./component\");\r\nObject.defineProperty(exports, \"Component\", { enumerable: true, get: function () { return component_1.Component; } });\r\nvar editor_panel_1 = require(\"./editor-panel\");\r\nObject.defineProperty(exports, \"EditorPanel\", { enumerable: true, get: function () { return editor_panel_1.EditorPanel; } });\r\nvar page_designer_1 = require(\"./page-designer\");\r\nObject.defineProperty(exports, \"PageDesigner\", { enumerable: true, get: function () { return page_designer_1.PageDesigner; } });\r\nObject.defineProperty(exports, \"DesignerContext\", { enumerable: true, get: function () { return page_designer_1.DesignerContext; } });\r\nvar prop_editor_1 = require(\"./prop-editor\");\r\nObject.defineProperty(exports, \"PropEditor\", { enumerable: true, get: function () { return prop_editor_1.PropEditor; } });\r\nObject.defineProperty(exports, \"TextInput\", { enumerable: true, get: function () { return prop_editor_1.TextInput; } });\r\nvar style_1 = require(\"./style\");\r\nObject.defineProperty(exports, \"classNames\", { enumerable: true, get: function () { return style_1.classNames; } });\r\nvar component_data_handler_1 = require(\"./component-data-handler\");\r\nObject.defineProperty(exports, \"ComponentDataHandler\", { enumerable: true, get: function () { return component_data_handler_1.ComponentDataHandler; } });\r\n//# sourceMappingURL=index.js.map","/*!\r\n * \r\n *  maishu-dilu v1.7.1\r\n *  https://github.com/ansiboy/dilu\r\n *  \r\n *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>\r\n *  Licensed under the MIT License.\r\n * \r\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dilu\"] = factory();\n\telse\n\t\troot[\"dilu\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./out/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./out/errors.js\":\n/*!***********************!*\\\n  !*** ./out/errors.js ***!\n  \\***********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// namespace dilu {\r\nexports.errors = {\r\n    argumentNull(parameterName) {\r\n        let msg = `Parameter ${parameterName} can not be null or empty.`;\r\n        return new Error(msg);\r\n    },\r\n    elementValidateRuleNotSet(element) {\r\n        let msg = `'${element.name}'`;\r\n        return new Error(msg);\r\n    },\r\n    fieldElementCanntNull(fieldIndex) {\r\n        // if (fieldIndex != null)\r\n        let msg = fieldIndex != null ?\r\n            `The element value in the field cannt be null, field index is ${fieldIndex}.` :\r\n            `The element in the field is null`;\r\n        return new Error(msg);\r\n    },\r\n    elementNotExists(name) {\r\n        let msg = `Element ${name} is not exits in the form.`;\r\n        return new Error(msg);\r\n    },\r\n    fieldResultExpectBooleanType(name) {\r\n        let msg = `Result of ${name} field is expected boolean.`;\r\n        return new Error(msg);\r\n    }\r\n};\r\n// }\r\n\n\n/***/ }),\n\n/***/ \"./out/formValidator.js\":\n/*!******************************!*\\\n  !*** ./out/formValidator.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst errors_1 = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\r\n/**\r\n * \r\n */\r\nclass FormValidator {\r\n    constructor(form, ...fields) {\r\n        /**  true */\r\n        this.validateOnChanged = true;\r\n        if (!form)\r\n            throw errors_1.errors.argumentNull('form');\r\n        this.fields = fields || [];\r\n        this.form = form;\r\n        this.elementEvents = {};\r\n    }\r\n    appendField(field) {\r\n        this.fields.push(field);\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    clearErrors() {\r\n        this.fields.map(o => o.errorElement)\r\n            .filter(o => o != null)\r\n            .forEach(o => o.style.display = 'none');\r\n    }\r\n    /**\r\n     * \r\n     * @param name \r\n     */\r\n    clearElementError(name) {\r\n        if (!name)\r\n            throw errors_1.errors.argumentNull('name');\r\n        let fields = this.fields.filter(o => o.name == name);\r\n        for (let field of fields) {\r\n            let errorElement = this.fieldErrorElement(field);\r\n            errorElement.style.display = 'none';\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param name \r\n     * @param error \r\n     */\r\n    setElementError(name, error) {\r\n        if (!name)\r\n            throw errors_1.errors.argumentNull('name');\r\n        if (!error)\r\n            throw errors_1.errors.argumentNull('error');\r\n        let fields = this.fields.filter(o => o.name == name);\r\n        for (let field of fields) {\r\n            let errorElement = this.fieldErrorElement(field);\r\n            errorElement.style.removeProperty('display');\r\n            errorElement.innerHTML = error;\r\n        }\r\n    }\r\n    fieldElement(field) {\r\n        let name = field.name;\r\n        let element = this.form.querySelectorAll(`[name='${name}']`)[0];\r\n        if (element == null)\r\n            throw errors_1.errors.elementNotExists(name);\r\n        return element;\r\n    }\r\n    fieldErrorElement(field) {\r\n        if (!field.errorElement) {\r\n            let errorElement = this.form.getElementsByClassName(`${FormValidator.errorClassName} ${field.name}`)[0];\r\n            if (!errorElement) {\r\n                let element = this.fieldElement(field);\r\n                errorElement = document.createElement(\"span\");\r\n                errorElement.className = FormValidator.errorClassName;\r\n                errorElement.style.display = 'none';\r\n                if (element.nextSibling)\r\n                    element.parentElement.insertBefore(errorElement, element.nextSibling);\r\n                else\r\n                    element.parentElement.appendChild(errorElement);\r\n            }\r\n            field.errorElement = errorElement;\r\n        }\r\n        return field.errorElement;\r\n        // return errorElement;\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    check() {\r\n        let ps = new Array();\r\n        for (let i = 0; i < this.fields.length; i++) {\r\n            let field = this.fields[i];\r\n            let element = this.fieldElement(field);\r\n            if (field.condition && field.condition(element) == false)\r\n                continue;\r\n            let p = this.checkField(field);\r\n            ps.push(p);\r\n        }\r\n        let result = ps.filter(o => o == false).length == 0;\r\n        return result;\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    checkAsync() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let ps = new Array();\r\n            for (let i = 0; i < this.fields.length; i++) {\r\n                let field = this.fields[i];\r\n                let element = this.fieldElement(field);\r\n                if (field.condition && field.condition(element) == false)\r\n                    continue;\r\n                let p = this.checkFieldAsync(field);\r\n                ps.push(p);\r\n            }\r\n            let checkResults = yield Promise.all(ps);\r\n            let result = checkResults.filter(o => o == false).length == 0;\r\n            return result;\r\n        });\r\n    }\r\n    bindElementEvent(field, isAsync) {\r\n        if (this.elementEvents[field.name]) {\r\n            return;\r\n        }\r\n        let element = this.fieldElement(field);\r\n        let validateFunc = (() => {\r\n            let checking = false;\r\n            return () => {\r\n                if (checking)\r\n                    return;\r\n                checking = true;\r\n                // isAsync ? this.checkFieldAsync(field) : this.checkField(field);\r\n                if (isAsync) {\r\n                    this.checkFieldAsync(field)\r\n                        .then(() => checking = false)\r\n                        .catch(() => checking = false);\r\n                }\r\n                else {\r\n                    this.checkField(field);\r\n                    checking = false;\r\n                }\r\n            };\r\n        })();\r\n        if (this.validateOnChanged) {\r\n            element.addEventListener('change', validateFunc);\r\n            let elementType = element.type || \"text\";\r\n            if (elementType == \"text\" || elementType == \"password\") {\r\n                element.addEventListener('keyup', validateFunc);\r\n            }\r\n            else if (elementType == \"radio\") {\r\n                let name = element.name;\r\n                let elements = this.form.querySelectorAll(`[name='${name}']`);\r\n                for (let i = 0; i < elements.length; i++) {\r\n                    if (elements[i] == element) {\r\n                        continue;\r\n                    }\r\n                    elements[i].addEventListener(\"change\", validateFunc);\r\n                }\r\n            }\r\n        }\r\n        this.elementEvents[field.name] = true;\r\n    }\r\n    checkField(field) {\r\n        this.bindElementEvent(field, false);\r\n        let element = this.fieldElement(field);\r\n        let depends = field.depends || [];\r\n        for (let j = 0; j < depends.length; j++) {\r\n            let dependResult = depends[j](element);\r\n            if (typeof dependResult == 'object') {\r\n                throw new Error('Please use checkAsync method.');\r\n            }\r\n            let dependIsOK = dependResult;\r\n            if (!dependIsOK)\r\n                return false;\r\n        }\r\n        for (let j = 0; j < field.rules.length; j++) {\r\n            let rule = field.rules[j];\r\n            let element = this.fieldElement(field);\r\n            if (element == null)\r\n                throw errors_1.errors.fieldElementCanntNull();\r\n            let value = this.elementValue(element);\r\n            let isPass = rule.validate(value);\r\n            if (typeof isPass == 'object') {\r\n                throw new Error('Please use checkAsync method.');\r\n            }\r\n            this.showElement(!isPass, field, rule, element);\r\n            if (!isPass)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    checkFieldAsync(field) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.bindElementEvent(field, true);\r\n            let element = this.fieldElement(field);\r\n            let depends = field.depends || [];\r\n            for (let j = 0; j < depends.length; j++) {\r\n                let dependResult = depends[j](element);\r\n                if (typeof dependResult == 'boolean') {\r\n                    dependResult = Promise.resolve(dependResult);\r\n                }\r\n                let dependIsOK = yield dependResult;\r\n                if (!dependIsOK)\r\n                    return false;\r\n            }\r\n            for (let j = 0; j < field.rules.length; j++) {\r\n                let rule = field.rules[j];\r\n                let element = this.fieldElement(field);\r\n                if (element == null)\r\n                    throw errors_1.errors.fieldElementCanntNull();\r\n                let value = this.elementValue(element);\r\n                let p = rule.validate(value);\r\n                if (typeof p == 'boolean') {\r\n                    p = Promise.resolve(p);\r\n                }\r\n                let isPass = yield p;\r\n                this.showElement(!isPass, field, rule, element);\r\n                if (!isPass)\r\n                    return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    showElement(display, field, rule, element) {\r\n        let errorElement = this.fieldErrorElement(field);\r\n        console.assert(errorElement != null, 'errorElement cannt be null.');\r\n        if (rule.error != null) {\r\n            errorElement = field.errorElement;\r\n            let name = this.elementName(element);\r\n            let errorText = typeof rule.error == 'string' ? rule.error : rule.error() || '';\r\n            errorElement.innerHTML = errorText.replace('%s', name);\r\n        }\r\n        if (display) {\r\n            errorElement.style.removeProperty('display');\r\n        }\r\n        else {\r\n            errorElement.style.display = 'none';\r\n        }\r\n    }\r\n    /**\r\n     *  HTML \r\n     * @param name HTML \r\n     */\r\n    checkElementAsync(name) {\r\n        let field = this.fields.filter(o => o.name == name)[0];\r\n        if (!field)\r\n            throw errors_1.errors.elementNotExists(name);\r\n        return this.checkFieldAsync(field);\r\n    }\r\n    /**\r\n     *  HTML \r\n     * @param name HTML \r\n     */\r\n    checkElement(name) {\r\n        let field = this.fields.filter(o => o.name == name)[0];\r\n        if (!field)\r\n            throw errors_1.errors.elementNotExists(name);\r\n        return this.checkField(field);\r\n    }\r\n    elementValue(element) {\r\n        if (element.tagName == \"TEXTAREA\") {\r\n            return element.value;\r\n        }\r\n        let inputElement = element;\r\n        if (inputElement.type == \"radio\") {\r\n            let elements = this.form.querySelectorAll(`[name='${inputElement.name}']`);\r\n            for (let i = 0; i < elements.length; i++) {\r\n                if (elements[i].checked) {\r\n                    return elements[i].value;\r\n                }\r\n            }\r\n            return \"\";\r\n        }\r\n        return element.value;\r\n    }\r\n    elementName(element) {\r\n        if (element.tagName == \"TEXTAREA\") {\r\n            return element.name;\r\n        }\r\n        return element.name;\r\n    }\r\n}\r\nexports.FormValidator = FormValidator;\r\nFormValidator.errorClassName = 'validationMessage';\r\n// }\r\n\n\n/***/ }),\n\n/***/ \"./out/index.js\":\n/*!**********************!*\\\n  !*** ./out/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar formValidator_1 = __webpack_require__(/*! ./formValidator */ \"./out/formValidator.js\");\r\nexports.FormValidator = formValidator_1.FormValidator;\r\nvar rules_1 = __webpack_require__(/*! ./rules */ \"./out/rules.js\");\r\nexports.rules = rules_1.rules;\r\n\n\n/***/ }),\n\n/***/ \"./out/rules.js\":\n/*!**********************!*\\\n  !*** ./out/rules.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// namespace dilu {\r\nvar ruleRegex = /^(.+?)\\[(.+)\\]$/, numericRegex = /^[0-9]+$/, integerRegex = /^\\-?[0-9]+$/, decimalRegex = /^\\-?[0-9]*\\.?[0-9]+$/, emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/, alphaRegex = /^[a-z]+$/i, alphaNumericRegex = /^[a-z0-9]+$/i, alphaDashRegex = /^[a-z0-9_\\-]+$/i, naturalRegex = /^[0-9]+$/i, naturalNoZeroRegex = /^[1-9][0-9]*$/i, ipRegex = /^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i, base64Regex = /[^a-zA-Z0-9\\/\\+=]/i, numericDashRegex = /^[\\d\\-\\s]+$/, urlRegex = /^((http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)|)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/, mobileRegex = /^1[34578]\\d{9}$/, dateRegex = /\\d{4}-\\d{1,2}-\\d{1,2}/;\r\nlet msgs = {\r\n    required: '%s',\r\n    matches: '%s%s',\r\n    \"default\": 'The %s field is still set to default, please change.',\r\n    equal: '%s%s',\r\n    email: '',\r\n    valid_emails: 'The %s field must contain all valid email addresses.',\r\n    minLength: '%s%s',\r\n    maxLength: '%s%s',\r\n    exact_length: 'The %s field must be exactly %s characters in length.',\r\n    greater_than: 'The %s field must contain a number greater than %s.',\r\n    less_than: 'The %s field must contain a number less than %s.',\r\n    alpha: 'The %s field must only contain alphabetical characters.',\r\n    alpha_numeric: 'The %s field must only contain alpha-numeric characters.',\r\n    alpha_dash: 'The %s field must only contain alpha-numeric characters, underscores, and dashes.',\r\n    numeric: '',\r\n    integer: 'The %s field must contain an integer.',\r\n    decimal: 'The %s field must contain a decimal number.',\r\n    is_natural: 'The %s field must contain only positive numbers.',\r\n    is_natural_no_zero: 'The %s field must contain a number greater than zero.',\r\n    ip: 'The %s field must contain a valid IP.',\r\n    valid_base64: 'The %s field must contain a base64 string.',\r\n    valid_credit_card: 'The %s field must contain a valid credit card number.',\r\n    is_file_type: 'The %s field must contain only %s files.',\r\n    valid_url: 'The %s field must contain a valid URL.',\r\n    greater_than_date: 'The %s field must contain a more recent date than %s.',\r\n    less_than_date: 'The %s field must contain an older date than %s.',\r\n    greater_than_or_equal_date: 'The %s field must contain a date that\\'s at least as recent as %s.',\r\n    less_than_or_equal_date: 'The %s field must contain a date that\\'s %s or older.',\r\n    mobile: '',\r\n    custom: '',\r\n};\r\nfunction createValidation(validate, error) {\r\n    return {\r\n        validate: validate,\r\n        error: error\r\n    };\r\n}\r\nfunction calc(value) {\r\n    if (typeof value == 'function') {\r\n        return value();\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * \r\n */\r\nexports.rules = {\r\n    /**\r\n     * \r\n     * @param error \r\n     */\r\n    required(error) {\r\n        let validate = (value) => value != '';\r\n        return createValidation(validate, error || msgs.required);\r\n    },\r\n    /**\r\n     * \r\n     * @param otherElement \r\n     * @param error \r\n     */\r\n    matches(otherElement, error) {\r\n        var validate = (value) => value == otherElement.value;\r\n        return createValidation(validate, error || msgs.required);\r\n    },\r\n    /**\r\n     * \r\n     * @param error \r\n     */\r\n    email(error) {\r\n        var validate = (value) => emailRegex.test(value);\r\n        return createValidation(validate, error || msgs.required);\r\n    },\r\n    /**\r\n     * \r\n     * @param length \r\n     * @param error \r\n     */\r\n    minLength(length, error) {\r\n        var validate = (value) => (value || '').length >= calc(length);\r\n        return createValidation(validate, error || msgs.minLength);\r\n    },\r\n    /**\r\n     * \r\n     * @param length \r\n     * @param error \r\n     */\r\n    maxLength(length, error) {\r\n        var validate = (value) => (value || '').length <= calc(length);\r\n        return createValidation(validate, error || msgs.matches);\r\n    },\r\n    /**\r\n     * \r\n     * @param value \r\n     * @param error \r\n     */\r\n    greaterThan(value, error) {\r\n        var validate = (o) => elementValueCompare(o, calc(value)) == 'greaterThan';\r\n        return createValidation(validate, error || msgs.greater_than);\r\n    },\r\n    /**\r\n     * \r\n     * @param value \r\n     * @param error \r\n     */\r\n    lessThan(value, error) {\r\n        var validate = (o) => elementValueCompare(o, calc(value)) == 'lessThan';\r\n        return createValidation(validate, error || msgs.less_than);\r\n    },\r\n    /**\r\n     * \r\n     * @param value \r\n     * @param error \r\n     */\r\n    equal(value, error) {\r\n        var validate = (o) => elementValueCompare(o, calc(value)) == 'equal';\r\n        return createValidation(validate, error || msgs.equal);\r\n    },\r\n    /**\r\n     *  IP\r\n     * @param error \r\n     */\r\n    ip(error) {\r\n        var validate = (value) => ipRegex.test(value);\r\n        return createValidation(validate, error || msgs.ip);\r\n    },\r\n    /**\r\n     *  URL\r\n     * @param error \r\n     */\r\n    url(error) {\r\n        var validate = (value) => urlRegex.test(value);\r\n        return createValidation(validate, error || msgs.valid_url);\r\n    },\r\n    /**\r\n     * \r\n     * @param error \r\n     */\r\n    mobile(error) {\r\n        var validate = (value) => mobileRegex.test(value);\r\n        return createValidation(validate, error || msgs.mobile);\r\n    },\r\n    /**\r\n     * \r\n     * @param error \r\n     */\r\n    numeric(error) {\r\n        var validate = (value) => numericRegex.test(value);\r\n        return createValidation(validate, error || msgs.numeric);\r\n    },\r\n    /**\r\n     * \r\n     * @param validate \r\n     * @param error \r\n     */\r\n    custom(validate, error) {\r\n        return createValidation(validate, error || msgs.custom);\r\n    }\r\n};\r\nfunction elementValueCompare(value, otherValue) {\r\n    let elementValue;\r\n    if (typeof otherValue == 'number') {\r\n        elementValue = decimalRegex.test(value) ? parseFloat(value) : null;\r\n    }\r\n    else if (typeof otherValue == 'string') {\r\n        elementValue = value;\r\n    }\r\n    else {\r\n        elementValue = getValidDate(value);\r\n    }\r\n    if (elementValue < otherValue)\r\n        return 'lessThan';\r\n    else if (elementValue > otherValue)\r\n        return 'greaterThan';\r\n    else\r\n        return 'equal';\r\n}\r\n/**\r\n * private function _getValidDate: helper function to convert a string date to a Date object\r\n * @param date (String) must be in format yyyy-mm-dd or use keyword: today\r\n * @returns {Date} returns false if invalid\r\n */\r\nfunction getValidDate(date) {\r\n    if (!date.match('today') && !date.match(dateRegex)) {\r\n        return null;\r\n    }\r\n    var validDate = new Date(), validDateArray;\r\n    if (!date.match('today')) {\r\n        validDateArray = date.split('-');\r\n        validDate.setFullYear(validDateArray[0]);\r\n        validDate.setMonth(validDateArray[1] - 1);\r\n        validDate.setDate(validDateArray[2]);\r\n    }\r\n    return validDate;\r\n}\r\n;\r\n// }\r\n\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ComponentContainer = exports.PageBody = exports.PageFooter = exports.PageHeader = exports.PageContext = exports.Page = exports.componentTypes = exports.registerComponent = exports.parseComponentData = void 0;\r\n// export { ComponentInfo } from \"./component-info\";\r\n// export { component } from \"./decorators\";\r\nvar parse_component_data_1 = require(\"./parse-component-data\");\r\nObject.defineProperty(exports, \"parseComponentData\", { enumerable: true, get: function () { return parse_component_data_1.parseComponentData; } });\r\nvar register_1 = require(\"./register\");\r\nObject.defineProperty(exports, \"registerComponent\", { enumerable: true, get: function () { return register_1.registerComponent; } });\r\nObject.defineProperty(exports, \"componentTypes\", { enumerable: true, get: function () { return register_1.componentTypes; } });\r\nvar page_1 = require(\"./page\");\r\nObject.defineProperty(exports, \"Page\", { enumerable: true, get: function () { return page_1.Page; } });\r\nObject.defineProperty(exports, \"PageContext\", { enumerable: true, get: function () { return page_1.PageContext; } });\r\nvar page_header_1 = require(\"./page-header\");\r\nObject.defineProperty(exports, \"PageHeader\", { enumerable: true, get: function () { return page_header_1.PageHeader; } });\r\nvar page_footer_1 = require(\"./page-footer\");\r\nObject.defineProperty(exports, \"PageFooter\", { enumerable: true, get: function () { return page_footer_1.PageFooter; } });\r\nvar page_body_1 = require(\"./page-body\");\r\nObject.defineProperty(exports, \"PageBody\", { enumerable: true, get: function () { return page_body_1.PageBody; } });\r\nvar component_container_1 = require(\"./component-container\");\r\nObject.defineProperty(exports, \"ComponentContainer\", { enumerable: true, get: function () { return component_container_1.ComponentContainer; } });\r\nrequire(\"./style\");\r\n//# sourceMappingURL=index.js.map","export class Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isFixed = exports.isVisible = void 0;\r\nconst page_1 = require(\"./page\");\r\nconst page_body_1 = require(\"./page-body\");\r\nconst page_header_1 = require(\"./page-header\");\r\nconst page_footer_1 = require(\"./page-footer\");\r\nlet elementId = \"maishu-jueying-core-style\";\r\nif (!document.getElementById(elementId) && document.head != null) {\r\n    let element = document.createElement('style');\r\n    element.type = 'text/css';\r\n    element.id = \"taro-builder-core-style\";\r\n    document.head.appendChild(element);\r\n    element.innerHTML = `\r\n    .${page_1.Page.className} {\r\n        width   : 100%;\r\n        height  : 100%;\r\n        position: absolute;\r\n    }\r\n    \r\n    .${page_1.Page.className} .${page_body_1.PageBody.className} {\r\n        overflow-y: auto;\r\n        overflow-x: hidden;\r\n        height  : 100%;\r\n    }\r\n    \r\n    .${page_1.Page.className} .${page_body_1.PageBody.className}::-webkit-scrollbar-track-piece {\r\n        background-color: #fff;\r\n    }\r\n    \r\n    .${page_1.Page.className} .${page_body_1.PageBody.className}::-webkit-scrollbar {\r\n        width: 4px;\r\n    }\r\n    \r\n    .${page_1.Page.className} .${page_body_1.PageBody.className}::-webkit-scrollbar-thumb {\r\n        background: #999;\r\n    }\r\n    \r\n    .${page_1.Page.className} .${page_header_1.PageHeader.className} {\r\n        position: absolute;\r\n        top     : 0px;\r\n        width   : 100%;\r\n    }\r\n    \r\n    .${page_1.Page.className} .${page_footer_1.PageFooter.className} {\r\n        position: absolute;\r\n        bottom  : 0px;\r\n        width   : 100%;\r\n        margin  : 0;\r\n    }\r\n    `;\r\n}\r\nfunction isVisible(style) {\r\n    if (!style.display)\r\n        return true;\r\n    return style.display != \"none\";\r\n}\r\nexports.isVisible = isVisible;\r\nfunction isFixed(style) {\r\n    return style.position == \"fixed\" || style.position == \"absolute\";\r\n}\r\nexports.isFixed = isFixed;\r\n//# sourceMappingURL=style.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EditorPanel = void 0;\r\nconst React = require(\"react\");\r\nconst property_editor_1 = require(\"./property-editor\");\r\nconst style_1 = require(\"./style\");\r\nclass EditorPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componentDatas: [] };\r\n    }\r\n    /**  */\r\n    validateInputs() {\r\n        return this.editor.validator.checkAsync();\r\n    }\r\n    render() {\r\n        let { empty } = this.props;\r\n        empty = empty || React.createElement(\"div\", { className: \"empty\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7684\\u5C5E\\u6027\");\r\n        return React.createElement(\"div\", { className: `${style_1.classNames.editorPanel} ${this.props.className || \"\"}`, ref: (e) => this.element = e || this.element },\r\n            React.createElement(property_editor_1.PropertyEditor, { ref: e => this.editor = e || this.editor, empty: empty, customRender: this.props.customRender }));\r\n    }\r\n}\r\nexports.EditorPanel = EditorPanel;\r\n//# sourceMappingURL=editor-panel.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextInput = exports.PropEditor = void 0;\r\nconst React = require(\"react\");\r\nclass PropEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    static dropdown(items, valueType) {\r\n        return dropdown(items, valueType);\r\n    }\r\n    static textInput() {\r\n        return TextInput;\r\n    }\r\n}\r\nexports.PropEditor = PropEditor;\r\nclass TextInput extends PropEditor {\r\n    render() {\r\n        let { value } = this.props;\r\n        return React.createElement(\"input\", { className: 'form-control', value: value || '', onChange: e => {\r\n                // this.setState({ value: e.target.value })\r\n                this.props.updateComponentProp(e.target.value);\r\n            } });\r\n    }\r\n}\r\nexports.TextInput = TextInput;\r\nfunction dropdown(items, valueType) {\r\n    let itemsPromise;\r\n    let textValues = [];\r\n    if (valueType == null && Array.isArray(items)) {\r\n        valueType = items.length > 0 && typeof items[0] == \"number\" ? \"number\" : \"string\";\r\n        for (let i = 0; i < items.length; i++) {\r\n            textValues[i] = { text: items[i], value: items[i] };\r\n        }\r\n    }\r\n    else if (valueType == null) {\r\n        valueType = \"string\";\r\n        let propNames = Object.getOwnPropertyNames(items);\r\n        for (let i = 0; i < propNames.length; i++) {\r\n            textValues[i] = { text: items[propNames[i]], value: propNames[i] };\r\n        }\r\n    }\r\n    else if (Array.isArray(items)) {\r\n        textValues = items;\r\n    }\r\n    else {\r\n        itemsPromise = items;\r\n    }\r\n    class Dropdown extends PropEditor {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {};\r\n        }\r\n        componentDidMount() {\r\n            return __awaiter(this, void 0, void 0, function* () {\r\n                if (itemsPromise) {\r\n                    let items = yield itemsPromise;\r\n                    this.setState({ items });\r\n                }\r\n            });\r\n        }\r\n        render() {\r\n            let { items } = this.state;\r\n            let { value } = this.props;\r\n            items = items || textValues;\r\n            return React.createElement(\"select\", { className: 'form-control', value: value == null ? \"\" : value, onChange: e => {\r\n                    let textValue = e.target.value;\r\n                    if (valueType == \"number\") {\r\n                        let integerRegex = /^\\d+$/;\r\n                        let floatRegex = /^[+-]?\\d+(\\.\\d+)?$/;\r\n                        if (integerRegex.test(textValue))\r\n                            value = parseInt(textValue);\r\n                        else if (floatRegex.test(textValue))\r\n                            value = parseFloat(textValue);\r\n                        else\r\n                            value = null;\r\n                    }\r\n                    else {\r\n                        value = textValue;\r\n                    }\r\n                    this.props.updateComponentProp(value);\r\n                } }, items.map(o => React.createElement(\"option\", { key: o.value, value: o.value }, o.text)));\r\n        }\r\n    }\r\n    return Dropdown;\r\n}\r\n//# sourceMappingURL=prop-editor.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ComponentDataHandler = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nconst maishu_toolkit_1 = require(\"maishu-toolkit\");\r\nclass ComponentDataHandler {\r\n    constructor(componentData) {\r\n        this._components = {};\r\n        this.componentSelected = maishu_toolkit_1.Callback.create();\r\n        this.componentRemoved = maishu_toolkit_1.Callback.create();\r\n        this.componentAppend = maishu_toolkit_1.Callback.create();\r\n        this.componentUpdated = maishu_toolkit_1.Callback.create();\r\n        this.pageDataChanged = maishu_toolkit_1.Callback.create();\r\n        this._pageData = componentData;\r\n        this.initComponentData(this._pageData);\r\n    }\r\n    /**  pageData  */\r\n    initComponentData(componentData) {\r\n        if (componentData == null) {\r\n            return;\r\n        }\r\n        componentData.children = componentData.children || [];\r\n        ComponentDataHandler.fillComponent(componentData);\r\n        ComponentDataHandler.setComponetRefProp(componentData, this._components);\r\n    }\r\n    /**  */\r\n    get selectedComponents() {\r\n        let arr = new Array();\r\n        let stack = new Array();\r\n        stack.push(this._pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item.props != null && item.selected == true)\r\n                arr.push(item);\r\n            (item.children || []).forEach(child => {\r\n                if (typeof child == \"string\")\r\n                    return true;\r\n                stack.push(child);\r\n            });\r\n        }\r\n        return arr;\r\n    }\r\n    /**  */\r\n    get selectedComponentIds() {\r\n        return this.selectedComponents.map(o => o.id);\r\n    }\r\n    /**  */\r\n    get components() {\r\n        return this._components;\r\n    }\r\n    get pageData() {\r\n        return this._pageData;\r\n    }\r\n    set pageData(value) {\r\n        this._pageData = value;\r\n        this.initComponentData(value);\r\n        this.pageDataChanged.fire(value);\r\n    }\r\n    /**\r\n     * \r\n     * @param componentId \r\n     * @param parentId \r\n     * @param beforeChildId \r\n     */\r\n    moveComponent(componentId, parentId, childComponentIndex) {\r\n        let component = this.findComponentData(componentId);\r\n        if (component == null)\r\n            throw new Error(`Cannt find component by id ${componentId}`);\r\n        console.assert(component != null, `Cannt find component by id ${componentId}`);\r\n        let pageData = this.pageData;\r\n        console.assert(pageData.children != null);\r\n        let children = pageData.children; //translateComponentDataChildren(pageData.children);\r\n        this.removeComponentFrom(componentId, children);\r\n        this.appendComponent(parentId, component, childComponentIndex);\r\n    }\r\n    updateComponentProps(componentProps) {\r\n        let componentDatas = [];\r\n        for (let i = 0; i < componentProps.length; i++) {\r\n            let { componentId, propName, value } = componentProps[i];\r\n            let componentData = this.findComponentData(componentId);\r\n            if (componentData == null)\r\n                continue;\r\n            let navPropsNames = propName.split(\".\");\r\n            console.assert(componentData != null);\r\n            console.assert(navPropsNames != null, 'props is null');\r\n            componentData.props = componentData.props || {};\r\n            let obj = componentData.props;\r\n            for (let i = 0; i < navPropsNames.length - 1; i++) {\r\n                obj = obj[navPropsNames[i]] = obj[navPropsNames[i]] || {};\r\n            }\r\n            obj[navPropsNames[navPropsNames.length - 1]] = value;\r\n            componentDatas.push(componentData);\r\n        }\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    findComponentData(componentId) {\r\n        let pageData = this._pageData;\r\n        if (!pageData)\r\n            throw errors_1.Errors.pageDataIsNull();\r\n        // let stack = new Array<ComponentData>();\r\n        // stack.push(pageData);\r\n        // while (stack.length > 0) {\r\n        //     let item = stack.pop();\r\n        //     if (item == null)\r\n        //         continue\r\n        //     if (item.props.id == componentId)\r\n        //         return item;\r\n        //     let children = (item.children || []).filter(o => typeof o == 'object') as ComponentData[]\r\n        //     stack.push(...children);\r\n        // }\r\n        let componentDatas = ComponentDataHandler.travelComponentData(pageData, (item) => item.id == componentId);\r\n        return componentDatas[0];\r\n    }\r\n    removeComponentFrom(controlId, collection) {\r\n        let controlIndex = null;\r\n        collection = collection || [];\r\n        for (let i = 0; i < collection.length; i++) {\r\n            let child = collection[i];\r\n            if (typeof child == \"string\")\r\n                continue;\r\n            if (controlId == child.id) {\r\n                controlIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (controlIndex == null) {\r\n            for (let i = 0; i < collection.length; i++) {\r\n                let o = collection[i];\r\n                if (typeof o == \"string\")\r\n                    continue;\r\n                let children = o.children;\r\n                if (children && children.length > 0) {\r\n                    let isRemoved = this.removeComponentFrom(controlId, children);\r\n                    if (isRemoved) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        if (controlIndex == 0) {\r\n            collection.shift();\r\n        }\r\n        else if (controlIndex == collection.length - 1) {\r\n            collection.pop();\r\n        }\r\n        else {\r\n            collection.splice(controlIndex, 1);\r\n        }\r\n        return true;\r\n    }\r\n    static travelComponentData(pageData, filter) {\r\n        let stack = new Array();\r\n        stack.push(pageData);\r\n        let r = [];\r\n        // return new Promise((resolve, reject) => {\r\n        filter = filter || (() => true);\r\n        while (stack.length > 0) {\r\n            let item = stack.shift();\r\n            if (filter(item)) {\r\n                r.push(item);\r\n            }\r\n            //===============================================\r\n            // , \r\n            let children = (item.children || []).filter(o => typeof o == 'object');\r\n            //===============================================\r\n            stack.push(...children);\r\n        }\r\n        return r;\r\n    }\r\n    /**\r\n     * \r\n     * @param parentId \r\n     * @param componentData \r\n     * @param componentIndex \r\n     */\r\n    appendComponent(parentId, componentData, componentIndex) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!componentData)\r\n            throw errors_1.Errors.argumentNull('childComponent');\r\n        this.initComponentData(componentData);\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        parentControl.children = parentControl.children || [];\r\n        if (componentIndex != null) {\r\n            parentControl.children.splice(componentIndex, 0, componentData);\r\n        }\r\n        else {\r\n            parentControl.children.push(componentData);\r\n        }\r\n        this.selectComponents(componentData.id);\r\n        this.componentAppend.fire(this);\r\n    }\r\n    /**\r\n     * \r\n     * @param component\r\n     */\r\n    static fillComponent(component) {\r\n        let namedComponents = {};\r\n        // let props: any = component.props = component.props || {};\r\n        //==================================================\r\n        // \r\n        // if (props.id) {\r\n        //     component.id = props.id;\r\n        //     delete props.id;\r\n        // }\r\n        // if (props.parentId) {\r\n        //     component.parentId = props.parentId;\r\n        //     delete component.parentId;\r\n        // }\r\n        // if (props.selected) {\r\n        //     component.selected = props.selected;\r\n        // }\r\n        // if (props.name) {\r\n        //     component.name = props.name;\r\n        //     delete props.name;\r\n        // }\r\n        // if (props.attr) {\r\n        //     component.attr = props.attr;\r\n        //     delete props.attr;\r\n        // }\r\n        //==================================================\r\n        if (!component[\"name\"]) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (namedComponents[name]);\r\n            namedComponents[name] = component;\r\n            component[\"name\"] = name;\r\n        }\r\n        if (!component.id)\r\n            component.id = maishu_toolkit_1.guid();\r\n        component.children = component.children || [];\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        component.children.forEach(child => {\r\n            if (typeof child == \"string\")\r\n                return true;\r\n            ComponentDataHandler.fillComponent(child);\r\n        });\r\n    }\r\n    static setComponetRefProp(pageData, components) {\r\n        //=========================================================\r\n        //  pageData  ID\r\n        let componentIds = {};\r\n        //=========================================================\r\n        ComponentDataHandler.travelComponentData(pageData).forEach(item => {\r\n            let itemProps = item.props || {};\r\n            console.assert(item.props != null && item.id != null);\r\n            componentIds[item.type] = componentIds[item.type] || [];\r\n            componentIds[item.type].push(item.id);\r\n            let itemRef = itemProps.ref;\r\n            itemProps.ref = (e) => {\r\n                if (e != null) {\r\n                    components[item.type] = components[item.type] || [];\r\n                    components[item.type].push(e);\r\n                }\r\n                if (typeof itemRef == \"function\")\r\n                    itemRef(e);\r\n            };\r\n        });\r\n        //=========================================================\r\n        //  componentIds  \r\n        let names = Object.getOwnPropertyNames(components);\r\n        for (let i = 0; i < names.length; i++) {\r\n            let typename = names[i];\r\n            let ids = componentIds[typename] || [];\r\n            components[typename] = (components[typename] || []).filter(o => ids.indexOf(o[\"id\"] || o.props[\"id\"]) >= 0);\r\n        }\r\n        //=========================================================\r\n    }\r\n    /**\r\n     * \r\n     * @param control \r\n     */\r\n    selectComponent(componentId) {\r\n        return this.selectComponents(componentId);\r\n    }\r\n    /**\r\n     * \r\n     * @param control \r\n     */\r\n    selectComponents(componentIds) {\r\n        if (typeof componentIds == 'string')\r\n            componentIds = [componentIds];\r\n        var stack = [];\r\n        stack.push(this._pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item == null || typeof item == \"string\")\r\n                continue;\r\n            let isSelectedControl = componentIds.indexOf(item.id) >= 0;\r\n            item.selected = isSelectedControl;\r\n            (item.children || []).forEach(child => {\r\n                if (typeof child == \"string\")\r\n                    return true;\r\n                stack.push(child);\r\n            });\r\n        }\r\n        this.componentSelected.fire(this.selectedComponentIds);\r\n    }\r\n    removeComponent(componentId) {\r\n        return this.removeComponents([componentId]);\r\n    }\r\n    /**  */\r\n    removeComponents(componentIds) {\r\n        let pageData = this.pageData;\r\n        if (!pageData || !pageData.children || pageData.children.length == 0)\r\n            return;\r\n        let children = pageData.children;\r\n        componentIds.forEach(controlId => {\r\n            this.removeComponentFrom(controlId, children);\r\n        });\r\n        this.componentRemoved.fire(componentIds);\r\n    }\r\n}\r\nexports.ComponentDataHandler = ComponentDataHandler;\r\n//# sourceMappingURL=component-data-handler.js.map"],"sourceRoot":""}
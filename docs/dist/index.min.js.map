{"version":3,"sources":["webpack://jueying/webpack/universalModuleDefinition","webpack://jueying/webpack/bootstrap","webpack://jueying/external \"react\"","webpack://jueying/./out/errors.js","webpack://jueying/./node_modules/maishu-jueying-core/out/register.js","webpack://jueying/./out/common.js","webpack://jueying/./out/component.js","webpack://jueying/./out/property-editor.js","webpack://jueying/./out/page-designer.js","webpack://jueying/./node_modules/maishu-jueying-core/out/index.js","webpack://jueying/./node_modules/maishu-jueying-core/out/errors.js","webpack://jueying/./out/style.js","webpack://jueying/./out/index.js","webpack://jueying/./node_modules/maishu-dilu/dist/index.js","webpack://jueying/./node_modules/maishu-jueying-core/out/decorators.js","webpack://jueying/./node_modules/maishu-jueying-core/out/parse-component-data.js","webpack://jueying/./out/editor-panel.js","webpack://jueying/./out/prop-editor.js","webpack://jueying/./node_modules/maishu-toolkit/out/guid.js","webpack://jueying/./node_modules/maishu-toolkit/out/path.js","webpack://jueying/./node_modules/maishu-toolkit/out/errors.js","webpack://jueying/./node_modules/maishu-toolkit/out/callback.js","webpack://jueying/./node_modules/maishu-toolkit/out/data.js","webpack://jueying/./node_modules/maishu-toolkit/out/url.js","webpack://jueying/./node_modules/maishu-toolkit/out/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","defineProperty","Errors","Error","fileName","argumentName","pluginId","componentId","componentName","fieldName","errors_1","componentTypes","registerComponent","componentType","name","errors","argumentNull","constants","componentsDir","connectorElementClassName","componentTypeName","componentData","componentPosition","proptDisplayNames","groupDisplayNames","guid","s4","Math","floor","random","toString","substring","Callback","this","funcs","Array","func","push","filter","o","args","forEach","property_editor_1","maishu_jueying_core_1","Component","type","result","propEditorInfo","componentPropEditors","i","length","propName","display","componentPropEditorDisplay","controlClassName","getPropEditorByArray","propNames","options","editorType","editorDisplay","group","displayName","defaultValue","validation","defaultGroupName","split","className","typename","classProps","join","typeName","Fragment","React","component_1","page_designer_1","common_1","maishu_dilu_1","PropertyEditor","props","super","state","designer","commonPropEditorInfos","selectedComponents","propEditorInfos","getPropEditors","items","propInfo1","propInfo2","propName1","propName2","commonFlatProps","control","controlProps","assign","children","obj","validateFields","map","_validator","FormValidator","element","editors","propValue","editorProps","editComponents","updateComponentProp","componentProps","id","checkElement","updateComponentProps","editor","createElement","prop","navPropsNames","DesignerContext","Consumer","getEditors","empty","customRender","r","groupEditorsArray","groupEditors","g","ErrorBoundary","_element","contextType","error","info","setState","message","stack","maishu_toolkit_1","createContext","PageDesigner","components","pageData","initPageData","componentIds","travelComponentData","item","console","assert","itemRef","ref","e","fillComponent","setComponetRefProp","component","namedComponents","num","child","ids","getOwnPropertyNames","arr","pop","selected","componentDatas","findComponentData","parentId","componentIndex","parentControl","splice","selectComponents","focus","selectedComponentIds","isSame","isSelectedControl","indexOf","arr1","arr2","removeComponents","controlId","removeComponentFrom","childComponentIndex","appendComponent","collection","controlIndex","shift","pageDataIsNull","keyCode","tabIndex","onKeyDown","style","Provider","decorators_1","parse_component_data_1","parseComponentData","register_1","pathFieldRequired","canntFindModule","path","componentTypeNotExists","classNames","componentSelected","emptyTemplates","loadingTemplates","templateSelected","templateDialog","emptyDocument","componentWrapper","componentPanel","componentIcon","placeholder","editorPanel","moveDown","document","setAttribute","innerHTML","head","appendChild","appendClassName","addonClassName","sourceClassName","removeClassName","targetClassName","replace","RegExp","trim","editor_panel_1","EditorPanel","prop_editor_1","PropEditor","TextInput","style_1","modules","installedModules","__webpack_require__","moduleId","l","m","c","d","Symbol","toStringTag","t","mode","__esModule","ns","create","n","p","s","parameterName","msg","fieldElementCanntNull","fieldIndex","elementNotExists","fieldResultExpectBooleanType","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","apply","form","fields","validateOnChanged","elementEvents","field","errorElement","fieldErrorElement","removeProperty","querySelectorAll","getElementsByClassName","errorClassName","fieldElement","nextSibling","parentElement","insertBefore","ps","condition","checkField","checkFieldAsync","all","isAsync","validateFunc","checking","catch","addEventListener","elementType","elements","bindElementEvent","depends","j","dependResult","rules","rule","elementValue","isPass","validate","showElement","elementName","errorText","tagName","inputElement","checked","formValidator_1","rules_1","numericRegex","decimalRegex","emailRegex","ipRegex","urlRegex","mobileRegex","dateRegex","msgs","createValidation","calc","elementValueCompare","otherValue","test","parseFloat","date","match","validDateArray","validDate","Date","setFullYear","setMonth","setDate","getValidDate","required","matches","otherElement","email","minLength","maxLength","greaterThan","lessThan","equal","ip","url","mobile","numeric","custom","constructor","validator","checkAsync","valueType","itemsPromise","textValues","isArray","text","onChange","textValue","target","floatRegex","parseInt","dropdown","pathContact","paths","str","expectedType","dataSourceCanntInsert","dataSourceCanntDelete","dataSourceCanntUpdate","primaryKeyNull","inserting","inserted","deleting","deleted","updating","updated","selecting","primaryKeys","delete","insert","update","select","index","canInsert","fire","sender","dataItem","executeInsert","data","exc","processError","canDelete","checkPrimaryKeys","executeDelete","canUpdate","executeUpdate","theItem","otherItem","pk","selectArguments","executeSelect","dataItems","totalRowCount","undefined","queryResultTypeError","selectResult","method","handled","DataSourceSelectArguments","startRowIndex","maximumRows","parseUrl","query","pl","search","decode","decodeURIComponent","urlParams","exec","pareeUrlQuery","substr"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jueying\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"jueying\"] = factory(root[\"react\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Errors {\r\n    static placeHolderIdNull() {\r\n        let msg = `Place holder property id cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static fileNotExists(fileName) {\r\n        return new Error(`File '${fileName}' is not exists.`);\r\n    }\r\n    static argumentNull(argumentName) {\r\n        return new Error(`Argument ${argumentName} is null or empty.`);\r\n    }\r\n    static argumentRangeError(argumentName) {\r\n        return new Error(`Argument ${argumentName} range error.`);\r\n    }\r\n    static pageDataIsNull() {\r\n        return new Error(`Page data is null.`);\r\n    }\r\n    static toolbarRequiredKey() {\r\n        return new Error(`Toolbar has not a key prop.`);\r\n    }\r\n    static loadPluginFail(pluginId) {\r\n        return new Error(`Load plugin '${pluginId}' fail.`);\r\n    }\r\n    static idRequired() {\r\n        return new Error(`Property id is required.`);\r\n    }\r\n    static canntFindMasterPage(componentId) {\r\n        return new Error(`Can not find master page for component container ${componentId}.`);\r\n    }\r\n    static propCanntNull(componentName, property) {\r\n        let msg = `${componentName} property ${property} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static argumentFieldCanntNull(fieldName, argumentName) {\r\n        let msg = `${fieldName} of argument ${argumentName} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n}\r\nexports.Errors = Errors;\r\n//# sourceMappingURL=errors.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst errors_1 = require(\"./errors\");\r\nexports.componentTypes = {};\r\nfunction registerComponent(componentName, componentType) {\r\n    if (componentType == null && typeof componentName == 'function') {\r\n        componentType = componentName;\r\n        componentName = componentType.name;\r\n        componentType['componentName'] = componentName;\r\n    }\r\n    if (!componentName)\r\n        throw errors_1.errors.argumentNull('componentName');\r\n    if (!componentType)\r\n        throw errors_1.errors.argumentNull('componentType');\r\n    exports.componentTypes[componentName] = componentType;\r\n}\r\nexports.registerComponent = registerComponent;\r\n//# sourceMappingURL=register.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.constants = {\r\n    componentsDir: 'components',\r\n    connectorElementClassName: 'component-container',\r\n    componentTypeName: 'data-component-name',\r\n    componentData: 'component-data',\r\n    componentPosition: \"component-position\"\r\n};\r\nexports.proptDisplayNames = {};\r\nexports.groupDisplayNames = {};\r\nfunction guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\nexports.guid = guid;\r\nclass Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\nexports.Callback = Callback;\r\n//# sourceMappingURL=common.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst property_editor_1 = require(\"./property-editor\");\r\nconst maishu_jueying_core_1 = require(\"maishu-jueying-core\");\r\n// type CreateElementContext = { components: React.Component[], componentTypes: string[] };\r\n// let defaultGroup: GroupedEditor[\"group\"] = { prop: \"\", displayName: \"\" };\r\nclass Component {\r\n    static getPropEditors(componentData) {\r\n        let componentType = componentData.type;\r\n        let result = [];\r\n        let propEditorInfo = this.componentPropEditors[componentType] || [];\r\n        for (let i = 0; i < propEditorInfo.length; i++) {\r\n            let propName = propEditorInfo[i].propName;\r\n            let display = Component.componentPropEditorDisplay[`${componentType}.${propName}`];\r\n            if (display != null && display(componentData) == false)\r\n                continue;\r\n            result.push(propEditorInfo[i]);\r\n        }\r\n        return result;\r\n    }\r\n    static getPropEditor(controlClassName, propName) {\r\n        return this.getPropEditorByArray(controlClassName, propName);\r\n    }\r\n    /** 通过属性数组获取属性的编辑器 */\r\n    static getPropEditorByArray(controlClassName, propNames) {\r\n        let classEditors = this.componentPropEditors[controlClassName] || [];\r\n        let editor = classEditors.filter(o => o.propName == propNames)[0];\r\n        return editor;\r\n    }\r\n    static setPropEditor(options) {\r\n        let { componentType, editorType, display: editorDisplay, group, propName, displayName, defaultValue, validation, } = options;\r\n        group = group || property_editor_1.defaultGroupName;\r\n        propName = propName || \"\";\r\n        displayName = displayName || propName;\r\n        // 属性可能为导航属性,例如 style.width\r\n        let propNames = propName.split('.');\r\n        let className = typeof componentType == 'string' ? componentType : componentType.prototype.typename || componentType.name;\r\n        Component.componentPropEditorDisplay[`${className}.${propName}`] = editorDisplay;\r\n        let classProps = Component.componentPropEditors[className] = Component.componentPropEditors[className] || [];\r\n        for (let i = 0; i < classProps.length; i++) {\r\n            let propName1 = classProps[i].propName;\r\n            let propName2 = propNames.join('.');\r\n            if (propName1 == propName2) {\r\n                classProps[i].editorType = editorType;\r\n                return;\r\n            }\r\n        }\r\n        classProps.push({\r\n            propName, displayName, editorType: editorType,\r\n            group, defaultValue, validation\r\n        });\r\n    }\r\n    static register(typeName, componentType) {\r\n        return maishu_jueying_core_1.registerComponent(typeName, componentType);\r\n    }\r\n}\r\nexports.Component = Component;\r\n//==========================================\r\n// 用于创建 React 的 React.Fragment \r\nComponent.Fragment = \"\";\r\n//==========================================\r\nComponent.componentPropEditors = {};\r\nComponent.componentPropEditorDisplay = {};\r\n//# sourceMappingURL=component.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst component_1 = require(\"./component\");\r\nconst errors_1 = require(\"./errors\");\r\nconst page_designer_1 = require(\"./page-designer\");\r\nconst common_1 = require(\"./common\");\r\nconst maishu_dilu_1 = require(\"maishu-dilu\");\r\nexports.defaultGroupName = \"\";\r\nclass PropertyEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    getEditors(designer) {\r\n        if (designer == null) {\r\n            return [];\r\n        }\r\n        // 各个控件相同的编辑器\r\n        let commonPropEditorInfos = [];\r\n        let selectedComponents = designer.selectedComponents;\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let componentData = selectedComponents[i];\r\n            let propEditorInfos = component_1.Component.getPropEditors(componentData);\r\n            if (i == 0) {\r\n                commonPropEditorInfos = propEditorInfos || [];\r\n            }\r\n            else {\r\n                let items = [];\r\n                commonPropEditorInfos.forEach(propInfo1 => {\r\n                    propEditorInfos.forEach(propInfo2 => {\r\n                        let propName1 = propInfo1.propName; //propInfo1.propNames.join('.')\r\n                        let propName2 = propInfo2.propName; //propInfo2.propNames.join('.')\r\n                        if (propInfo1.editorType == propInfo2.editorType && propName1 == propName2) {\r\n                            items.push(propInfo1);\r\n                        }\r\n                    });\r\n                });\r\n                commonPropEditorInfos = items;\r\n            }\r\n        }\r\n        // 各个控件相同的属性值\r\n        let commonFlatProps = {};\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let control = selectedComponents[i];\r\n            let controlProps = Object.assign({}, control.props);\r\n            delete controlProps.children;\r\n            if (i == 0) {\r\n                commonFlatProps = controlProps;\r\n            }\r\n            else {\r\n                let obj = {};\r\n                for (let key in commonFlatProps) {\r\n                    if (commonFlatProps[key] == controlProps[key])\r\n                        obj[key] = controlProps[key];\r\n                }\r\n                commonFlatProps = obj;\r\n            }\r\n        }\r\n        let validateFields = commonPropEditorInfos.map(o => Object.assign(o.validation, { name: o.propName }));\r\n        this._validator = new maishu_dilu_1.FormValidator(this.element, ...validateFields);\r\n        let editors = [];\r\n        for (let i = 0; i < commonPropEditorInfos.length; i++) {\r\n            let propEditorInfo = commonPropEditorInfos[i];\r\n            let propName = propEditorInfo.propName;\r\n            ;\r\n            let editorType = propEditorInfo.editorType;\r\n            let value = this.propValue(propName, commonFlatProps);\r\n            if (value == null)\r\n                value = propEditorInfo.defaultValue;\r\n            let editorProps = {\r\n                value: value,\r\n                editComponents: selectedComponents,\r\n                updateComponentProp: (value) => {\r\n                    let componentProps = selectedComponents.map(o => ({\r\n                        componentId: o.id, propName: propEditorInfo.propName, value\r\n                    }));\r\n                    this._validator.checkElement(propEditorInfo.propName);\r\n                    designer.updateComponentProps(componentProps);\r\n                }\r\n            };\r\n            let editor = React.createElement(editorType, editorProps);\r\n            editors.push({ prop: propEditorInfo.propName, displayName: propEditorInfo.displayName, editor, group: propEditorInfo.group });\r\n        }\r\n        return editors;\r\n    }\r\n    propValue(propName, props) {\r\n        if (!propName)\r\n            throw errors_1.Errors.argumentNull(\"propName\");\r\n        if (!props)\r\n            throw errors_1.Errors.argumentNull(\"props\");\r\n        let navPropsNames = propName.split(\".\");\r\n        let obj = props;\r\n        for (let i = 0; i < navPropsNames.length; i++) {\r\n            obj = obj[navPropsNames[i]];\r\n            if (obj == null)\r\n                return null;\r\n        }\r\n        return obj;\r\n    }\r\n    render() {\r\n        return React.createElement(page_designer_1.DesignerContext.Consumer, null, args => {\r\n            let designer = args.designer;\r\n            if (designer == null)\r\n                return null;\r\n            let editors = this.getEditors(designer);\r\n            if (editors.length == 0) {\r\n                let empty = this.props.empty;\r\n                return React.createElement(\"div\", { className: \"text-center\" }, empty);\r\n            }\r\n            if (this.props.customRender) {\r\n                let items = editors.map(o => Object.assign({ displayName: o.displayName }, o));\r\n                let r = this.props.customRender(designer.selectedComponents, items);\r\n                if (r != null) {\r\n                    return r;\r\n                }\r\n            }\r\n            let groupEditorsArray = [];\r\n            for (let i = 0; i < editors.length; i++) {\r\n                let group = editors[i].group || exports.defaultGroupName;\r\n                let groupEditors = groupEditorsArray.filter(o => o.group == group)[0];\r\n                if (groupEditors == null) {\r\n                    groupEditors = { group: editors[i].group, editors: [] };\r\n                    groupEditorsArray.push(groupEditors);\r\n                }\r\n                groupEditors.editors.push({ prop: editors[i].prop, displayName: editors[i].displayName, editor: editors[i].editor });\r\n            }\r\n            return groupEditorsArray.map((g) => React.createElement(\"div\", { key: g.group, className: \"panel panel-default\" },\r\n                g.group ? React.createElement(\"div\", { className: \"panel-heading\" }, common_1.groupDisplayNames[g.group] || g.group) : null,\r\n                React.createElement(\"div\", { className: \"panel-body\" }, g.editors.map((o, i) => React.createElement(\"div\", { key: o.prop, className: \"form-group clearfix\" },\r\n                    React.createElement(\"label\", null, o.displayName),\r\n                    React.createElement(\"div\", { className: \"control\" },\r\n                        React.createElement(ErrorBoundary, null, o.editor)))))));\r\n        });\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n}\r\nexports.PropertyEditor = PropertyEditor;\r\nPropertyEditor.contextType = page_designer_1.DesignerContext;\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // Display fallback UI\r\n        this.setState({ error });\r\n        // You can also log the error to an error reporting service\r\n        //   logErrorToMyService(error, info);\r\n    }\r\n    render() {\r\n        let { error } = this.state || {};\r\n        if (error) {\r\n            return React.createElement(\"div\", { className: \"error\" },\r\n                React.createElement(\"div\", null, error.message),\r\n                React.createElement(\"div\", null, error.stack));\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\nexports.ErrorBoundary = ErrorBoundary;\r\n//# sourceMappingURL=property-editor.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst errors_1 = require(\"./errors\");\r\nconst maishu_toolkit_1 = require(\"maishu-toolkit\");\r\nexports.DesignerContext = React.createContext({ designer: null });\r\nclass PageDesigner extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.components = {};\r\n        let pageData = this.props.pageData;\r\n        this.initPageData(pageData);\r\n        this.state = { pageData };\r\n    }\r\n    setComponetRefProp(pageData) {\r\n        //=========================================================\r\n        // 记录当前 pageData 控件 ID\r\n        let componentIds = {};\r\n        //=========================================================\r\n        PageDesigner.travelComponentData(pageData).forEach(item => {\r\n            console.assert(item.props != null && item.id != null);\r\n            componentIds[item.type] = componentIds[item.type] || [];\r\n            componentIds[item.type].push(item.id);\r\n            let itemRef = item.props.ref;\r\n            item.props.ref = (e) => {\r\n                if (e != null) {\r\n                    this.components[item.type] = this.components[item.type] || {};\r\n                    this.components[item.type][item.id] = e;\r\n                }\r\n                if (typeof itemRef == \"function\")\r\n                    itemRef(e);\r\n            };\r\n        });\r\n    }\r\n    initPageData(pageData) {\r\n        if (pageData == null) {\r\n            return;\r\n        }\r\n        pageData.children = pageData.children || [];\r\n        this.fillComponent(pageData);\r\n        this.setComponetRefProp(pageData);\r\n    }\r\n    /**\r\n    * 对组件及其子控件进行命名\r\n    * @param component\r\n    */\r\n    fillComponent(component) {\r\n        let namedComponents = {};\r\n        if (!component.name) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (namedComponents[name]);\r\n            namedComponents[name] = component;\r\n            component.name = name;\r\n        }\r\n        if (!component.id)\r\n            component.id = maishu_toolkit_1.guid();\r\n        component.children = component.children || [];\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        component.children.forEach(child => {\r\n            if (typeof child == \"string\")\r\n                return true;\r\n            this.fillComponent(child);\r\n        });\r\n    }\r\n    allComponents() {\r\n        let r = [];\r\n        for (let key in this.components) {\r\n            let ids = Object.getOwnPropertyNames(this.components[key]);\r\n            r.push(...ids.map(id => this.components[key][id]));\r\n        }\r\n        return r;\r\n    }\r\n    /** 页面数据 */\r\n    get pageData() {\r\n        return this.state.pageData;\r\n    }\r\n    /** 获取已选择了的组件编号 */\r\n    get selectedComponentIds() {\r\n        return this.selectedComponents.map(o => o.id);\r\n    }\r\n    /** 获取已选择了的组件 */\r\n    get selectedComponents() {\r\n        let arr = new Array();\r\n        let stack = new Array();\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item.props != null && item.selected == true)\r\n                arr.push(item);\r\n            (item.children || []).forEach(child => {\r\n                if (typeof child == \"string\")\r\n                    return true;\r\n                stack.push(child);\r\n            });\r\n        }\r\n        return arr;\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    updateComponentProp(componentId, propName, value) {\r\n        return this.updateComponentProps([{ componentId, propName, value }]);\r\n    }\r\n    updateComponentProps(componentProps) {\r\n        let componentDatas = [];\r\n        for (let i = 0; i < componentProps.length; i++) {\r\n            let { componentId, propName, value } = componentProps[i];\r\n            let componentData = this.findComponentData(componentId);\r\n            if (componentData == null)\r\n                continue;\r\n            let navPropsNames = propName.split(\".\");\r\n            console.assert(componentData != null);\r\n            console.assert(navPropsNames != null, 'props is null');\r\n            componentData.props = componentData.props || {};\r\n            let obj = componentData.props;\r\n            for (let i = 0; i < navPropsNames.length - 1; i++) {\r\n                obj = obj[navPropsNames[i]] = obj[navPropsNames[i]] || {};\r\n            }\r\n            obj[navPropsNames[navPropsNames.length - 1]] = value;\r\n            componentDatas.push(componentData);\r\n        }\r\n        this.setState({ pageData: this.pageData });\r\n    }\r\n    /**\r\n     * 添加控件\r\n     * @param parentId 父控件编号\r\n     * @param componentData 控件数据\r\n     * @param componentIndex 新添加组件在子组件中的次序\r\n     */\r\n    appendComponent(parentId, componentData, componentIndex) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!componentData)\r\n            throw errors_1.Errors.argumentNull('childComponent');\r\n        this.initPageData(componentData);\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        parentControl.children = parentControl.children || [];\r\n        if (componentIndex != null) {\r\n            parentControl.children.splice(componentIndex, 0, componentData);\r\n        }\r\n        else {\r\n            parentControl.children.push(componentData);\r\n        }\r\n        this.selectComponents(componentData.id);\r\n    }\r\n    /**\r\n     * 选择指定的控件\r\n     * @param control 指定的控件\r\n     */\r\n    selectComponent(componentIds) {\r\n        this.selectComponents(componentIds);\r\n        //====================================================\r\n        // 设置焦点，以便获取键盘事件\r\n        if (this._element)\r\n            this._element.focus();\r\n        //====================================================\r\n    }\r\n    /**\r\n     * 选择指定的控件，一个或多个。已经选择的控件取消选择。\r\n     * @param control 指定的控件\r\n     */\r\n    selectComponents(componentIds) {\r\n        if (typeof componentIds == 'string')\r\n            componentIds = [componentIds];\r\n        let selectedComponentIds = this.selectedComponentIds;\r\n        if (this.isSame(componentIds, selectedComponentIds))\r\n            return;\r\n        var stack = [];\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            let isSelectedControl = componentIds.indexOf(item.id) >= 0;\r\n            item.selected = isSelectedControl;\r\n            (item.children || []).forEach(child => {\r\n                if (typeof child == \"string\")\r\n                    return true;\r\n                stack.push(child);\r\n            });\r\n        }\r\n        this.setState({ pageData: this.pageData });\r\n    }\r\n    /** 判断两个字符串数组是否相等 */\r\n    isSame(arr1, arr2) {\r\n        if (arr1.length != arr2.length)\r\n            return false;\r\n        for (let i = 0; i < arr1.length; i++) {\r\n            if (arr2.indexOf(arr1[i]) < 0)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    /** 移除控件 */\r\n    removeComponent(...componentIds) {\r\n        this.removeComponents(componentIds);\r\n    }\r\n    removeComponents(componentIds) {\r\n        let pageData = this.pageData;\r\n        if (!pageData || !pageData.children || pageData.children.length == 0)\r\n            return;\r\n        let children = pageData.children;\r\n        componentIds.forEach(controlId => {\r\n            this.removeComponentFrom(controlId, children);\r\n        });\r\n        this.setState({ pageData });\r\n    }\r\n    /**\r\n     * 移动控件到另外一个控件容器\r\n     * @param componentId 要移动的组件编号\r\n     * @param parentId 目标组件编号\r\n     * @param childComponentIndex 组件位置\r\n     */\r\n    moveComponent(componentId, parentId, childComponentIndex) {\r\n        let component = this.findComponentData(componentId);\r\n        if (component == null)\r\n            throw new Error(`Cannt find component by id ${componentId}`);\r\n        console.assert(component != null, `Cannt find component by id ${componentId}`);\r\n        let pageData = this.pageData;\r\n        console.assert(pageData.children != null);\r\n        let children = pageData.children;\r\n        this.removeComponentFrom(componentId, children);\r\n        this.appendComponent(parentId, component, childComponentIndex);\r\n    }\r\n    removeComponentFrom(controlId, collection) {\r\n        let controlIndex = null;\r\n        collection = collection || [];\r\n        for (let i = 0; i < collection.length; i++) {\r\n            let child = collection[i];\r\n            if (typeof child == \"string\")\r\n                continue;\r\n            if (controlId == child.id) {\r\n                controlIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (controlIndex == null) {\r\n            for (let i = 0; i < collection.length; i++) {\r\n                let o = collection[i];\r\n                if (typeof o == \"string\")\r\n                    continue;\r\n                let children = o.children || [];\r\n                children.forEach(child => {\r\n                    if (typeof child == \"string\")\r\n                        return true;\r\n                    let isRemoved = this.removeComponentFrom(controlId, children);\r\n                    if (isRemoved) {\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n        if (controlIndex == 0) {\r\n            collection.shift();\r\n        }\r\n        else if (controlIndex == collection.length - 1) {\r\n            collection.pop();\r\n        }\r\n        else {\r\n            collection.splice(controlIndex, 1);\r\n        }\r\n        return true;\r\n    }\r\n    static travelComponentData(pageData, filter) {\r\n        let stack = new Array();\r\n        stack.push(pageData);\r\n        let r = [];\r\n        filter = filter || (() => true);\r\n        while (stack.length > 0) {\r\n            let item = stack.shift();\r\n            if (filter(item)) {\r\n                r.push(item);\r\n            }\r\n            //===============================================\r\n            // 子元素有可能为字符串, 过滤出对象\r\n            let children = (item.children || []).filter(o => typeof o == 'object');\r\n            //===============================================\r\n            stack.push(...children);\r\n        }\r\n        return r;\r\n    }\r\n    /**\r\n     * 通过组件编号获取组件的数据\r\n     * @param componentId 组件编号\r\n     */\r\n    findComponentData(componentId) {\r\n        let pageData = this.state.pageData;\r\n        if (!pageData)\r\n            throw errors_1.Errors.pageDataIsNull();\r\n        let componentDatas = PageDesigner.travelComponentData(pageData, (item) => item.id == componentId);\r\n        return componentDatas[0];\r\n    }\r\n    onKeyDown(e) {\r\n        const DELETE_KEY_CODE = 46;\r\n        if (e.keyCode == DELETE_KEY_CODE) {\r\n            if (this.selectedComponents.length == 0)\r\n                return;\r\n            this.removeComponents(this.selectedComponentIds);\r\n        }\r\n    }\r\n    /**\r\n     * 通过组件名称获取组件实例\r\n     * @param typeName 组件名称\r\n     */\r\n    findComponetsByTypeName(typeName) {\r\n        this.components[typeName];\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { tabIndex: 0, ref: e => this._element = this._element || e, onKeyDown: e => this.onKeyDown(e), className: this.props.className, style: this.props.style },\r\n            React.createElement(exports.DesignerContext.Provider, { value: { designer: this } }, this.props.children));\r\n    }\r\n}\r\nexports.PageDesigner = PageDesigner;\r\n//# sourceMappingURL=page-designer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar decorators_1 = require(\"./decorators\");\r\nexports.component = decorators_1.component;\r\nvar parse_component_data_1 = require(\"./parse-component-data\");\r\nexports.parseComponentData = parse_component_data_1.parseComponentData;\r\nvar register_1 = require(\"./register\");\r\nexports.registerComponent = register_1.registerComponent;\r\nexports.componentTypes = register_1.componentTypes;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.errors = {\r\n    pathFieldRequired(name) {\r\n        let msg = `Path field of '${name}' component config can not be null or empty.`;\r\n        return new Error(msg);\r\n    },\r\n    canntFindModule(name, path) {\r\n        let msg = `Can not find component '${name}' in the module, module path is: '${path}'.`;\r\n        return new Error(msg);\r\n    },\r\n    componentTypeNotExists(name) {\r\n        let msg = `Component '${name}' not exists.`;\r\n        return new Error(msg);\r\n    },\r\n    argumentNull(name) {\r\n        let msg = `Argument '${name}' can not be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n};\r\n//# sourceMappingURL=errors.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst errors_1 = require(\"./errors\");\r\nexports.classNames = {\r\n    componentSelected: `component-selected`,\r\n    emptyTemplates: `empty-templates`,\r\n    loadingTemplates: `loading-templates`,\r\n    templateSelected: `template-selected`,\r\n    templateDialog: `template-dialog`,\r\n    emptyDocument: `empty-document`,\r\n    component: 'component',\r\n    componentWrapper: 'component-wrapper',\r\n    componentPanel: 'component-panel',\r\n    componentIcon: 'component-icon',\r\n    placeholder: 'placeholder',\r\n    editorPanel: 'editor-panel',\r\n    designer: 'designer',\r\n    moveDown: 'move-down',\r\n};\r\nlet templateDialog = {\r\n    nameHeight: 40,\r\n    fontSize: 22\r\n};\r\nlet element = document.createElement('style');\r\nelement.type = 'text/css';\r\nelement.setAttribute(\"data-name\", \"jueying\");\r\nelement.innerHTML = `\r\n            .${exports.classNames.componentSelected} {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${exports.classNames.componentSelected} > :first-child {\r\n                border-color: blue;\r\n              }\r\n              .${exports.classNames.componentSelected} .resize_handle {\r\n                position: absolute;\r\n                height: 6px;\r\n                width: 6px;\r\n                border: 1px solid #89B;\r\n                background: #9AC;\r\n              }\r\n              .${exports.classNames.componentSelected} .move_handle {\r\n                height: 12px;\r\n                width: 12px;\r\n                top: 6px;\r\n                left: 8px;\r\n                border: solid 1px black;\r\n                position: relative;\r\n                margin-top: -12px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NW,\r\n              .${exports.classNames.componentSelected} .NN,\r\n              .${exports.classNames.componentSelected} .NE {\r\n                top: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NE,\r\n              .${exports.classNames.componentSelected} .EE,\r\n              .${exports.classNames.componentSelected} .SE {\r\n                right: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .SW,\r\n              .${exports.classNames.componentSelected}.SS,\r\n              .${exports.classNames.componentSelected} .SE {\r\n                bottom: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NW,\r\n              .${exports.classNames.componentSelected} .WW,\r\n              .${exports.classNames.componentSelected} .SW {\r\n                left: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .SE,\r\n              .${exports.classNames.componentSelected} .NW {\r\n                cursor: nw-resize;\r\n              }\r\n              .${exports.classNames.componentSelected} .SW,\r\n              .${exports.classNames.componentSelected} .NE {\r\n                cursor: ne-resize;\r\n              }\r\n              .${exports.classNames.componentSelected} .NN,\r\n              .${exports.classNames.componentSelected} .SS {\r\n                cursor: n-resize;\r\n                left: 50%;\r\n                margin-left: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .EE,\r\n              .${exports.classNames.componentSelected} .WW {\r\n                cursor: e-resize;\r\n                top: 50%;\r\n                margin-top: -4px;\r\n              }\r\n            .${exports.classNames.emptyTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.loadingTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.templateSelected} .page-view {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${exports.classNames.templateDialog} .name {\r\n                margin-top: -${templateDialog.nameHeight}px;\r\n                height: ${templateDialog.nameHeight}px;\r\n                font-size: ${templateDialog.fontSize}px;\r\n                text-align: center;\r\n                padding-top: 6px;\r\n                background-color: black;\r\n                opacity: 0.5;\r\n            }\r\n            .${exports.classNames.templateDialog} .name span {\r\n                color: white;\r\n            }\r\n            .${exports.classNames.emptyDocument} {\r\n                text-align: center;\r\n                padding: 100px 0;\r\n            }\r\n            .${exports.classNames.component} > .NW,\r\n            .${exports.classNames.component} > .NN,\r\n            .${exports.classNames.component} > .NE,\r\n            .${exports.classNames.component} > .EE,\r\n            .${exports.classNames.component} > .SE,\r\n            .${exports.classNames.component} > .SW,\r\n            .${exports.classNames.component} > .SS,\r\n            .${exports.classNames.component} > .WW {\r\n                display: none;\r\n            }\r\n            .${exports.classNames.componentSelected}.component > .NW,\r\n            .${exports.classNames.componentSelected}.component > .NN,\r\n            .${exports.classNames.componentSelected}.component > .NE,\r\n            .${exports.classNames.componentSelected}.component > .EE,\r\n            .${exports.classNames.componentSelected}.component > .SE,\r\n            .${exports.classNames.componentSelected}.component > .SW,\r\n            .${exports.classNames.componentSelected}.component > .SS,\r\n            .${exports.classNames.componentSelected}.component > .WW {\r\n                display: block;\r\n            }\r\n            .${exports.classNames.placeholder} {\r\n                min-height: 40px;\r\n                width: 100%;\r\n            }\r\n            .${exports.classNames.placeholder}.active,\r\n            .${exports.classNames.componentWrapper}.active,\r\n            .${exports.classNames.componentWrapper}.${exports.classNames.componentSelected}.active {\r\n                border: 1px solid green;\r\n            }\r\n            .${exports.classNames.editorPanel} {\r\n                width: 300px;\r\n                background: white;\r\n                color: black;\r\n                margin: 0;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                overflow: auto;\r\n            }\r\n            .${exports.classNames.editorPanel} label {\r\n                width: 80px;\r\n                float: left;\r\n                padding: 4px;\r\n                text-overflow: ellipsis;\r\n                overflow: hidden;\r\n            }\r\n            .${exports.classNames.editorPanel} .control {\r\n                padding-left: 90px;\r\n            }\r\n            .${exports.classNames.editorPanel} .empty {\r\n                padding-top: 200px;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.designer} .error,\r\n            .${exports.classNames.editorPanel} .error {\r\n                color: red;\r\n            }\r\n            .${exports.classNames.componentPanel} {\r\n                background: white;\r\n                color: black;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                list-style: none;\r\n                padding: 0;\r\n                text-align: center\r\n            }\r\n            .${exports.classNames.componentPanel} .panel-heading {\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.componentPanel} li {\r\n                text-align: center;\r\n                padding: 8px;\r\n            }\r\n            .${exports.classNames.componentWrapper}.${exports.classNames.moveDown} {\r\n         \r\n            }\r\n        `;\r\nif (document.head != null) {\r\n    document.head.appendChild(element);\r\n}\r\nfunction appendClassName(element, addonClassName) {\r\n    if (element == null)\r\n        throw errors_1.Errors.argumentNull('element');\r\n    if (!addonClassName)\r\n        throw errors_1.Errors.argumentNull('addonClassName');\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className;\r\n    sourceClassName = sourceClassName || '';\r\n    console.assert(addonClassName != null);\r\n    if (sourceClassName.indexOf(addonClassName) >= 0)\r\n        return sourceClassName;\r\n    let className = `${sourceClassName} ${addonClassName}`;\r\n    if (typeof element != 'string')\r\n        element.className = className;\r\n    return className;\r\n}\r\nexports.appendClassName = appendClassName;\r\nfunction removeClassName(element, targetClassName) {\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className || '';\r\n    if (sourceClassName.indexOf(targetClassName) < 0)\r\n        return sourceClassName;\r\n    sourceClassName = sourceClassName || '';\r\n    sourceClassName = sourceClassName.replace(new RegExp(targetClassName, 'g'), '');\r\n    sourceClassName = sourceClassName.trim();\r\n    if (typeof element != 'string')\r\n        element.className = sourceClassName;\r\n    return sourceClassName;\r\n}\r\nexports.removeClassName = removeClassName;\r\n//# sourceMappingURL=style.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar common_1 = require(\"./common\");\r\nexports.groupDisplayNames = common_1.groupDisplayNames;\r\nvar component_1 = require(\"./component\");\r\nexports.Component = component_1.Component;\r\nvar editor_panel_1 = require(\"./editor-panel\");\r\nexports.EditorPanel = editor_panel_1.EditorPanel;\r\nvar page_designer_1 = require(\"./page-designer\");\r\nexports.PageDesigner = page_designer_1.PageDesigner;\r\nexports.DesignerContext = page_designer_1.DesignerContext;\r\nvar prop_editor_1 = require(\"./prop-editor\");\r\nexports.PropEditor = prop_editor_1.PropEditor;\r\nexports.TextInput = prop_editor_1.TextInput;\r\nvar style_1 = require(\"./style\");\r\nexports.classNames = style_1.classNames;\r\nvar maishu_jueying_core_1 = require(\"maishu-jueying-core\");\r\nexports.component = maishu_jueying_core_1.component;\r\nexports.parseComponentData = maishu_jueying_core_1.parseComponentData;\r\nexports.registerComponent = maishu_jueying_core_1.registerComponent;\r\nexports.componentTypes = maishu_jueying_core_1.componentTypes;\r\n//# sourceMappingURL=index.js.map","/*!\r\n * \r\n *  maishu-dilu v1.7.1\r\n *  https://github.com/ansiboy/dilu\r\n *  \r\n *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>\r\n *  Licensed under the MIT License.\r\n * \r\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dilu\"] = factory();\n\telse\n\t\troot[\"dilu\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./out/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./out/errors.js\":\n/*!***********************!*\\\n  !*** ./out/errors.js ***!\n  \\***********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// namespace dilu {\r\nexports.errors = {\r\n    argumentNull(parameterName) {\r\n        let msg = `Parameter ${parameterName} can not be null or empty.`;\r\n        return new Error(msg);\r\n    },\r\n    elementValidateRuleNotSet(element) {\r\n        let msg = `元素'${element.name}'没有设置验证规则`;\r\n        return new Error(msg);\r\n    },\r\n    fieldElementCanntNull(fieldIndex) {\r\n        // if (fieldIndex != null)\r\n        let msg = fieldIndex != null ?\r\n            `The element value in the field cannt be null, field index is ${fieldIndex}.` :\r\n            `The element in the field is null`;\r\n        return new Error(msg);\r\n    },\r\n    elementNotExists(name) {\r\n        let msg = `Element ${name} is not exits in the form.`;\r\n        return new Error(msg);\r\n    },\r\n    fieldResultExpectBooleanType(name) {\r\n        let msg = `Result of ${name} field is expected boolean.`;\r\n        return new Error(msg);\r\n    }\r\n};\r\n// }\r\n\n\n/***/ }),\n\n/***/ \"./out/formValidator.js\":\n/*!******************************!*\\\n  !*** ./out/formValidator.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst errors_1 = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\r\n/**\r\n * 表单验证器，用于对表单中的字段进行验证\r\n */\r\nclass FormValidator {\r\n    constructor(form, ...fields) {\r\n        /** 输入框的值发生改变，是否重新校验该输入框的值，默认为 true */\r\n        this.validateOnChanged = true;\r\n        if (!form)\r\n            throw errors_1.errors.argumentNull('form');\r\n        this.fields = fields || [];\r\n        this.form = form;\r\n        this.elementEvents = {};\r\n    }\r\n    appendField(field) {\r\n        this.fields.push(field);\r\n    }\r\n    /**\r\n     * 清除表单的错误信息\r\n     */\r\n    clearErrors() {\r\n        this.fields.map(o => o.errorElement)\r\n            .filter(o => o != null)\r\n            .forEach(o => o.style.display = 'none');\r\n    }\r\n    /**\r\n     * 清除表单的指定元素错误信息\r\n     * @param name 指定的元素名称\r\n     */\r\n    clearElementError(name) {\r\n        if (!name)\r\n            throw errors_1.errors.argumentNull('name');\r\n        let fields = this.fields.filter(o => o.name == name);\r\n        for (let field of fields) {\r\n            let errorElement = this.fieldErrorElement(field);\r\n            errorElement.style.display = 'none';\r\n        }\r\n    }\r\n    /**\r\n     * 设置表单的指定元素错误信息\r\n     * @param name 指定的元素名称\r\n     * @param error 错误信息\r\n     */\r\n    setElementError(name, error) {\r\n        if (!name)\r\n            throw errors_1.errors.argumentNull('name');\r\n        if (!error)\r\n            throw errors_1.errors.argumentNull('error');\r\n        let fields = this.fields.filter(o => o.name == name);\r\n        for (let field of fields) {\r\n            let errorElement = this.fieldErrorElement(field);\r\n            errorElement.style.removeProperty('display');\r\n            errorElement.innerHTML = error;\r\n        }\r\n    }\r\n    fieldElement(field) {\r\n        let name = field.name;\r\n        let element = this.form.querySelectorAll(`[name='${name}']`)[0];\r\n        if (element == null)\r\n            throw errors_1.errors.elementNotExists(name);\r\n        return element;\r\n    }\r\n    fieldErrorElement(field) {\r\n        if (!field.errorElement) {\r\n            let errorElement = this.form.getElementsByClassName(`${FormValidator.errorClassName} ${field.name}`)[0];\r\n            if (!errorElement) {\r\n                let element = this.fieldElement(field);\r\n                errorElement = document.createElement(\"span\");\r\n                errorElement.className = FormValidator.errorClassName;\r\n                errorElement.style.display = 'none';\r\n                if (element.nextSibling)\r\n                    element.parentElement.insertBefore(errorElement, element.nextSibling);\r\n                else\r\n                    element.parentElement.appendChild(errorElement);\r\n            }\r\n            field.errorElement = errorElement;\r\n        }\r\n        return field.errorElement;\r\n        // return errorElement;\r\n    }\r\n    /**\r\n     * 验证字段\r\n     */\r\n    check() {\r\n        let ps = new Array();\r\n        for (let i = 0; i < this.fields.length; i++) {\r\n            let field = this.fields[i];\r\n            let element = this.fieldElement(field);\r\n            if (field.condition && field.condition(element) == false)\r\n                continue;\r\n            let p = this.checkField(field);\r\n            ps.push(p);\r\n        }\r\n        let result = ps.filter(o => o == false).length == 0;\r\n        return result;\r\n    }\r\n    /**\r\n     * 异步验证字段\r\n     */\r\n    checkAsync() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let ps = new Array();\r\n            for (let i = 0; i < this.fields.length; i++) {\r\n                let field = this.fields[i];\r\n                let element = this.fieldElement(field);\r\n                if (field.condition && field.condition(element) == false)\r\n                    continue;\r\n                let p = this.checkFieldAsync(field);\r\n                ps.push(p);\r\n            }\r\n            let checkResults = yield Promise.all(ps);\r\n            let result = checkResults.filter(o => o == false).length == 0;\r\n            return result;\r\n        });\r\n    }\r\n    bindElementEvent(field, isAsync) {\r\n        if (this.elementEvents[field.name]) {\r\n            return;\r\n        }\r\n        let element = this.fieldElement(field);\r\n        let validateFunc = (() => {\r\n            let checking = false;\r\n            return () => {\r\n                if (checking)\r\n                    return;\r\n                checking = true;\r\n                // isAsync ? this.checkFieldAsync(field) : this.checkField(field);\r\n                if (isAsync) {\r\n                    this.checkFieldAsync(field)\r\n                        .then(() => checking = false)\r\n                        .catch(() => checking = false);\r\n                }\r\n                else {\r\n                    this.checkField(field);\r\n                    checking = false;\r\n                }\r\n            };\r\n        })();\r\n        if (this.validateOnChanged) {\r\n            element.addEventListener('change', validateFunc);\r\n            let elementType = element.type || \"text\";\r\n            if (elementType == \"text\" || elementType == \"password\") {\r\n                element.addEventListener('keyup', validateFunc);\r\n            }\r\n            else if (elementType == \"radio\") {\r\n                let name = element.name;\r\n                let elements = this.form.querySelectorAll(`[name='${name}']`);\r\n                for (let i = 0; i < elements.length; i++) {\r\n                    if (elements[i] == element) {\r\n                        continue;\r\n                    }\r\n                    elements[i].addEventListener(\"change\", validateFunc);\r\n                }\r\n            }\r\n        }\r\n        this.elementEvents[field.name] = true;\r\n    }\r\n    checkField(field) {\r\n        this.bindElementEvent(field, false);\r\n        let element = this.fieldElement(field);\r\n        let depends = field.depends || [];\r\n        for (let j = 0; j < depends.length; j++) {\r\n            let dependResult = depends[j](element);\r\n            if (typeof dependResult == 'object') {\r\n                throw new Error('Please use checkAsync method.');\r\n            }\r\n            let dependIsOK = dependResult;\r\n            if (!dependIsOK)\r\n                return false;\r\n        }\r\n        for (let j = 0; j < field.rules.length; j++) {\r\n            let rule = field.rules[j];\r\n            let element = this.fieldElement(field);\r\n            if (element == null)\r\n                throw errors_1.errors.fieldElementCanntNull();\r\n            let value = this.elementValue(element);\r\n            let isPass = rule.validate(value);\r\n            if (typeof isPass == 'object') {\r\n                throw new Error('Please use checkAsync method.');\r\n            }\r\n            this.showElement(!isPass, field, rule, element);\r\n            if (!isPass)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    checkFieldAsync(field) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.bindElementEvent(field, true);\r\n            let element = this.fieldElement(field);\r\n            let depends = field.depends || [];\r\n            for (let j = 0; j < depends.length; j++) {\r\n                let dependResult = depends[j](element);\r\n                if (typeof dependResult == 'boolean') {\r\n                    dependResult = Promise.resolve(dependResult);\r\n                }\r\n                let dependIsOK = yield dependResult;\r\n                if (!dependIsOK)\r\n                    return false;\r\n            }\r\n            for (let j = 0; j < field.rules.length; j++) {\r\n                let rule = field.rules[j];\r\n                let element = this.fieldElement(field);\r\n                if (element == null)\r\n                    throw errors_1.errors.fieldElementCanntNull();\r\n                let value = this.elementValue(element);\r\n                let p = rule.validate(value);\r\n                if (typeof p == 'boolean') {\r\n                    p = Promise.resolve(p);\r\n                }\r\n                let isPass = yield p;\r\n                this.showElement(!isPass, field, rule, element);\r\n                if (!isPass)\r\n                    return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    showElement(display, field, rule, element) {\r\n        let errorElement = this.fieldErrorElement(field);\r\n        console.assert(errorElement != null, 'errorElement cannt be null.');\r\n        if (rule.error != null) {\r\n            errorElement = field.errorElement;\r\n            let name = this.elementName(element);\r\n            let errorText = typeof rule.error == 'string' ? rule.error : rule.error() || '';\r\n            errorElement.innerHTML = errorText.replace('%s', name);\r\n        }\r\n        if (display) {\r\n            errorElement.style.removeProperty('display');\r\n        }\r\n        else {\r\n            errorElement.style.display = 'none';\r\n        }\r\n    }\r\n    /**\r\n     * 异步验证 HTML 元素\r\n     * @param name HTML 元素名称\r\n     */\r\n    checkElementAsync(name) {\r\n        let field = this.fields.filter(o => o.name == name)[0];\r\n        if (!field)\r\n            throw errors_1.errors.elementNotExists(name);\r\n        return this.checkFieldAsync(field);\r\n    }\r\n    /**\r\n     * 同步验证 HTML 元素\r\n     * @param name HTML 元素名称\r\n     */\r\n    checkElement(name) {\r\n        let field = this.fields.filter(o => o.name == name)[0];\r\n        if (!field)\r\n            throw errors_1.errors.elementNotExists(name);\r\n        return this.checkField(field);\r\n    }\r\n    elementValue(element) {\r\n        if (element.tagName == \"TEXTAREA\") {\r\n            return element.value;\r\n        }\r\n        let inputElement = element;\r\n        if (inputElement.type == \"radio\") {\r\n            let elements = this.form.querySelectorAll(`[name='${inputElement.name}']`);\r\n            for (let i = 0; i < elements.length; i++) {\r\n                if (elements[i].checked) {\r\n                    return elements[i].value;\r\n                }\r\n            }\r\n            return \"\";\r\n        }\r\n        return element.value;\r\n    }\r\n    elementName(element) {\r\n        if (element.tagName == \"TEXTAREA\") {\r\n            return element.name;\r\n        }\r\n        return element.name;\r\n    }\r\n}\r\nexports.FormValidator = FormValidator;\r\nFormValidator.errorClassName = 'validationMessage';\r\n// }\r\n\n\n/***/ }),\n\n/***/ \"./out/index.js\":\n/*!**********************!*\\\n  !*** ./out/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar formValidator_1 = __webpack_require__(/*! ./formValidator */ \"./out/formValidator.js\");\r\nexports.FormValidator = formValidator_1.FormValidator;\r\nvar rules_1 = __webpack_require__(/*! ./rules */ \"./out/rules.js\");\r\nexports.rules = rules_1.rules;\r\n\n\n/***/ }),\n\n/***/ \"./out/rules.js\":\n/*!**********************!*\\\n  !*** ./out/rules.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// namespace dilu {\r\nvar ruleRegex = /^(.+?)\\[(.+)\\]$/, numericRegex = /^[0-9]+$/, integerRegex = /^\\-?[0-9]+$/, decimalRegex = /^\\-?[0-9]*\\.?[0-9]+$/, emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/, alphaRegex = /^[a-z]+$/i, alphaNumericRegex = /^[a-z0-9]+$/i, alphaDashRegex = /^[a-z0-9_\\-]+$/i, naturalRegex = /^[0-9]+$/i, naturalNoZeroRegex = /^[1-9][0-9]*$/i, ipRegex = /^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i, base64Regex = /[^a-zA-Z0-9\\/\\+=]/i, numericDashRegex = /^[\\d\\-\\s]+$/, urlRegex = /^((http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)|)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/, mobileRegex = /^1[34578]\\d{9}$/, dateRegex = /\\d{4}-\\d{1,2}-\\d{1,2}/;\r\nlet msgs = {\r\n    required: '%s不能为空',\r\n    matches: '%s与%s不匹配',\r\n    \"default\": 'The %s field is still set to default, please change.',\r\n    equal: '%s和%s必须相同',\r\n    email: '不是有效的邮箱地址',\r\n    valid_emails: 'The %s field must contain all valid email addresses.',\r\n    minLength: '%s至少包含%s个字符',\r\n    maxLength: '%s不能超过%s字符',\r\n    exact_length: 'The %s field must be exactly %s characters in length.',\r\n    greater_than: 'The %s field must contain a number greater than %s.',\r\n    less_than: 'The %s field must contain a number less than %s.',\r\n    alpha: 'The %s field must only contain alphabetical characters.',\r\n    alpha_numeric: 'The %s field must only contain alpha-numeric characters.',\r\n    alpha_dash: 'The %s field must only contain alpha-numeric characters, underscores, and dashes.',\r\n    numeric: '请数入数字',\r\n    integer: 'The %s field must contain an integer.',\r\n    decimal: 'The %s field must contain a decimal number.',\r\n    is_natural: 'The %s field must contain only positive numbers.',\r\n    is_natural_no_zero: 'The %s field must contain a number greater than zero.',\r\n    ip: 'The %s field must contain a valid IP.',\r\n    valid_base64: 'The %s field must contain a base64 string.',\r\n    valid_credit_card: 'The %s field must contain a valid credit card number.',\r\n    is_file_type: 'The %s field must contain only %s files.',\r\n    valid_url: 'The %s field must contain a valid URL.',\r\n    greater_than_date: 'The %s field must contain a more recent date than %s.',\r\n    less_than_date: 'The %s field must contain an older date than %s.',\r\n    greater_than_or_equal_date: 'The %s field must contain a date that\\'s at least as recent as %s.',\r\n    less_than_or_equal_date: 'The %s field must contain a date that\\'s %s or older.',\r\n    mobile: '请输入正确的手机号码',\r\n    custom: '请输入正确制',\r\n};\r\nfunction createValidation(validate, error) {\r\n    return {\r\n        validate: validate,\r\n        error: error\r\n    };\r\n}\r\nfunction calc(value) {\r\n    if (typeof value == 'function') {\r\n        return value();\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * 表单验证规则\r\n */\r\nexports.rules = {\r\n    /**\r\n     * 验证必填字段\r\n     * @param error 错误提示文字\r\n     */\r\n    required(error) {\r\n        let validate = (value) => value != '';\r\n        return createValidation(validate, error || msgs.required);\r\n    },\r\n    /**\r\n     * 验证两个字段值是否相等\r\n     * @param otherElement 另外一个字段\r\n     * @param error 错误提示文字\r\n     */\r\n    matches(otherElement, error) {\r\n        var validate = (value) => value == otherElement.value;\r\n        return createValidation(validate, error || msgs.required);\r\n    },\r\n    /**\r\n     * 验证邮箱\r\n     * @param error 错误提示文字\r\n     */\r\n    email(error) {\r\n        var validate = (value) => emailRegex.test(value);\r\n        return createValidation(validate, error || msgs.required);\r\n    },\r\n    /**\r\n     * 验证字段最小长度\r\n     * @param length 最小长度\r\n     * @param error 错误提示文字\r\n     */\r\n    minLength(length, error) {\r\n        var validate = (value) => (value || '').length >= calc(length);\r\n        return createValidation(validate, error || msgs.minLength);\r\n    },\r\n    /**\r\n     * 验证字段的最大长度\r\n     * @param length 最大长度\r\n     * @param error 错误提示文字\r\n     */\r\n    maxLength(length, error) {\r\n        var validate = (value) => (value || '').length <= calc(length);\r\n        return createValidation(validate, error || msgs.matches);\r\n    },\r\n    /**\r\n     * 验证字段大于指定的值\r\n     * @param value 指定的值\r\n     * @param error 错误提示文字\r\n     */\r\n    greaterThan(value, error) {\r\n        var validate = (o) => elementValueCompare(o, calc(value)) == 'greaterThan';\r\n        return createValidation(validate, error || msgs.greater_than);\r\n    },\r\n    /**\r\n     * 验证字段小于指定的值\r\n     * @param value 指定的值\r\n     * @param error 错误提示文字\r\n     */\r\n    lessThan(value, error) {\r\n        var validate = (o) => elementValueCompare(o, calc(value)) == 'lessThan';\r\n        return createValidation(validate, error || msgs.less_than);\r\n    },\r\n    /**\r\n     * 验证字段等于指定的值\r\n     * @param value 指定的值\r\n     * @param error 错误提示文字\r\n     */\r\n    equal(value, error) {\r\n        var validate = (o) => elementValueCompare(o, calc(value)) == 'equal';\r\n        return createValidation(validate, error || msgs.equal);\r\n    },\r\n    /**\r\n     * 验证字段为 IP\r\n     * @param error 错误提示文字\r\n     */\r\n    ip(error) {\r\n        var validate = (value) => ipRegex.test(value);\r\n        return createValidation(validate, error || msgs.ip);\r\n    },\r\n    /**\r\n     * 验证字段为 URL\r\n     * @param error 错误提示文字\r\n     */\r\n    url(error) {\r\n        var validate = (value) => urlRegex.test(value);\r\n        return createValidation(validate, error || msgs.valid_url);\r\n    },\r\n    /**\r\n     * 验证字段为手机号码\r\n     * @param error 错误提示文字\r\n     */\r\n    mobile(error) {\r\n        var validate = (value) => mobileRegex.test(value);\r\n        return createValidation(validate, error || msgs.mobile);\r\n    },\r\n    /**\r\n     * 验证字段为数字\r\n     * @param error 错误提示文字\r\n     */\r\n    numeric(error) {\r\n        var validate = (value) => numericRegex.test(value);\r\n        return createValidation(validate, error || msgs.numeric);\r\n    },\r\n    /**\r\n     * 自定义验证\r\n     * @param validate 自定义验证的方法\r\n     * @param error 错误提示文字\r\n     */\r\n    custom(validate, error) {\r\n        return createValidation(validate, error || msgs.custom);\r\n    }\r\n};\r\nfunction elementValueCompare(value, otherValue) {\r\n    let elementValue;\r\n    if (typeof otherValue == 'number') {\r\n        elementValue = decimalRegex.test(value) ? parseFloat(value) : null;\r\n    }\r\n    else if (typeof otherValue == 'string') {\r\n        elementValue = value;\r\n    }\r\n    else {\r\n        elementValue = getValidDate(value);\r\n    }\r\n    if (elementValue < otherValue)\r\n        return 'lessThan';\r\n    else if (elementValue > otherValue)\r\n        return 'greaterThan';\r\n    else\r\n        return 'equal';\r\n}\r\n/**\r\n * private function _getValidDate: helper function to convert a string date to a Date object\r\n * @param date (String) must be in format yyyy-mm-dd or use keyword: today\r\n * @returns {Date} returns false if invalid\r\n */\r\nfunction getValidDate(date) {\r\n    if (!date.match('today') && !date.match(dateRegex)) {\r\n        return null;\r\n    }\r\n    var validDate = new Date(), validDateArray;\r\n    if (!date.match('today')) {\r\n        validDateArray = date.split('-');\r\n        validDate.setFullYear(validDateArray[0]);\r\n        validDate.setMonth(validDateArray[1] - 1);\r\n        validDate.setDate(validDateArray[2]);\r\n    }\r\n    return validDate;\r\n}\r\n;\r\n// }\r\n\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst register_1 = require(\"./register\");\r\n/** 组件标记，用于将指定的组件标记为可被外部加载 */\r\nfunction component(options) {\r\n    return function classDecorator(constructor) {\r\n        let type = (options === null || options === void 0 ? void 0 : options.type) || constructor.name;\r\n        register_1.registerComponent(type, constructor);\r\n    };\r\n}\r\nexports.component = component;\r\n//# sourceMappingURL=decorators.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst register_1 = require(\"./register\");\r\nconst errors_1 = require(\"./errors\");\r\nfunction parseComponentData(componentData) {\r\n    let type = register_1.componentTypes[componentData.type];\r\n    if (type == null) {\r\n        throw errors_1.errors.componentTypeNotExists(componentData.type);\r\n    }\r\n    let children = [];\r\n    if (componentData.children != null) {\r\n        children = componentData.children.map(c => typeof c == \"string\" ? c : parseComponentData(c));\r\n    }\r\n    return React.createElement(type, componentData.props, ...children);\r\n}\r\nexports.parseComponentData = parseComponentData;\r\n//# sourceMappingURL=parse-component-data.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst property_editor_1 = require(\"./property-editor\");\r\nconst style_1 = require(\"./style\");\r\nclass EditorPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componentDatas: [] };\r\n    }\r\n    /** 对输入进行验证 */\r\n    validateInputs() {\r\n        return this.editor.validator.checkAsync();\r\n    }\r\n    render() {\r\n        let { empty } = this.props;\r\n        empty = empty || React.createElement(\"div\", { className: \"empty\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7684\\u5C5E\\u6027\");\r\n        return React.createElement(\"div\", { className: `${style_1.classNames.editorPanel} ${this.props.className || \"\"}`, ref: (e) => this.element = e || this.element },\r\n            React.createElement(property_editor_1.PropertyEditor, { ref: e => this.editor = e || this.editor, empty: empty, customRender: this.props.customRender }));\r\n    }\r\n}\r\nexports.EditorPanel = EditorPanel;\r\n//# sourceMappingURL=editor-panel.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nclass PropEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    static dropdown(items, valueType) {\r\n        return dropdown(items, valueType);\r\n    }\r\n    static textInput() {\r\n        return TextInput;\r\n    }\r\n}\r\nexports.PropEditor = PropEditor;\r\nclass TextInput extends PropEditor {\r\n    render() {\r\n        let { value } = this.props;\r\n        return React.createElement(\"input\", { className: 'form-control', value: value || '', onChange: e => {\r\n                // this.setState({ value: e.target.value })\r\n                this.props.updateComponentProp(e.target.value);\r\n            } });\r\n    }\r\n}\r\nexports.TextInput = TextInput;\r\nfunction dropdown(items, valueType) {\r\n    let itemsPromise;\r\n    let textValues = [];\r\n    if (valueType == null && Array.isArray(items)) {\r\n        valueType = items.length > 0 && typeof items[0] == \"number\" ? \"number\" : \"string\";\r\n        for (let i = 0; i < items.length; i++) {\r\n            textValues[i] = { text: items[i], value: items[i] };\r\n        }\r\n    }\r\n    else if (valueType == null) {\r\n        valueType = \"string\";\r\n        let propNames = Object.getOwnPropertyNames(items);\r\n        for (let i = 0; i < propNames.length; i++) {\r\n            textValues[i] = { text: items[propNames[i]], value: propNames[i] };\r\n        }\r\n    }\r\n    else if (Array.isArray(items)) {\r\n        textValues = items;\r\n    }\r\n    else {\r\n        itemsPromise = items;\r\n    }\r\n    class Dropdown extends PropEditor {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {};\r\n        }\r\n        componentDidMount() {\r\n            return __awaiter(this, void 0, void 0, function* () {\r\n                if (itemsPromise) {\r\n                    let items = yield itemsPromise;\r\n                    this.setState({ items });\r\n                }\r\n            });\r\n        }\r\n        render() {\r\n            let { items } = this.state;\r\n            let { value } = this.props;\r\n            items = items || textValues;\r\n            return React.createElement(\"select\", { className: 'form-control', value: value == null ? \"\" : value, onChange: e => {\r\n                    let textValue = e.target.value;\r\n                    if (valueType == \"number\") {\r\n                        let integerRegex = /^\\d+$/;\r\n                        let floatRegex = /^[+-]?\\d+(\\.\\d+)?$/;\r\n                        if (integerRegex.test(textValue))\r\n                            value = parseInt(textValue);\r\n                        else if (floatRegex.test(textValue))\r\n                            value = parseFloat(textValue);\r\n                        else\r\n                            value = null;\r\n                    }\r\n                    else {\r\n                        value = textValue;\r\n                    }\r\n                    this.props.updateComponentProp(value);\r\n                } }, items.map(o => React.createElement(\"option\", { key: o.value, value: o.value }, o.text)));\r\n        }\r\n    }\r\n    return Dropdown;\r\n}\r\n//# sourceMappingURL=prop-editor.js.map","export function guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\n","/** 连接多个路径 */\r\nexport function pathContact(...paths) {\r\n    paths = paths || [];\r\n    if (paths.length == 0)\r\n        return \"\";\r\n    if (paths.length == 1) {\r\n        return paths[0];\r\n    }\r\n    let str = paths.join(\"\");\r\n    // 将一个或多个的 / 变为一个 /，例如：/shop/test// 转换为 /shop/test/\r\n    str = str.replace(/\\/+/g, '/');\r\n    return str;\r\n}\r\n","export class Errors {\r\n    argumentNull(argumentName) {\r\n        let error = new Error(`Argument ${argumentName} cannt be null or emtpy.`);\r\n        let name = \"argumentNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    routeDataFieldNull(fieldName) {\r\n        let msg = `The ${fieldName} field of route data cannt be null.`;\r\n        let error = new Error(msg);\r\n        let name = \"routeDataFieldNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    argumentFieldNull(fieldName, argumentName) {\r\n        let msg = `The ${fieldName} field of ${argumentName} cannt be null.`;\r\n        let error = new Error(msg);\r\n        let name = \"argumentFieldNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    argumentTypeIncorrect(argumentName, expectedType) {\r\n        let msg = `Argument ${argumentName} type error, expected type is ${expectedType}.`;\r\n        let error = new Error(msg);\r\n        let name = \"argumentTypeIncorrect\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    queryResultTypeError() {\r\n        let msg = 'Type of the query result is expected as Array or DataSourceSelectResult.';\r\n        return new Error(msg);\r\n    }\r\n}\r\nexport let errors = new Errors();\r\n","export class Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { errors as baseErrors } from \"./errors\";\r\nimport { Callback } from \"./callback\";\r\nlet errors = Object.assign(baseErrors, {\r\n    dataSourceCanntInsert() {\r\n        return new Error(\"DataSource can not insert.\");\r\n    },\r\n    dataSourceCanntDelete() {\r\n        return new Error(\"DataSource can not delete.\");\r\n    },\r\n    dataSourceCanntUpdate() {\r\n        return new Error(\"DataSource can not update.\");\r\n    },\r\n    primaryKeyNull(key) {\r\n        let msg = `Primary key named '${key}' value is null.`;\r\n        return new Error(msg);\r\n    }\r\n});\r\nexport class DataSource {\r\n    constructor(args) {\r\n        this.inserting = new Callback(); //callbacks1<DataSource<T>, T, number>();\r\n        this.inserted = new Callback();\r\n        this.deleting = new Callback(); //callbacks<DataSource<T>, T>();\r\n        this.deleted = new Callback(); //callbacks<DataSource<T>, T>();\r\n        this.updating = new Callback();\r\n        this.updated = new Callback();\r\n        this.selecting = new Callback();\r\n        this.selected = new Callback(); //callbacks<DataSource<T>, DataSourceSelectResult<T>>();\r\n        this.error = new Callback(); //callbacks<this, DataSourceError>();\r\n        this.args = args;\r\n        this.primaryKeys = args.primaryKeys || [];\r\n    }\r\n    ; //callbacks<DataSource<T>, DataSourceSelectArguments>();\r\n    get canDelete() {\r\n        return this.args.delete != null && this.primaryKeys.length > 0;\r\n    }\r\n    get canInsert() {\r\n        return this.args.insert != null && this.primaryKeys.length > 0;\r\n    }\r\n    get canUpdate() {\r\n        return this.args.update != null && this.primaryKeys.length > 0;\r\n    }\r\n    executeInsert(item, args) {\r\n        return this.args.insert(item, args);\r\n    }\r\n    executeDelete(item, args) {\r\n        return this.args.delete(item, args);\r\n    }\r\n    executeUpdate(item, args) {\r\n        return this.args.update(item, args);\r\n    }\r\n    executeSelect(args) {\r\n        args = args || {};\r\n        return this.args.select(args);\r\n    }\r\n    insert(item, args, index) {\r\n        if (!this.canInsert)\r\n            throw errors.dataSourceCanntInsert();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        if (typeof args == 'number') {\r\n            index = args;\r\n            args = null;\r\n        }\r\n        this.inserting.fire({ sender: this, dataItem: item, index });\r\n        return this.executeInsert(item, args).then((data) => {\r\n            Object.assign(item, data);\r\n            this.inserted.fire({ sender: this, dataItem: item, index });\r\n            return data;\r\n        }).catch(exc => {\r\n            this.processError(exc, 'insert');\r\n            throw exc;\r\n        });\r\n    }\r\n    delete(item, args) {\r\n        if (!this.canDelete)\r\n            throw errors.dataSourceCanntDelete();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        this.checkPrimaryKeys(item);\r\n        this.deleting.fire({ sender: this, dataItem: item });\r\n        return this.executeDelete(item, args).then((data) => {\r\n            this.deleted.fire({ sender: this, dataItem: item });\r\n            return data;\r\n        }).catch(exc => {\r\n            this.processError(exc, 'delete');\r\n            throw exc;\r\n        });\r\n    }\r\n    update(item, args) {\r\n        if (!this.canUpdate)\r\n            throw errors.dataSourceCanntUpdate();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        this.checkPrimaryKeys(item);\r\n        this.updating.fire({ sender: this, dataItem: item });\r\n        return this.executeUpdate(item, args).then((data) => {\r\n            Object.assign(item, data);\r\n            this.updated.fire({ sender: this, dataItem: item });\r\n            return data;\r\n        }).catch((exc) => {\r\n            this.processError(exc, 'update');\r\n            throw exc;\r\n        });\r\n    }\r\n    isSameItem(theItem, otherItem) {\r\n        if (theItem == null)\r\n            throw errors.argumentNull('theItem');\r\n        if (otherItem == null)\r\n            throw errors.argumentNull('otherItem');\r\n        if (this.primaryKeys.length == 0)\r\n            return theItem == otherItem;\r\n        this.checkPrimaryKeys(theItem);\r\n        this.checkPrimaryKeys(otherItem);\r\n        for (let pk of this.primaryKeys) {\r\n            if (theItem[pk] != otherItem[pk])\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    checkPrimaryKeys(item) {\r\n        for (let key in item) {\r\n            if (item[key] == null && this.primaryKeys.indexOf(key) >= 0)\r\n                throw errors.primaryKeyNull(key);\r\n        }\r\n    }\r\n    select(args) {\r\n        args = args || {};\r\n        // fireCallback(this.selecting, this, args);\r\n        this.selecting.fire({ sender: this, selectArguments: args });\r\n        return this.executeSelect(args).then((data) => {\r\n            let dataItems;\r\n            let totalRowCount;\r\n            if (Array.isArray(data)) {\r\n                dataItems = data;\r\n                totalRowCount = data.length;\r\n            }\r\n            else if (data.dataItems !== undefined && data.totalRowCount !== undefined) {\r\n                dataItems = data.dataItems;\r\n                totalRowCount = data.totalRowCount;\r\n            }\r\n            else {\r\n                throw errors.queryResultTypeError();\r\n            }\r\n            this.selected.fire({ sender: this, selectResult: { totalRowCount, dataItems } });\r\n            return { totalRowCount, dataItems };\r\n        }).catch(exc => {\r\n            this.processError(exc, 'select');\r\n            throw exc;\r\n        });\r\n    }\r\n    processError(exc, method) {\r\n        exc.method = method;\r\n        this.error.fire({ sender: this, error: exc });\r\n        if (!exc.handled)\r\n            throw exc;\r\n    }\r\n}\r\nexport class DataSourceSelectArguments {\r\n    constructor() {\r\n        this.startRowIndex = 0;\r\n        this.maximumRows = 2147483647;\r\n    }\r\n}\r\nexport class ArrayDataSource extends DataSource {\r\n    constructor(items) {\r\n        super({\r\n            select(args) {\r\n                return __awaiter(this, void 0, void 0, function* () {\r\n                    if (args.sortExpression) {\r\n                    }\r\n                    let dataItems = items.slice(args.startRowIndex, args.startRowIndex + args.maximumRows);\r\n                    let result = { dataItems, totalRowCount: items.length };\r\n                    return result;\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n// }\r\n","export function parseUrl(url) {\r\n    let i = url.indexOf(\"?\");\r\n    if (i < 0)\r\n        return {};\r\n    let query = url.substr(i + 1);\r\n    return pareeUrlQuery(query);\r\n}\r\nfunction pareeUrlQuery(query) {\r\n    let match, pl = /\\+/g, // Regex for replacing addition symbol with a space\r\n    search = /([^&=]+)=?([^&]*)/g, decode = function (s) {\r\n        return decodeURIComponent(s.replace(pl, \" \"));\r\n    };\r\n    let urlParams = {};\r\n    while (match = search.exec(query))\r\n        urlParams[decode(match[1])] = decode(match[2]);\r\n    return urlParams;\r\n}\r\n","export { guid } from \"./guid\";\r\nexport { pathContact } from \"./path\";\r\nexport { Errors, errors } from \"./errors\";\r\nexport { Callback } from \"./callback\";\r\nexport { DataSource, DataSourceSelectArguments } from \"./data\";\r\nexport { parseUrl } from \"./url\";\r\n"],"sourceRoot":""}
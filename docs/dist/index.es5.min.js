/*!
 * 
 *  maishu-jueying v3.0.3
 *  
 *  Copyright (C) maishu All rights reserved.
 *  
 *  组件设计器 
 *   
 *  作者: 麦舒
 *  日期: 2018/5/30
 *  
 *  个人博客：   http://www.cnblogs.com/ansiboy/
 *  GITHUB:     https://github.com/ansiboy/jueying
 *  QQ 讨论组：  119038574 
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.jueying=t(require("react")):e.jueying=t(e.react)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"placeHolderIdNull",value:function(){return new Error("Place holder property id cannt be null or empty.")}},{key:"fileNotExists",value:function(e){return new Error("File '".concat(e,"' is not exists."))}},{key:"argumentNull",value:function(e){return new Error("Argument ".concat(e," is null or empty."))}},{key:"argumentRangeError",value:function(e){return new Error("Argument ".concat(e," range error."))}},{key:"pageDataIsNull",value:function(){return new Error("Page data is null.")}},{key:"toolbarRequiredKey",value:function(){return new Error("Toolbar has not a key prop.")}},{key:"loadPluginFail",value:function(e){return new Error("Load plugin '".concat(e,"' fail."))}},{key:"idRequired",value:function(){return new Error("Property id is required.")}},{key:"canntFindMasterPage",value:function(e){return new Error("Can not find master page for component container ".concat(e,"."))}},{key:"propCanntNull",value:function(e,t){var n="".concat(e," property ").concat(t," cannt be null or empty.");return new Error(n)}},{key:"argumentFieldCanntNull",value:function(e,t){var n="".concat(e," of argument ").concat(t," cannt be null or empty.");return new Error(n)}}],(n=null)&&r(t.prototype,n),o&&r(t,o),e}();t.Errors=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var r=n(1);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getPropEditors",value:function(t){for(var n=t.type,r=[],o=this.componentPropEditors[n]||[],a=0;a<o.length;a++){var i=o[a].propName,c=e.componentPropEditorDisplay["".concat(n,".").concat(i)];null!=c&&0==c(t)||r.push(o[a])}return r}},{key:"getPropEditor",value:function(e,t){return this.getPropEditorByArray(e,t)}},{key:"getPropEditorByArray",value:function(e,t){return(this.componentPropEditors[e]||[]).filter((function(e){return e.propName==t}))[0]}},{key:"setPropEditor",value:function(t){var n=t.componentType,r=t.editorType,o=t.display,a=t.group,i=t.propName;a=a||"";var c=(i=i||"").split("."),u="string"==typeof n?n:n.prototype.typename||n.name;e.componentPropEditorDisplay["".concat(u,".").concat(i)]=o;for(var l=e.componentPropEditors[u]=e.componentPropEditors[u]||[],p=0;p<l.length;p++)if(l[p].propName==c.join("."))return void(l[p].editorType=r);l.push({propName:i,editorType:r,group:a})}},{key:"register",value:function(e,t,n){if(null==t&&"function"==typeof e&&(e=(t=e).name,t.componentName=e),!e)throw r.Errors.argumentNull("componentName");if(!t)throw r.Errors.argumentNull("componentType")}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}();t.Component=a,a.Fragment="",a.componentPropEditors={},a.componentPropEditorDisplay={},a.componentTypes={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendClassName=function(e,t){if(null==e)throw r.Errors.argumentNull("element");if(!t)throw r.Errors.argumentNull("addonClassName");var n;n="string"==typeof e?e:e.className;if(n=n||"",console.assert(null!=t),n.indexOf(t)>=0)return n;var o="".concat(n," ").concat(t);"string"!=typeof e&&(e.className=o);return o},t.removeClassName=function(e,t){var n;n="string"==typeof e?e:e.className||"";if(n.indexOf(t)<0)return n;n=(n=(n=n||"").replace(new RegExp(t,"g"),"")).trim(),"string"!=typeof e&&(e.className=n);return n},t.classNames=void 0;var r=n(1),o={componentSelected:"component-selected",emptyTemplates:"empty-templates",loadingTemplates:"loading-templates",templateSelected:"template-selected",templateDialog:"template-dialog",emptyDocument:"empty-document",component:"component",componentWrapper:"component-wrapper",componentPanel:"component-panel",componentIcon:"component-icon",placeholder:"placeholder",editorPanel:"editor-panel",designer:"designer",moveDown:"move-down"};t.classNames=o;var a=40,i=22,c=document.createElement("style");c.type="text/css",c.setAttribute("data-name","jueying"),c.innerHTML="\n            .".concat(o.componentSelected," {\n                border: solid 1px #337ab7!important;\n            }\n            .").concat(o.componentSelected," > :first-child {\n                border-color: blue;\n              }\n              .").concat(o.componentSelected," .resize_handle {\n                position: absolute;\n                height: 6px;\n                width: 6px;\n                border: 1px solid #89B;\n                background: #9AC;\n              }\n              .").concat(o.componentSelected," .move_handle {\n                height: 12px;\n                width: 12px;\n                top: 6px;\n                left: 8px;\n                border: solid 1px black;\n                position: relative;\n                margin-top: -12px;\n              }\n              .").concat(o.componentSelected," .NW,\n              .").concat(o.componentSelected," .NN,\n              .").concat(o.componentSelected," .NE {\n                top: -4px;\n              }\n              .").concat(o.componentSelected," .NE,\n              .").concat(o.componentSelected," .EE,\n              .").concat(o.componentSelected," .SE {\n                right: -4px;\n              }\n              .").concat(o.componentSelected," .SW,\n              .").concat(o.componentSelected,".SS,\n              .").concat(o.componentSelected," .SE {\n                bottom: -4px;\n              }\n              .").concat(o.componentSelected," .NW,\n              .").concat(o.componentSelected," .WW,\n              .").concat(o.componentSelected," .SW {\n                left: -4px;\n              }\n              .").concat(o.componentSelected," .SE,\n              .").concat(o.componentSelected," .NW {\n                cursor: nw-resize;\n              }\n              .").concat(o.componentSelected," .SW,\n              .").concat(o.componentSelected," .NE {\n                cursor: ne-resize;\n              }\n              .").concat(o.componentSelected," .NN,\n              .").concat(o.componentSelected," .SS {\n                cursor: n-resize;\n                left: 50%;\n                margin-left: -4px;\n              }\n              .").concat(o.componentSelected," .EE,\n              .").concat(o.componentSelected," .WW {\n                cursor: e-resize;\n                top: 50%;\n                margin-top: -4px;\n              }\n            .").concat(o.emptyTemplates," {\n                padding:50px 0;\n                text-align: center;\n            }\n            .").concat(o.loadingTemplates," {\n                padding:50px 0;\n                text-align: center;\n            }\n            .").concat(o.templateSelected," .page-view {\n                border: solid 1px #337ab7!important;\n            }\n            .").concat(o.templateDialog," .name {\n                margin-top: -").concat(a,"px;\n                height: ").concat(a,"px;\n                font-size: ").concat(i,"px;\n                text-align: center;\n                padding-top: 6px;\n                background-color: black;\n                opacity: 0.5;\n            }\n            .").concat(o.templateDialog," .name span {\n                color: white;\n            }\n            .").concat(o.emptyDocument," {\n                text-align: center;\n                padding: 100px 0;\n            }\n            .").concat(o.component," > .NW,\n            .").concat(o.component," > .NN,\n            .").concat(o.component," > .NE,\n            .").concat(o.component," > .EE,\n            .").concat(o.component," > .SE,\n            .").concat(o.component," > .SW,\n            .").concat(o.component," > .SS,\n            .").concat(o.component," > .WW {\n                display: none;\n            }\n            .").concat(o.componentSelected,".component > .NW,\n            .").concat(o.componentSelected,".component > .NN,\n            .").concat(o.componentSelected,".component > .NE,\n            .").concat(o.componentSelected,".component > .EE,\n            .").concat(o.componentSelected,".component > .SE,\n            .").concat(o.componentSelected,".component > .SW,\n            .").concat(o.componentSelected,".component > .SS,\n            .").concat(o.componentSelected,".component > .WW {\n                display: block;\n            }\n            .").concat(o.placeholder," {\n                min-height: 40px;\n                width: 100%;\n            }\n            .").concat(o.placeholder,".active,\n            .").concat(o.componentWrapper,".active,\n            .").concat(o.componentWrapper,".").concat(o.componentSelected,".active {\n                border: 1px solid green;\n            }\n            .").concat(o.editorPanel," {\n                width: 300px;\n                background: white;\n                color: black;\n                margin: 0;\n                font-size: 14px;\n                z-index: 100;\n                overflow: auto;\n            }\n            .").concat(o.editorPanel," label {\n                width: 80px;\n                float: left;\n                padding: 4px;\n                text-overflow: ellipsis;\n                overflow: hidden;\n            }\n            .").concat(o.editorPanel," .control {\n                padding-left: 90px;\n            }\n            .").concat(o.editorPanel," .empty {\n                padding-top: 200px;\n                text-align: center;\n            }\n            .").concat(o.designer," .error,\n            .").concat(o.editorPanel," .error {\n                color: red;\n            }\n            .").concat(o.componentPanel," {\n                background: white;\n                color: black;\n                font-size: 14px;\n                z-index: 100;\n                list-style: none;\n                padding: 0;\n                text-align: center\n            }\n            .").concat(o.componentPanel," .panel-heading {\n                text-align: center;\n            }\n            .").concat(o.componentPanel," li {\n                text-align: center;\n                padding: 8px;\n            }\n            .").concat(o.componentWrapper,".").concat(o.moveDown," {\n         \n            }\n        "),null!=document.head&&document.head.appendChild(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proptDisplayNames=void 0;t.proptDisplayNames={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={ComponentTypes:!0,constants:!0};Object.defineProperty(t,"ComponentTypes",{enumerable:!0,get:function(){return a.ComponentTypes}}),Object.defineProperty(t,"constants",{enumerable:!0,get:function(){return a.constants}});var o=n(11);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(12)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageDesigner=t.DesignerContext=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(7);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=r.createContext({designer:null});t.DesignerContext=s;var f=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,l(t).call(this,e))).components={};var r=n.props.pageData;return n.initPageData(r),n.state={pageData:r},n.handler=new o.ComponentDataHandler(r),n.handler.componentSelected.add((function(){n.setState({pageData:n.handler.pageData})})),n.handler.componentRemoved.add((function(){n.setState({pageData:n.handler.pageData})})),n.handler.componentUpdated.add((function(){n.setState({pageData:n.handler.pageData})})),n.handler.pageDataChanged.add((function(e){n.setState({pageData:e})})),n}var n,f,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,m=[{key:"travelComponentData",value:function(e,t){var n=new Array;n.push(e);var r=[];for(t=t||function(){return!0};n.length>0;){var o=n.shift();t(o)&&r.push(o);var c=(o.children||[]).filter((function(e){return"object"==a(e)}));n.push.apply(n,i(c))}return r}}],(f=[{key:"setComponetRefProp",value:function(e){var n=this,r={};t.travelComponentData(e).forEach((function(e){console.assert(null!=e.props&&null!=e.id),r[e.type]=r[e.type]||[],r[e.type].push(e.props.id);var t=e.props.ref;e.props.ref=function(r){null!=r&&(n.components[e.type]=n.components[e.type]||[],n.components[e.type].push(r)),"function"==typeof t&&t(r)}}));for(var o=Object.getOwnPropertyNames(this.components),a=function(e){var t=o[e],a=r[t]||[];n.components[t]=(n.components[t]||[]).filter((function(e){return a.indexOf(e.id||e.props.id)>=0}))},i=0;i<o.length;i++)a(i)}},{key:"initPageData",value:function(e){null!=e&&(e.children=e.children||[],this.setComponetRefProp(e))}},{key:"allComponents",value:function(){var e=[];for(var t in this.components)e.push.apply(e,i(this.components[t]));return e}},{key:"updateComponentProp",value:function(e,t,n){return this.updateComponentProps({componentId:e,propName:t,value:n})}},{key:"updateComponentProps",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.handler.updateComponentProps(t)}},{key:"appendComponent",value:function(e,t,n){this.handler.appendComponent(e,t,n)}},{key:"setComponentPosition",value:function(e,t){return this.setComponentsPosition([{componentId:e,position:t}])}},{key:"setComponentSize",value:function(e,t){console.assert(null!=e),console.assert(null!=t);var n=this.findComponentData(e);if(!n)throw new Error("Control ".concat(e," is not exits."));var r=n.props.style=n.props.style||{};t.height&&(r.height=t.height),t.width&&(r.width=t.width);var o=this.state.pageData;this.setState({pageData:o})}},{key:"setComponentsPosition",value:function(e){var t=this,n=[];e.forEach((function(e){var r=e.componentId,o=e.position,a=o.left,i=o.top,c=t.handler.findComponentData(r);if(!c)throw new Error("Control ".concat(r," is not exits."));var u=c.props.style=c.props.style||{};a&&(u.left=a),i&&(u.top=i),n.push({componentId:r,propName:"style",value:u})})),this.handler.updateComponentProps(n)}},{key:"selectComponent",value:function(e){this.handler.selectComponents(e),this._element&&this._element.focus()}},{key:"removeComponent",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.handler.removeComponents(t)}},{key:"removeComponents",value:function(e){this.handler.removeComponents(e)}},{key:"moveComponent",value:function(e,t,n){return this.handler.moveComponent(e,t,n)}},{key:"removeComponentFrom",value:function(e,t){var n=this,r=null;t=t||[];for(var o=0;o<t.length;o++){var a=t[o];if("string"!=typeof a&&e==a.id){r=o;break}}if(null==r){for(var i=function(r){var o=t[r];if("string"==typeof o)return"continue";var a=o.children||[];a.forEach((function(t){return"string"==typeof t||!!n.removeComponentFrom(e,a)||void 0}))},c=0;c<t.length;c++)i(c);return!1}return 0==r?t.shift():r==t.length-1?t.pop():t.splice(r,1),!0}},{key:"findComponentData",value:function(e){return this.handler.findComponentData(e)}},{key:"onKeyDown",value:function(e){if(46==e.keyCode){if(0==this.selectedComponents.length)return;this.handler.removeComponents(this.selectedComponentIds)}}},{key:"findComponetsByTypeName",value:function(e){this.components[e]}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e._element=e._element||t},onKeyDown:function(t){return e.onKeyDown(t)},className:this.props.className,style:this.props.style},r.createElement(s.Provider,{value:{designer:this}},this.props.children))}},{key:"pageData",get:function(){return this.state.pageData}},{key:"selectedComponentIds",get:function(){return this.selectedComponents.map((function(e){return e.id}))}},{key:"selectedComponents",get:function(){return this.handler.selectedComponents}},{key:"element",get:function(){return this._element}}])&&c(n.prototype,f),m&&c(n,m),t}(r.Component);t.PageDesigner=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentDataHandler=void 0;var r=n(1),o=n(8);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._components={},this.componentSelected=o.Callback.create(),this.componentRemoved=o.Callback.create(),this.componentAppend=o.Callback.create(),this.componentUpdated=o.Callback.create(),this.pageDataChanged=o.Callback.create(),this._pageData=t,this.initComponentData(this._pageData)}var t,n,u;return t=e,u=[{key:"travelComponentData",value:function(e,t){var n=new Array;n.push(e);var r=[];for(t=t||function(){return!0};n.length>0;){var o=n.shift();t(o)&&r.push(o);var c=(o.children||[]).filter((function(e){return"object"==i(e)}));n.push.apply(n,a(c))}return r}},{key:"fillComponent",value:function(t){var n={};if(!t.name){var r,a=0;do{a+=1,r="".concat(t.type).concat(a)}while(n[r]);n[r]=t,t.name=r}t.id||(t.id=(0,o.guid)()),t.children=t.children||[],t.children&&0!=t.children.length&&t.children.forEach((function(t){if("string"==typeof t)return!0;e.fillComponent(t)}))}},{key:"setComponetRefProp",value:function(t,n){var r={};e.travelComponentData(t).forEach((function(e){console.assert(null!=e.props&&null!=e.id),r[e.type]=r[e.type]||[],r[e.type].push(e.props.id);var t=e.props.ref;e.props.ref=function(r){null!=r&&(n[e.type]=n[e.type]||[],n[e.type].push(r)),"function"==typeof t&&t(r)}}));for(var o=Object.getOwnPropertyNames(n),a=function(e){var t=o[e],a=r[t]||[];n[t]=(n[t]||[]).filter((function(e){return a.indexOf(e.id||e.props.id)>=0}))},i=0;i<o.length;i++)a(i)}}],(n=[{key:"initComponentData",value:function(t){null!=t&&(t.children=t.children||[],e.fillComponent(t),e.setComponetRefProp(t,this._components))}},{key:"moveComponent",value:function(e,t,n){var r=this.findComponentData(e);if(null==r)throw new Error("Cannt find component by id ".concat(e));console.assert(null!=r,"Cannt find component by id ".concat(e));var o=this.pageData;console.assert(null!=o.children);var a=o.children;this.removeComponentFrom(e,a),this.appendComponent(t,r,n)}},{key:"updateComponentProps",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=r.componentId,a=r.propName,i=r.value,c=this.findComponentData(o);if(null!=c){var u=a.split(".");console.assert(null!=c),console.assert(null!=u,"props is null"),c.props=c.props||{};for(var l=c.props,p=0;p<u.length-1;p++)l=l[u[p]]=l[u[p]]||{};l[u[u.length-1]]=i,t.push(c)}}this.componentUpdated.fire(t)}},{key:"findComponentData",value:function(t){var n=this._pageData;if(!n)throw r.Errors.pageDataIsNull();return e.travelComponentData(n,(function(e){return e.id==t}))[0]}},{key:"removeComponentFrom",value:function(e,t){var n=null;t=t||[];for(var r=0;r<t.length;r++){var o=t[r];if("string"!=typeof o&&e==o.id){n=r;break}}if(null==n){for(var a=0;a<t.length;a++){var i=t[a];if("string"!=typeof i){var c=i.children;if(c&&c.length>0&&this.removeComponentFrom(e,c))return!0}}return!1}return 0==n?t.shift():n==t.length-1?t.pop():t.splice(n,1),!0}},{key:"appendComponent",value:function(e,t,n){if(!e)throw r.Errors.argumentNull("parentId");if(!t)throw r.Errors.argumentNull("childComponent");this.initComponentData(t);var o=this.findComponentData(e);if(null==o)throw new Error("Parent is not exists");console.assert(null!=o),o.children=o.children||[],null!=n?o.children.splice(n,0,t):o.children.push(t),this.selectComponents(t.id),this.componentAppend.fire(this)}},{key:"selectComponent",value:function(e){return this.selectComponents(e)}},{key:"selectComponents",value:function(e){"string"==typeof e&&(e=[e]);var t=[];for(t.push(this._pageData);t.length>0;){var n=t.pop(),r=e.indexOf(n.id)>=0;n.selected=r,(n.children||[]).forEach((function(e){if("string"==typeof e)return!0;t.push(e)}))}this.componentSelected.fire(this.selectedComponentIds)}},{key:"removeComponent",value:function(e){return this.removeComponents([e])}},{key:"removeComponents",value:function(e){var t=this,n=this.pageData;if(n&&n.children&&0!=n.children.length){var r=n.children;e.forEach((function(e){t.removeComponentFrom(e,r)})),this.componentRemoved.fire(e)}}},{key:"setComponentPosition",value:function(e,t){return this.setComponentsPosition([{componentId:e,position:t}])}},{key:"setComponentsPosition",value:function(e){var t=this,n=[];e.forEach((function(e){var r=e.componentId,o=e.position,a=o.left,i=o.top,c=t.findComponentData(r);if(!c)throw new Error("Control ".concat(r," is not exits."));var u=c.props.style=c.props.style||{};a&&(u.left=a),i&&(u.top=i),n.push({componentId:r,propName:"style",value:u})})),this.updateComponentProps(n)}},{key:"setComponentSize",value:function(e,t){console.assert(null!=e),console.assert(null!=t);var n=this.findComponentData(e);if(!n)throw new Error("Control ".concat(e," is not exits."));var r=n.props.style=n.props.style||{};t.height&&(r.height=t.height),t.width&&(r.width=t.width),this.updateComponentProps([{componentId:e,propName:"style",value:r}])}},{key:"selectedComponents",get:function(){var e=new Array,t=new Array;for(t.push(this._pageData);t.length>0;){var n=t.pop();null!=n.props&&1==n.selected&&e.push(n),(n.children||[]).forEach((function(e){if("string"==typeof e)return!0;t.push(e)}))}return e}},{key:"selectedComponentIds",get:function(){return this.selectedComponents.map((function(e){return e.id}))}},{key:"components",get:function(){return this._components}},{key:"pageData",get:function(){return this._pageData},set:function(e){this._pageData=e,this.initComponentData(e),this.pageDataChanged.fire(e)}}])&&c(t.prototype,n),u&&c(t,u),e}();t.ComponentDataHandler=u},function(e,t,n){"use strict";function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function o(...e){if(0==(e=e||[]).length)return"";if(1==e.length)return e[0];let t=e.join("");return t=t.replace(/\/+/g,"/"),t}n.r(t);class a{argumentNull(e){let t=new Error(`Argument ${e} cannt be null or emtpy.`);return t.name="argumentNull",t}routeDataFieldNull(e){let t=new Error(`The ${e} field of route data cannt be null.`);return t.name="routeDataFieldNull",t}argumentFieldNull(e,t){let n=new Error(`The ${e} field of ${t} cannt be null.`);return n.name="argumentFieldNull",n}argumentTypeIncorrect(e,t){let n=new Error(`Argument ${e} type error, expected type is ${t}.`);return n.name="argumentTypeIncorrect",n}queryResultTypeError(){return new Error("Type of the query result is expected as Array or DataSourceSelectResult.")}}let i=new a;class c{constructor(){this.funcs=new Array}add(e){this.funcs.push(e)}remove(e){this.funcs=this.funcs.filter(t=>t!=e)}fire(e){this.funcs.forEach(t=>t(e))}static create(){return new c}}let u=Object.assign(i,{dataSourceCanntInsert:()=>new Error("DataSource can not insert."),dataSourceCanntDelete:()=>new Error("DataSource can not delete."),dataSourceCanntUpdate:()=>new Error("DataSource can not update."),primaryKeyNull:e=>new Error(`Primary key named '${e}' value is null.`)});class l{constructor(e){this.inserting=new c,this.inserted=new c,this.deleting=new c,this.deleted=new c,this.updating=new c,this.updated=new c,this.selecting=new c,this.selected=new c,this.error=new c,this.args=e,this.primaryKeys=e.primaryKeys||[]}get canDelete(){return null!=this.args.delete&&this.primaryKeys.length>0}get canInsert(){return null!=this.args.insert&&this.primaryKeys.length>0}get canUpdate(){return null!=this.args.update&&this.primaryKeys.length>0}executeInsert(e,t){return this.args.insert(e,t)}executeDelete(e,t){return this.args.delete(e,t)}executeUpdate(e,t){return this.args.update(e,t)}executeSelect(e){return e=e||{},this.args.select(e)}insert(e,t,n){if(!this.canInsert)throw u.dataSourceCanntInsert();if(!e)throw u.argumentNull("item");return"number"==typeof t&&(n=t,t=null),this.inserting.fire({sender:this,dataItem:e,index:n}),this.executeInsert(e,t).then(t=>(Object.assign(e,t),this.inserted.fire({sender:this,dataItem:e,index:n}),t)).catch(e=>{throw this.processError(e,"insert"),e})}delete(e,t){if(!this.canDelete)throw u.dataSourceCanntDelete();if(!e)throw u.argumentNull("item");return this.checkPrimaryKeys(e),this.deleting.fire({sender:this,dataItem:e}),this.executeDelete(e,t).then(t=>(this.deleted.fire({sender:this,dataItem:e}),t)).catch(e=>{throw this.processError(e,"delete"),e})}update(e,t){if(!this.canUpdate)throw u.dataSourceCanntUpdate();if(!e)throw u.argumentNull("item");return this.checkPrimaryKeys(e),this.updating.fire({sender:this,dataItem:e}),this.executeUpdate(e,t).then(t=>(Object.assign(e,t),this.updated.fire({sender:this,dataItem:e}),t)).catch(e=>{throw this.processError(e,"update"),e})}isSameItem(e,t){if(null==e)throw u.argumentNull("theItem");if(null==t)throw u.argumentNull("otherItem");if(0==this.primaryKeys.length)return e==t;this.checkPrimaryKeys(e),this.checkPrimaryKeys(t);for(let n of this.primaryKeys)if(e[n]!=t[n])return!1;return!0}checkPrimaryKeys(e){for(let t in e)if(null==e[t]&&this.primaryKeys.indexOf(t)>=0)throw u.primaryKeyNull(t)}select(e){return e=e||{},this.selecting.fire({sender:this,selectArguments:e}),this.executeSelect(e).then(e=>{let t,n;if(Array.isArray(e))t=e,n=e.length;else{if(void 0===e.dataItems||void 0===e.totalRowCount)throw u.queryResultTypeError();t=e.dataItems,n=e.totalRowCount}return this.selected.fire({sender:this,selectResult:{totalRowCount:n,dataItems:t}}),{totalRowCount:n,dataItems:t}}).catch(e=>{throw this.processError(e,"select"),e})}processError(e,t){if(e.method=t,this.error.fire({sender:this,error:e}),!e.handled)throw e}}class p{constructor(){this.startRowIndex=0,this.maximumRows=2147483647}}function s(e){let t=e.indexOf("?");return t<0?{}:function(e){let t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(n," "))},a={};for(;t=r.exec(e);)a[o(t[1])]=o(t[2]);return a}(e.substr(t+1))}n.d(t,"guid",(function(){return r})),n.d(t,"pathContact",(function(){return o})),n.d(t,"Errors",(function(){return a})),n.d(t,"errors",(function(){return i})),n.d(t,"Callback",(function(){return c})),n.d(t,"DataSource",(function(){return l})),n.d(t,"DataSourceSelectArguments",(function(){return p})),n.d(t,"parseUrl",(function(){return s}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={strings:!0,proptDisplayNames:!0,Component:!0,ComponentPanel:!0,EditorPanel:!0,PageDesigner:!0,DesignerContext:!0,PropEditor:!0,TextInput:!0,classNames:!0,ComponentDataHandler:!0,component:!0};Object.defineProperty(t,"strings",{enumerable:!0,get:function(){return o.proptDisplayNames}}),Object.defineProperty(t,"proptDisplayNames",{enumerable:!0,get:function(){return o.proptDisplayNames}}),Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return a.Component}}),Object.defineProperty(t,"ComponentPanel",{enumerable:!0,get:function(){return i.ComponentPanel}}),Object.defineProperty(t,"EditorPanel",{enumerable:!0,get:function(){return c.EditorPanel}}),Object.defineProperty(t,"PageDesigner",{enumerable:!0,get:function(){return u.PageDesigner}}),Object.defineProperty(t,"DesignerContext",{enumerable:!0,get:function(){return u.DesignerContext}}),Object.defineProperty(t,"PropEditor",{enumerable:!0,get:function(){return l.PropEditor}}),Object.defineProperty(t,"TextInput",{enumerable:!0,get:function(){return l.TextInput}}),Object.defineProperty(t,"classNames",{enumerable:!0,get:function(){return p.classNames}}),Object.defineProperty(t,"ComponentDataHandler",{enumerable:!0,get:function(){return s.ComponentDataHandler}}),Object.defineProperty(t,"component",{enumerable:!0,get:function(){return m.component}});var o=n(4),a=n(2),i=n(10),c=n(13),u=n(6),l=n(15),p=n(3),s=n(7),f=n(5);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var m=n(16);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentPanel=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(5),a=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,l(t).call(this,e))).state={componets:[]},n.designer=n.props.designer,n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,s=[{key:"getComponentData",value:function(e){var t=e.getData(o.constants.componentData);return console.assert(null!=t),JSON.parse(t)}},{key:"mouseInnerPosition",value:function(e){var t=e.getData("mousePosition");return console.assert(null!=t),JSON.parse(t)}}],(i=[{key:"componentDraggable",value:function(e,t){console.assert(null!=e),e.draggable=!0,e.addEventListener("dragstart",(function(e){null!=e.dataTransfer&&(t.props=t.props||{},e.dataTransfer.setData(o.constants.componentData,JSON.stringify(t)),e.dataTransfer.setData("mousePosition",JSON.stringify({x:e.offsetX,y:e.offsetY})))}))}},{key:"setComponets",value:function(e){this.setState({componets:e})}},{key:"render",value:function(){var e=this,n=this.props.empty||r.createElement("div",{className:"empty"},"暂无可用组件"),o=Object.assign({},this.props),i=this.state.componets||[];return r.createElement("ul",Object.assign({},o,{className:"".concat(a.classNames.componentPanel," ").concat(this.props.className||""),ref:function(t){return e.toolbarElement=e.toolbarElement||t}}),0==i.length?n:i.map((function(n,o){var i={key:o};return i[t.componentIndexName]="".concat(o),r.createElement("li",Object.assign({},i,{className:a.classNames.componentIcon}),r.createElement("div",{className:"btn-link"},r.createElement("i",{className:n.icon,style:{fontSize:44,color:"black"},ref:function(t){if(t){var r=n.componentData;e.componentDraggable(t,r)}}})),r.createElement("div",null,n.displayName))})))}},{key:"element",get:function(){return this.toolbarElement}}])&&c(n.prototype,i),s&&c(n,s),t}(r.Component);t.ComponentPanel=s,s.componentIndexName="data-component-index"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MasterPage=t.MasterPageContext=t.MasterPageName=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.MasterPageName="MasterPage";var p=r.createContext({master:null});t.MasterPageContext=p;var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e))).childComponents={},n.state={},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){console.assert(null!=this);var e=this.props.children;return r.createElement(p.Provider,{value:{master:this}},e)}}])&&i(n.prototype,o),a&&i(n,a),t}(r.Component);t.MasterPage=s,o.Component.register("MasterPage",s,{container:!1})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"guid",{enumerable:!0,get:function(){return r.guid}}),t.constants=t.ComponentTypes=void 0;var r=n(8);t.ComponentTypes={Text:"Text",PageView:"PageView",PlaceHolder:"PlaceHolder"};t.constants={componentsDir:"components",connectorElementClassName:"component-container",componentTypeName:"data-component-name",componentData:"component-data",componentPosition:"component-position"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPanel=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(14),a=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,l(t).call(this,e))).state={componentDatas:[]},n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this,t=this.props.empty;return t=t||r.createElement("div",{className:"empty"},"暂无可用的属性"),r.createElement("div",{className:"".concat(a.classNames.editorPanel," ").concat(this.props.className||""),ref:function(t){return e.element=t||e.element}},r.createElement(o.PropertyEditor,{ref:function(t){return e.editor=t||e.editor},empty:t,customRender:this.props.customRender}))}},{key:"designer",get:function(){return this._designer}}])&&c(n.prototype,i),s&&c(n,s),t}(r.Component);t.EditorPanel=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=t.PropertyEditor=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(2),a=n(4),i=n(1),c=n(6);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return p(this,t),(n=m(this,d(t).call(this,e)))._element=null,n.state={},n}return y(t,e),f(t,[{key:"getEditors",value:function(e){var t=this;if(null==e)return[];for(var n=[],a=e.selectedComponents,i=function(e){var t=a[e],r=o.Component.getPropEditors(t);if(0==e)n=r||[];else{var i=[];n.forEach((function(e){r.forEach((function(t){var n=e.propName,r=t.propName;e.editorType==t.editorType&&n==r&&i.push(e)}))})),n=i}},c=0;c<a.length;c++)i(c);var u={};for(c=0;c<a.length;c++){var p=a[c],s=Object.assign({},p.props);if(delete s.children,0==c)u=s;else{var f={};for(var m in u)u[m]==s[m]&&(f[m]=s[m]);u=f}}for(var d=[],y=function(o){var i=n[o],c=i.propName,p=i.editorType,s={value:t.propValue(c,u),editComponents:a,updateComponentProp:function(t){var n=a.map((function(e){return{componentId:e.id,propName:i.propName,value:t}}));e.updateComponentProps.apply(e,l(n))}},f=r.createElement(p,s);d.push({prop:i.propName,editor:f,group:i.group})},h=0;h<n.length;h++)y(h);return d}},{key:"propValue",value:function(e,t){if(!e)throw i.Errors.argumentNull("propName");if(!t)throw i.Errors.argumentNull("props");for(var n=e.split("."),r=t,o=0;o<n.length;o++)if(null==(r=r[n[o]]))return null;return r}},{key:"render",value:function(){var e=this;return r.createElement(c.DesignerContext.Consumer,null,(function(t){var n=t.designer;if(null==n)return null;var o=e.getEditors(n);if(0==o.length){var i=e.props.empty;return r.createElement("div",{className:"text-center"},i)}if(e.props.customRender){var c=o.map((function(e){return Object.assign({displayName:a.proptDisplayNames[e.prop]||e.prop},e)})),u=e.props.customRender(n.selectedComponents,c);if(null!=u)return u}for(var l=[],p=function(e){var t=o[e].group||"",n=l.filter((function(e){return e.group==t}))[0];null==n&&(n={group:o[e].group,editors:[]},l.push(n)),n.editors.push({prop:o[e].prop,editor:o[e].editor})},s=0;s<o.length;s++)p(s);return l.map((function(e){return r.createElement("div",{key:e.group,className:"panel panel-default"},e.group?r.createElement("div",{className:"panel-heading"},a.proptDisplayNames[e.group]||e.group):null,r.createElement("div",{className:"panel-body"},e.editors.map((function(e,t){return r.createElement("div",{key:e.prop,className:"form-group clearfix"},r.createElement("label",null,a.proptDisplayNames[e.prop]||e.prop),r.createElement("div",{className:"control"},r.createElement(g,null,e.editor)))}))))}))}))}},{key:"element",get:function(){return this._element}}]),t}(r.Component);t.PropertyEditor=v,v.contextType=c.DesignerContext;var g=function(e){function t(e){var n;return p(this,t),(n=m(this,d(t).call(this,e))).state={},n}return y(t,e),f(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e})}},{key:"render",value:function(){var e=(this.state||{}).error;return e?r.createElement("div",{className:"error"},r.createElement("div",null,e.message),r.createElement("div",null,e.stack)):this.props.children}}]),t}(r.Component);t.ErrorBoundary=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextInput=t.PropEditor=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(i,c)}u((r=r.apply(e,t||[])).next())}))},m=function(e){function t(e){return a(this,t),u(this,l(t).call(this,e))}return p(t,e),c(t,null,[{key:"dropdown",value:function(e,t){return y(e,t)}},{key:"textInput",value:function(){return d}}]),t}(r.Component);t.PropEditor=m;var d=function(e){function t(){return a(this,t),u(this,l(t).apply(this,arguments))}return p(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props.value;return r.createElement("input",{className:"form-control",value:t||"",onChange:function(t){e.props.updateComponentProp(t.target.value)}})}}]),t}(m);function y(e,t){var n,o=[];if(null==t&&Array.isArray(e)){t=e.length>0&&"number"==typeof e[0]?"number":"string";for(var i=0;i<e.length;i++)o[i]={text:e[i],value:e[i]}}else if(null==t){t="string";for(var s=Object.getOwnPropertyNames(e),d=0;d<s.length;d++)o[d]={text:e[s[d]],value:s[d]}}else Array.isArray(e)?o=e:n=e;return function(e){function i(e){var t;return a(this,i),(t=u(this,l(i).call(this,e))).state={},t}return p(i,e),c(i,[{key:"componentDidMount",value:function(){return f(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,n;case 3:t=e.sent,this.setState({items:t});case 5:case"end":return e.stop()}}),e,this)})))}},{key:"render",value:function(){var e=this,n=this.state.items,a=this.props.value;return n=n||o,r.createElement("select",{className:"form-control",value:null==a?"":a,onChange:function(n){var r=n.target.value;if("number"==t){a=/^\d+$/.test(r)?parseInt(r):/^[+-]?\d+(\.\d+)?$/.test(r)?parseFloat(r):null}else a=r;e.props.updateComponentProp(a)}},n.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.text)})))}}]),i}(m)}t.TextInput=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);t.component=r.component},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.component=function(e){return function(e){}}}])}));
//# sourceMappingURL=index.es5.min.js.map
/*!
 * *******************************************************************************
 * 
 * Copyright (C) mai.shu All rights reserved.
 * 
 * JUEYING: HTML 页面设计器
 * 
 * 作者: 寒烟
 * 
 * 个人博客：   http://www.cnblogs.com/ansiboy/
 * GITHUB:     http://github.com/ansiboy
 * QQ 讨论组：  119038574
 * 
 * ******************************************************************************** /
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("React"), require("ReactDOM"));
	else if(typeof define === 'function' && define.amd)
		define(["React", "ReactDOM"], factory);
	else {
		var a = typeof exports === 'object' ? factory(require("React"), require("ReactDOM")) : factory(root["React"], root["ReactDOM"]);
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(window, function(__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_react_dom__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./out/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/jquery.event.drag-2.2.js":
/*!**************************************!*\
  !*** ./lib/jquery.event.drag-2.2.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*! \r\n * jquery.event.drag - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2008-06-04 \r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x\r\n\r\n;(function( $ ){\r\n\r\n// add the jquery instance method\r\n$.fn.drag = function( str, arg, opts ){\r\n\t// figure out the event type\r\n\tvar type = typeof str == \"string\" ? str : \"\",\r\n\t// figure out the event handler...\r\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\r\n\t// fix the event type\r\n\tif ( type.indexOf(\"drag\") !== 0 ) \r\n\t\ttype = \"drag\"+ type;\r\n\t// were options passed\r\n\topts = ( str == fn ? arg : opts ) || {};\r\n\t// trigger or bind event handler\r\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\r\n};\r\n\r\n// local refs (increase compression)\r\nvar $event = $.event, \r\n$special = $event.special,\r\n// configure the drag special event \r\ndrag = $special.drag = {\r\n\t\r\n\t// these are the default settings\r\n\tdefaults: {\r\n\t\twhich: 1, // mouse button pressed to start drag sequence\r\n\t\tdistance: 0, // distance dragged before dragstart\r\n\t\tnot: ':input', // selector to suppress dragging on target elements\r\n\t\thandle: null, // selector to match handle target elements\r\n\t\trelative: false, // true to use \"position\", false to use \"offset\"\r\n\t\tdrop: true, // false to suppress drop events, true or selector to allow\r\n\t\tclick: false // false to suppress click events after dragend (no proxy)\r\n\t},\r\n\t\r\n\t// the key name for stored drag data\r\n\tdatakey: \"dragdata\",\r\n\t\r\n\t// prevent bubbling for better performance\r\n\tnoBubble: true,\r\n\t\r\n\t// count bound related events\r\n\tadd: function( obj ){ \r\n\t\t// read the interaction data\r\n\t\tvar data = $.data( this, drag.datakey ),\r\n\t\t// read any passed options \r\n\t\topts = obj.data || {};\r\n\t\t// count another realted event\r\n\t\tdata.related += 1;\r\n\t\t// extend data options bound with this event\r\n\t\t// don't iterate \"opts\" in case it is a node \r\n\t\t$.each( drag.defaults, function( key, def ){\r\n\t\t\tif ( opts[ key ] !== undefined )\r\n\t\t\t\tdata[ key ] = opts[ key ];\r\n\t\t});\r\n\t},\r\n\t\r\n\t// forget unbound related events\r\n\tremove: function(){\r\n\t\t$.data( this, drag.datakey ).related -= 1;\r\n\t},\r\n\t\r\n\t// configure interaction, capture settings\r\n\tsetup: function(){\r\n\t\t// check for related events\r\n\t\tif ( $.data( this, drag.datakey ) ) \r\n\t\t\treturn;\r\n\t\t// initialize the drag data with copied defaults\r\n\t\tvar data = $.extend({ related:0 }, drag.defaults );\r\n\t\t// store the interaction data\r\n\t\t$.data( this, drag.datakey, data );\r\n\t\t// bind the mousedown event, which starts drag interactions\r\n\t\t$event.add( this, \"touchstart mousedown\", drag.init, data );\r\n\t\t// prevent image dragging in IE...\r\n\t\tif ( this.attachEvent ) \r\n\t\t\tthis.attachEvent(\"ondragstart\", drag.dontstart ); \r\n\t},\r\n\t\r\n\t// destroy configured interaction\r\n\tteardown: function(){\r\n\t\tvar data = $.data( this, drag.datakey ) || {};\r\n\t\t// check for related events\r\n\t\tif ( data.related ) \r\n\t\t\treturn;\r\n\t\t// remove the stored data\r\n\t\t$.removeData( this, drag.datakey );\r\n\t\t// remove the mousedown event\r\n\t\t$event.remove( this, \"touchstart mousedown\", drag.init );\r\n\t\t// enable text selection\r\n\t\tdrag.textselect( true ); \r\n\t\t// un-prevent image dragging in IE...\r\n\t\tif ( this.detachEvent ) \r\n\t\t\tthis.detachEvent(\"ondragstart\", drag.dontstart ); \r\n\t},\r\n\t\t\r\n\t// initialize the interaction\r\n\tinit: function( event ){ \r\n\t\t// sorry, only one touch at a time\r\n\t\tif ( drag.touched ) \r\n\t\t\treturn;\r\n\t\t// the drag/drop interaction data\r\n\t\tvar dd = event.data, results;\r\n\t\t// check the which directive\r\n\t\tif ( event.which != 0 && dd.which > 0 && event.which != dd.which ) \r\n\t\t\treturn; \r\n\t\t// check for suppressed selector\r\n\t\tif ( $( event.target ).is( dd.not ) ) \r\n\t\t\treturn;\r\n\t\t// check for handle selector\r\n\t\tif ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length ) \r\n\t\t\treturn;\r\n\r\n\t\tdrag.touched = event.type == 'touchstart' ? this : null;\r\n\t\tdd.propagates = 1;\r\n\t\tdd.mousedown = this;\r\n\t\tdd.interactions = [ drag.interaction( this, dd ) ];\r\n\t\tdd.target = event.target;\r\n\t\tdd.pageX = event.pageX;\r\n\t\tdd.pageY = event.pageY;\r\n\t\tdd.dragging = null;\r\n\t\t// handle draginit event... \r\n\t\tresults = drag.hijack( event, \"draginit\", dd );\r\n\t\t// early cancel\r\n\t\tif ( !dd.propagates )\r\n\t\t\treturn;\r\n\t\t// flatten the result set\r\n\t\tresults = drag.flatten( results );\r\n\t\t// insert new interaction elements\r\n\t\tif ( results && results.length ){\r\n\t\t\tdd.interactions = [];\r\n\t\t\t$.each( results, function(){\r\n\t\t\t\tdd.interactions.push( drag.interaction( this, dd ) );\r\n\t\t\t});\r\n\t\t}\r\n\t\t// remember how many interactions are propagating\r\n\t\tdd.propagates = dd.interactions.length;\r\n\t\t// locate and init the drop targets\r\n\t\tif ( dd.drop !== false && $special.drop ) \r\n\t\t\t$special.drop.handler( event, dd );\r\n\t\t// disable text selection\r\n\t\tdrag.textselect( false ); \r\n\t\t// bind additional events...\r\n\t\tif ( drag.touched )\r\n\t\t\t$event.add( drag.touched, \"touchmove touchend\", drag.handler, dd );\r\n\t\telse \r\n\t\t\t$event.add( document, \"mousemove mouseup\", drag.handler, dd );\r\n\t\t// helps prevent text selection or scrolling\r\n\t\tif ( !drag.touched || dd.live )\r\n\t\t\treturn false;\r\n\t},\t\r\n\t\r\n\t// returns an interaction object\r\n\tinteraction: function( elem, dd ){\r\n\t\tvar offset = $( elem )[ dd.relative ? \"position\" : \"offset\" ]() || { top:0, left:0 };\r\n\t\treturn {\r\n\t\t\tdrag: elem, \r\n\t\t\tcallback: new drag.callback(), \r\n\t\t\tdroppable: [],\r\n\t\t\toffset: offset\r\n\t\t};\r\n\t},\r\n\t\r\n\t// handle drag-releatd DOM events\r\n\thandler: function( event ){ \r\n\t\t// read the data before hijacking anything\r\n\t\tvar dd = event.data;\t\r\n\t\t// handle various events\r\n\t\tswitch ( event.type ){\r\n\t\t\t// mousemove, check distance, start dragging\r\n\t\t\tcase !dd.dragging && 'touchmove': \r\n\t\t\t\tevent.preventDefault();\r\n\t\t\tcase !dd.dragging && 'mousemove':\r\n\t\t\t\t//  drag tolerance, x� + y� = distance�\r\n\t\t\t\tif ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) ) \r\n\t\t\t\t\tbreak; // distance tolerance not reached\r\n\t\t\t\tevent.target = dd.target; // force target from \"mousedown\" event (fix distance issue)\r\n\t\t\t\tdrag.hijack( event, \"dragstart\", dd ); // trigger \"dragstart\"\r\n\t\t\t\tif ( dd.propagates ) // \"dragstart\" not rejected\r\n\t\t\t\t\tdd.dragging = true; // activate interaction\r\n\t\t\t// mousemove, dragging\r\n\t\t\tcase 'touchmove':\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tif ( dd.dragging ){\r\n\t\t\t\t\t// trigger \"drag\"\t\t\r\n\t\t\t\t\tdrag.hijack( event, \"drag\", dd );\r\n\t\t\t\t\tif ( dd.propagates ){\r\n\t\t\t\t\t\t// manage drop events\r\n\t\t\t\t\t\tif ( dd.drop !== false && $special.drop )\r\n\t\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"dropstart\", \"dropend\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak; // \"drag\" not rejected, stop\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.type = \"mouseup\"; // helps \"drop\" handler behave\r\n\t\t\t\t}\r\n\t\t\t// mouseup, stop dragging\r\n\t\t\tcase 'touchend': \r\n\t\t\tcase 'mouseup': \r\n\t\t\tdefault:\r\n\t\t\t\tif ( drag.touched )\r\n\t\t\t\t\t$event.remove( drag.touched, \"touchmove touchend\", drag.handler ); // remove touch events\r\n\t\t\t\telse \r\n\t\t\t\t\t$event.remove( document, \"mousemove mouseup\", drag.handler ); // remove page events\t\r\n\t\t\t\tif ( dd.dragging ){\r\n\t\t\t\t\tif ( dd.drop !== false && $special.drop )\r\n\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"drop\"\r\n\t\t\t\t\tdrag.hijack( event, \"dragend\", dd ); // trigger \"dragend\"\t\r\n\t\t\t\t}\r\n\t\t\t\tdrag.textselect( true ); // enable text selection\r\n\t\t\t\t// if suppressing click events...\r\n\t\t\t\tif ( dd.click === false && dd.dragging )\r\n\t\t\t\t\t$.data( dd.mousedown, \"suppress.click\", new Date().getTime() + 5 );\r\n\t\t\t\tdd.dragging = drag.touched = false; // deactivate element\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t// re-use event object for custom events\r\n\thijack: function( event, type, dd, x, elem ){\r\n\t\t// not configured\r\n\t\tif ( !dd ) \r\n\t\t\treturn;\r\n\t\t// remember the original event and type\r\n\t\tvar orig = { event:event.originalEvent, type:event.type },\r\n\t\t// is the event drag related or drog related?\r\n\t\tmode = type.indexOf(\"drop\") ? \"drag\" : \"drop\",\r\n\t\t// iteration vars\r\n\t\tresult, i = x || 0, ia, $elems, callback,\r\n\t\tlen = !isNaN( x ) ? x : dd.interactions.length;\r\n\t\t// modify the event type\r\n\t\tevent.type = type;\r\n\t\t// remove the original event\r\n\t\tevent.originalEvent = null;\r\n\t\t// initialize the results\r\n\t\tdd.results = [];\r\n\t\t// handle each interacted element\r\n\t\tdo if ( ia = dd.interactions[ i ] ){\r\n\t\t\t// validate the interaction\r\n\t\t\tif ( type !== \"dragend\" && ia.cancelled )\r\n\t\t\t\tcontinue;\r\n\t\t\t// set the dragdrop properties on the event object\r\n\t\t\tcallback = drag.properties( event, dd, ia );\r\n\t\t\t// prepare for more results\r\n\t\t\tia.results = [];\r\n\t\t\t// handle each element\r\n\t\t\t$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){\r\n\t\t\t\t// identify drag or drop targets individually\r\n\t\t\t\tcallback.target = subject;\r\n\t\t\t\t// force propagtion of the custom event\r\n\t\t\t\tevent.isPropagationStopped = function(){ return false; };\r\n\t\t\t\t// handle the event\t\r\n\t\t\t\tresult = subject ? $event.dispatch.call( subject, event, callback ) : null;\r\n\t\t\t\t// stop the drag interaction for this element\r\n\t\t\t\tif ( result === false ){\r\n\t\t\t\t\tif ( mode == \"drag\" ){\r\n\t\t\t\t\t\tia.cancelled = true;\r\n\t\t\t\t\t\tdd.propagates -= 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( type == \"drop\" ){\r\n\t\t\t\t\t\tia[ mode ][p] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// assign any dropinit elements\r\n\t\t\t\telse if ( type == \"dropinit\" )\r\n\t\t\t\t\tia.droppable.push( drag.element( result ) || subject );\r\n\t\t\t\t// accept a returned proxy element \r\n\t\t\t\tif ( type == \"dragstart\" )\r\n\t\t\t\t\tia.proxy = $( drag.element( result ) || ia.drag )[0];\r\n\t\t\t\t// remember this result\t\r\n\t\t\t\tia.results.push( result );\r\n\t\t\t\t// forget the event result, for recycling\r\n\t\t\t\tdelete event.result;\r\n\t\t\t\t// break on cancelled handler\r\n\t\t\t\tif ( type !== \"dropinit\" )\r\n\t\t\t\t\treturn result;\r\n\t\t\t});\t\r\n\t\t\t// flatten the results\t\r\n\t\t\tdd.results[ i ] = drag.flatten( ia.results );\t\r\n\t\t\t// accept a set of valid drop targets\r\n\t\t\tif ( type == \"dropinit\" )\r\n\t\t\t\tia.droppable = drag.flatten( ia.droppable );\r\n\t\t\t// locate drop targets\r\n\t\t\tif ( type == \"dragstart\" && !ia.cancelled )\r\n\t\t\t\tcallback.update(); \r\n\t\t}\r\n\t\twhile ( ++i < len )\r\n\t\t// restore the original event & type\r\n\t\tevent.type = orig.type;\r\n\t\tevent.originalEvent = orig.event;\r\n\t\t// return all handler results\r\n\t\treturn drag.flatten( dd.results );\r\n\t},\r\n\t\t\r\n\t// extend the callback object with drag/drop properties...\r\n\tproperties: function( event, dd, ia ){\t\t\r\n\t\tvar obj = ia.callback;\r\n\t\t// elements\r\n\t\tobj.drag = ia.drag;\r\n\t\tobj.proxy = ia.proxy || ia.drag;\r\n\t\t// starting mouse position\r\n\t\tobj.startX = dd.pageX;\r\n\t\tobj.startY = dd.pageY;\r\n\t\t// current distance dragged\r\n\t\tobj.deltaX = event.pageX - dd.pageX;\r\n\t\tobj.deltaY = event.pageY - dd.pageY;\r\n\t\t// original element position\r\n\t\tobj.originalX = ia.offset.left;\r\n\t\tobj.originalY = ia.offset.top;\r\n\t\t// adjusted element position\r\n\t\tobj.offsetX = obj.originalX + obj.deltaX; \r\n\t\tobj.offsetY = obj.originalY + obj.deltaY;\r\n\t\t// assign the drop targets information\r\n\t\tobj.drop = drag.flatten( ( ia.drop || [] ).slice() );\r\n\t\tobj.available = drag.flatten( ( ia.droppable || [] ).slice() );\r\n\t\treturn obj;\t\r\n\t},\r\n\t\r\n\t// determine is the argument is an element or jquery instance\r\n\telement: function( arg ){\r\n\t\tif ( arg && ( arg.jquery || arg.nodeType == 1 ) )\r\n\t\t\treturn arg;\r\n\t},\r\n\t\r\n\t// flatten nested jquery objects and arrays into a single dimension array\r\n\tflatten: function( arr ){\r\n\t\treturn $.map( arr, function( member ){\r\n\t\t\treturn member && member.jquery ? $.makeArray( member ) : \r\n\t\t\t\tmember && member.length ? drag.flatten( member ) : member;\r\n\t\t});\r\n\t},\r\n\t\r\n\t// toggles text selection attributes ON (true) or OFF (false)\r\n\ttextselect: function( bool ){ \r\n\t\t$( document )[ bool ? \"unbind\" : \"bind\" ](\"selectstart\", drag.dontstart )\r\n\t\t\t.css(\"MozUserSelect\", bool ? \"\" : \"none\" );\r\n\t\t// .attr(\"unselectable\", bool ? \"off\" : \"on\" )\r\n\t\tdocument.unselectable = bool ? \"off\" : \"on\"; \r\n\t},\r\n\t\r\n\t// suppress \"selectstart\" and \"ondragstart\" events\r\n\tdontstart: function(){ \r\n\t\treturn false; \r\n\t},\r\n\t\r\n\t// a callback instance contructor\r\n\tcallback: function(){}\r\n\t\r\n};\r\n\r\n// callback methods\r\ndrag.callback.prototype = {\r\n\tupdate: function(){\r\n\t\tif ( $special.drop && this.available.length )\r\n\t\t\t$.each( this.available, function( i ){\r\n\t\t\t\t$special.drop.locate( this, i );\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\n// patch $.event.$dispatch to allow suppressing clicks\r\nvar $dispatch = $event.dispatch;\r\n$event.dispatch = function( event ){\r\n\tif ( $.data( this, \"suppress.\"+ event.type ) - new Date().getTime() > 0 ){\r\n\t\t$.removeData( this, \"suppress.\"+ event.type );\r\n\t\treturn;\r\n\t}\r\n\treturn $dispatch.apply( this, arguments );\r\n};\r\n\r\n// event fix hooks for touch events...\r\nvar touchHooks = \r\n$event.fixHooks.touchstart = \r\n$event.fixHooks.touchmove = \r\n$event.fixHooks.touchend =\r\n$event.fixHooks.touchcancel = {\r\n\tprops: \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\r\n\tfilter: function( event, orig ) {\r\n\t\tif ( orig ){\r\n\t\t\tvar touched = ( orig.touches && orig.touches[0] )\r\n\t\t\t\t|| ( orig.changedTouches && orig.changedTouches[0] )\r\n\t\t\t\t|| null; \r\n\t\t\t// iOS webkit: touchstart, touchmove, touchend\r\n\t\t\tif ( touched ) \r\n\t\t\t\t$.each( touchHooks.props, function( i, prop ){\r\n\t\t\t\t\tevent[ prop ] = touched[ prop ];\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n};\r\n\r\n// share the same special event configuration with related events...\r\n$special.draginit = $special.dragstart = $special.dragend = drag;\r\n\r\n})( jQuery );\n\n//# sourceURL=webpack:///./lib/jquery.event.drag-2.2.js?");

/***/ }),

/***/ "./lib/jquery.event.drag.live-2.2.js":
/*!*******************************************!*\
  !*** ./lib/jquery.event.drag.live-2.2.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*! \r\n * jquery.event.drag.live - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2010-06-07\r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x, event.drag 2.2\r\n\r\n;(function( $ ){\r\n\t\r\n// local refs (increase compression)\r\nvar $event = $.event,\r\n// ref the special event config\r\ndrag = $event.special.drag,\r\n// old drag event add method\r\norigadd = drag.add,\r\n// old drag event teradown method\r\norigteardown = drag.teardown;\r\n\r\n// allow events to bubble for delegation\r\ndrag.noBubble = false;\r\n\r\n// the namespace for internal live events\r\ndrag.livekey = \"livedrag\";\r\n\r\n// new drop event add method\r\ndrag.add = function( obj ){ \r\n\t// call the old method\r\n\torigadd.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drag.datakey );\r\n\t// bind the live \"draginit\" delegator\r\n\tif ( !data.live && obj.selector ){\r\n\t\tdata.live = true;\r\n\t\t$event.add( this, \"draginit.\"+ drag.livekey, drag.delegate );\r\n\t}\r\n};\r\n\r\n// new drop event teardown method\r\ndrag.teardown = function(){ \r\n\t// call the old method\r\n\torigteardown.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drag.datakey ) || {};\r\n\t// bind the live \"draginit\" delegator\r\n\tif ( data.live ){\r\n\t\t// remove the \"live\" delegation\r\n\t\t$event.remove( this, \"draginit.\"+ drag.livekey, drag.delegate );\r\n\t\tdata.live = false;\r\n\t}\r\n};\r\n\r\n// identify potential delegate elements\r\ndrag.delegate = function( event ){\r\n\t// local refs\r\n\tvar elems = [], target, \r\n\t// element event structure\r\n\tevents = $.data( this, \"events\" ) || {};\r\n\t// query live events\r\n\t$.each( events || [], function( key, arr ){\r\n\t\t// no event type matches\r\n\t\tif ( key.indexOf(\"drag\") !== 0 )\r\n\t\t\treturn;\r\n\t\t$.each( arr || [], function( i, obj ){\r\n\t\t\t// locate the element to delegate\r\n\t\t\ttarget = $( event.target ).closest( obj.selector, event.currentTarget )[0];\r\n\t\t\t// no element found\r\n\t\t\tif ( !target ) \r\n\t\t\t\treturn;\r\n\t\t\t// add an event handler\r\n\t\t\t$event.add( target, obj.origType+'.'+drag.livekey, obj.origHandler || obj.handler, obj.data );\r\n\t\t\t// remember new elements\r\n\t\t\tif ( $.inArray( target, elems ) < 0 )\r\n\t\t\t\telems.push( target );\t\t\r\n\t\t});\r\n\t});\r\n\t// if there are no elements, break\r\n\tif ( !elems.length ) \r\n\t\treturn false;\r\n\t// return the matched results, and clenup when complete\t\t\r\n\treturn $( elems ).bind(\"dragend.\"+ drag.livekey, function(){\r\n\t\t$event.remove( this, \".\"+ drag.livekey ); // cleanup delegation\r\n\t});\r\n};\r\n\t\r\n})( jQuery );\n\n//# sourceURL=webpack:///./lib/jquery.event.drag.live-2.2.js?");

/***/ }),

/***/ "./lib/jquery.event.drop-2.2.js":
/*!**************************************!*\
  !*** ./lib/jquery.event.drop-2.2.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*! \r\n * jquery.event.drop - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2008-06-04 \r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x, event.drag 2.2\r\n\r\n;(function($){ // secure $ jQuery alias\r\n\r\n// Events: drop, dropstart, dropend\r\n\r\n// add the jquery instance method\r\n$.fn.drop = function( str, arg, opts ){\r\n\t// figure out the event type\r\n\tvar type = typeof str == \"string\" ? str : \"\",\r\n\t// figure out the event handler...\r\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\r\n\t// fix the event type\r\n\tif ( type.indexOf(\"drop\") !== 0 ) \r\n\t\ttype = \"drop\"+ type;\r\n\t// were options passed\r\n\topts = ( str == fn ? arg : opts ) || {};\r\n\t// trigger or bind event handler\r\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\r\n};\r\n\r\n// DROP MANAGEMENT UTILITY\r\n// returns filtered drop target elements, caches their positions\r\n$.drop = function( opts ){ \r\n\topts = opts || {};\r\n\t// safely set new options...\r\n\tdrop.multi = opts.multi === true ? Infinity : \r\n\t\topts.multi === false ? 1 : !isNaN( opts.multi ) ? opts.multi : drop.multi;\r\n\tdrop.delay = opts.delay || drop.delay;\r\n\tdrop.tolerance = $.isFunction( opts.tolerance ) ? opts.tolerance : \r\n\t\topts.tolerance === null ? null : drop.tolerance;\r\n\tdrop.mode = opts.mode || drop.mode || 'intersect';\r\n};\r\n\r\n// local refs (increase compression)\r\nvar $event = $.event, \r\n$special = $event.special,\r\n// configure the drop special event\r\ndrop = $.event.special.drop = {\r\n\r\n\t// these are the default settings\r\n\tmulti: 1, // allow multiple drop winners per dragged element\r\n\tdelay: 20, // async timeout delay\r\n\tmode: 'overlap', // drop tolerance mode\r\n\t\t\r\n\t// internal cache\r\n\ttargets: [], \r\n\t\r\n\t// the key name for stored drop data\r\n\tdatakey: \"dropdata\",\r\n\t\t\r\n\t// prevent bubbling for better performance\r\n\tnoBubble: true,\r\n\t\r\n\t// count bound related events\r\n\tadd: function( obj ){ \r\n\t\t// read the interaction data\r\n\t\tvar data = $.data( this, drop.datakey );\r\n\t\t// count another realted event\r\n\t\tdata.related += 1;\r\n\t},\r\n\t\r\n\t// forget unbound related events\r\n\tremove: function(){\r\n\t\t$.data( this, drop.datakey ).related -= 1;\r\n\t},\r\n\t\r\n\t// configure the interactions\r\n\tsetup: function(){\r\n\t\t// check for related events\r\n\t\tif ( $.data( this, drop.datakey ) ) \r\n\t\t\treturn;\r\n\t\t// initialize the drop element data\r\n\t\tvar data = { \r\n\t\t\trelated: 0,\r\n\t\t\tactive: [],\r\n\t\t\tanyactive: 0,\r\n\t\t\twinner: 0,\r\n\t\t\tlocation: {}\r\n\t\t};\r\n\t\t// store the drop data on the element\r\n\t\t$.data( this, drop.datakey, data );\r\n\t\t// store the drop target in internal cache\r\n\t\tdrop.targets.push( this );\r\n\t},\r\n\t\r\n\t// destroy the configure interaction\t\r\n\tteardown: function(){ \r\n\t\tvar data = $.data( this, drop.datakey ) || {};\r\n\t\t// check for related events\r\n\t\tif ( data.related ) \r\n\t\t\treturn;\r\n\t\t// remove the stored data\r\n\t\t$.removeData( this, drop.datakey );\r\n\t\t// reference the targeted element\r\n\t\tvar element = this;\r\n\t\t// remove from the internal cache\r\n\t\tdrop.targets = $.grep( drop.targets, function( target ){ \r\n\t\t\treturn ( target !== element ); \r\n\t\t});\r\n\t},\r\n\t\r\n\t// shared event handler\r\n\thandler: function( event, dd ){ \r\n\t\t// local vars\r\n\t\tvar results, $targets;\r\n\t\t// make sure the right data is available\r\n\t\tif ( !dd ) \r\n\t\t\treturn;\r\n\t\t// handle various events\r\n\t\tswitch ( event.type ){\r\n\t\t\t// draginit, from $.event.special.drag\r\n\t\t\tcase 'mousedown': // DROPINIT >>\r\n\t\t\tcase 'touchstart': // DROPINIT >>\r\n\t\t\t\t// collect and assign the drop targets\r\n\t\t\t\t$targets =  $( drop.targets );\r\n\t\t\t\tif ( typeof dd.drop == \"string\" )\r\n\t\t\t\t\t$targets = $targets.filter( dd.drop );\r\n\t\t\t\t// reset drop data winner properties\r\n\t\t\t\t$targets.each(function(){\r\n\t\t\t\t\tvar data = $.data( this, drop.datakey );\r\n\t\t\t\t\tdata.active = [];\r\n\t\t\t\t\tdata.anyactive = 0;\r\n\t\t\t\t\tdata.winner = 0;\r\n\t\t\t\t});\r\n\t\t\t\t// set available target elements\r\n\t\t\t\tdd.droppable = $targets;\r\n\t\t\t\t// activate drop targets for the initial element being dragged\r\n\t\t\t\t$special.drag.hijack( event, \"dropinit\", dd ); \r\n\t\t\t\tbreak;\r\n\t\t\t// drag, from $.event.special.drag\r\n\t\t\tcase 'mousemove': // TOLERATE >>\r\n\t\t\tcase 'touchmove': // TOLERATE >>\r\n\t\t\t\tdrop.event = event; // store the mousemove event\r\n\t\t\t\tif ( !drop.timer )\r\n\t\t\t\t\t// monitor drop targets\r\n\t\t\t\t\tdrop.tolerate( dd ); \r\n\t\t\t\tbreak;\r\n\t\t\t// dragend, from $.event.special.drag\r\n\t\t\tcase 'mouseup': // DROP >> DROPEND >>\r\n\t\t\tcase 'touchend': // DROP >> DROPEND >>\r\n\t\t\t\tdrop.timer = clearTimeout( drop.timer ); // delete timer\t\r\n\t\t\t\tif ( dd.propagates ){\r\n\t\t\t\t\t$special.drag.hijack( event, \"drop\", dd ); \r\n\t\t\t\t\t$special.drag.hijack( event, \"dropend\", dd ); \r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t// returns the location positions of an element\r\n\tlocate: function( elem, index ){ \r\n\t\tvar data = $.data( elem, drop.datakey ),\r\n\t\t$elem = $( elem ), \r\n\t\tposi = $elem.offset() || {}, \r\n\t\theight = $elem.outerHeight(), \r\n\t\twidth = $elem.outerWidth(),\r\n\t\tlocation = { \r\n\t\t\telem: elem, \r\n\t\t\twidth: width, \r\n\t\t\theight: height,\r\n\t\t\ttop: posi.top, \r\n\t\t\tleft: posi.left, \r\n\t\t\tright: posi.left + width, \r\n\t\t\tbottom: posi.top + height\r\n\t\t};\r\n\t\t// drag elements might not have dropdata\r\n\t\tif ( data ){\r\n\t\t\tdata.location = location;\r\n\t\t\tdata.index = index;\r\n\t\t\tdata.elem = elem;\r\n\t\t}\r\n\t\treturn location;\r\n\t},\r\n\t\r\n\t// test the location positions of an element against another OR an X,Y coord\r\n\tcontains: function( target, test ){ // target { location } contains test [x,y] or { location }\r\n\t\treturn ( ( test[0] || test.left ) >= target.left && ( test[0] || test.right ) <= target.right\r\n\t\t\t&& ( test[1] || test.top ) >= target.top && ( test[1] || test.bottom ) <= target.bottom ); \r\n\t},\r\n\t\r\n\t// stored tolerance modes\r\n\tmodes: { // fn scope: \"$.event.special.drop\" object \r\n\t\t// target with mouse wins, else target with most overlap wins\r\n\t\t'intersect': function( event, proxy, target ){\r\n\t\t\treturn this.contains( target, [ event.pageX, event.pageY ] ) ? // check cursor\r\n\t\t\t\t1e9 : this.modes.overlap.apply( this, arguments ); // check overlap\r\n\t\t},\r\n\t\t// target with most overlap wins\t\r\n\t\t'overlap': function( event, proxy, target ){\r\n\t\t\t// calculate the area of overlap...\r\n\t\t\treturn Math.max( 0, Math.min( target.bottom, proxy.bottom ) - Math.max( target.top, proxy.top ) )\r\n\t\t\t\t* Math.max( 0, Math.min( target.right, proxy.right ) - Math.max( target.left, proxy.left ) );\r\n\t\t},\r\n\t\t// proxy is completely contained within target bounds\t\r\n\t\t'fit': function( event, proxy, target ){\r\n\t\t\treturn this.contains( target, proxy ) ? 1 : 0;\r\n\t\t},\r\n\t\t// center of the proxy is contained within target bounds\t\r\n\t\t'middle': function( event, proxy, target ){\r\n\t\t\treturn this.contains( target, [ proxy.left + proxy.width * .5, proxy.top + proxy.height * .5 ] ) ? 1 : 0;\r\n\t\t}\r\n\t},\t\r\n\t\r\n\t// sort drop target cache by by winner (dsc), then index (asc)\r\n\tsort: function( a, b ){\r\n\t\treturn ( b.winner - a.winner ) || ( a.index - b.index );\r\n\t},\r\n\t\t\r\n\t// async, recursive tolerance execution\r\n\ttolerate: function( dd ){\t\t\r\n\t\t// declare local refs\r\n\t\tvar i, drp, drg, data, arr, len, elem,\r\n\t\t// interaction iteration variables\r\n\t\tx = 0, ia, end = dd.interactions.length,\r\n\t\t// determine the mouse coords\r\n\t\txy = [ drop.event.pageX, drop.event.pageY ],\r\n\t\t// custom or stored tolerance fn\r\n\t\ttolerance = drop.tolerance || drop.modes[ drop.mode ];\r\n\t\t// go through each passed interaction...\r\n\t\tdo if ( ia = dd.interactions[x] ){\r\n\t\t\t// check valid interaction\r\n\t\t\tif ( !ia )\r\n\t\t\t\treturn; \r\n\t\t\t// initialize or clear the drop data\r\n\t\t\tia.drop = [];\r\n\t\t\t// holds the drop elements\r\n\t\t\tarr = []; \r\n\t\t\tlen = ia.droppable.length;\r\n\t\t\t// determine the proxy location, if needed\r\n\t\t\tif ( tolerance )\r\n\t\t\t\tdrg = drop.locate( ia.proxy ); \r\n\t\t\t// reset the loop\r\n\t\t\ti = 0;\r\n\t\t\t// loop each stored drop target\r\n\t\t\tdo if ( elem = ia.droppable[i] ){ \r\n\t\t\t\tdata = $.data( elem, drop.datakey );\r\n\t\t\t\tdrp = data.location;\r\n\t\t\t\tif ( !drp ) continue;\r\n\t\t\t\t// find a winner: tolerance function is defined, call it\r\n\t\t\t\tdata.winner = tolerance ? tolerance.call( drop, drop.event, drg, drp ) \r\n\t\t\t\t\t// mouse position is always the fallback\r\n\t\t\t\t\t: drop.contains( drp, xy ) ? 1 : 0; \r\n\t\t\t\tarr.push( data );\t\r\n\t\t\t} while ( ++i < len ); // loop \r\n\t\t\t// sort the drop targets\r\n\t\t\tarr.sort( drop.sort );\t\t\t\r\n\t\t\t// reset the loop\r\n\t\t\ti = 0;\r\n\t\t\t// loop through all of the targets again\r\n\t\t\tdo if ( data = arr[ i ] ){\r\n\t\t\t\t// winners...\r\n\t\t\t\tif ( data.winner && ia.drop.length < drop.multi ){\r\n\t\t\t\t\t// new winner... dropstart\r\n\t\t\t\t\tif ( !data.active[x] && !data.anyactive ){\r\n\t\t\t\t\t\t// check to make sure that this is not prevented\r\n\t\t\t\t\t\tif ( $special.drag.hijack( drop.event, \"dropstart\", dd, x, data.elem )[0] !== false ){ \t\r\n\t\t\t\t\t\t\tdata.active[x] = 1;\r\n\t\t\t\t\t\t\tdata.anyactive += 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if false, it is not a winner\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tdata.winner = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// if it is still a winner\r\n\t\t\t\t\tif ( data.winner )\r\n\t\t\t\t\t\tia.drop.push( data.elem );\r\n\t\t\t\t}\r\n\t\t\t\t// losers... \r\n\t\t\t\telse if ( data.active[x] && data.anyactive == 1 ){\r\n\t\t\t\t\t// former winner... dropend\r\n\t\t\t\t\t$special.drag.hijack( drop.event, \"dropend\", dd, x, data.elem ); \r\n\t\t\t\t\tdata.active[x] = 0;\r\n\t\t\t\t\tdata.anyactive -= 1;\r\n\t\t\t\t}\r\n\t\t\t} while ( ++i < len ); // loop \t\t\r\n\t\t} while ( ++x < end ) // loop\r\n\t\t// check if the mouse is still moving or is idle\r\n\t\tif ( drop.last && xy[0] == drop.last.pageX && xy[1] == drop.last.pageY ) \r\n\t\t\tdelete drop.timer; // idle, don't recurse\r\n\t\telse  // recurse\r\n\t\t\tdrop.timer = setTimeout(function(){ \r\n\t\t\t\tdrop.tolerate( dd ); \r\n\t\t\t}, drop.delay );\r\n\t\t// remember event, to compare idleness\r\n\t\tdrop.last = drop.event; \r\n\t}\r\n\t\r\n};\r\n\r\n// share the same special event configuration with related events...\r\n$special.dropinit = $special.dropstart = $special.dropend = drop;\r\n\r\n})(jQuery); // confine scope\t\n\n//# sourceURL=webpack:///./lib/jquery.event.drop-2.2.js?");

/***/ }),

/***/ "./lib/jquery.event.drop.live-2.2.js":
/*!*******************************************!*\
  !*** ./lib/jquery.event.drop.live-2.2.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*! \r\n * jquery.event.drop.live - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2010-06-07\r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x, event.drag 2.2, event.drop 2.2\r\n\r\n;(function($){ // secure $ jQuery alias\r\n\r\n// local refs (increase compression)\r\nvar $event = $.event,\r\n// ref the drop special event config\r\ndrop = $event.special.drop,\r\n// old drop event add method\r\norigadd = drop.add,\r\n// old drop event teradown method\r\norigteardown = drop.teardown;\r\n\r\n// allow events to bubble for delegation\r\ndrop.noBubble = false;\r\n\r\n// the namespace for internal live events\r\ndrop.livekey = \"livedrop\";\r\n\r\n// new drop event add method\r\ndrop.add = function( obj ){ \r\n\t// call the old method\r\n\torigadd.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drop.datakey );\r\n\t// bind the live \"dropinit\" delegator\r\n\tif ( !data.live && obj.selector ){\r\n\t\tdata.live = true;\r\n\t\t$event.add( this, \"dropinit.\"+ drop.livekey, drop.delegate );\r\n\t}\r\n};\r\n\r\n// new drop event teardown method\r\ndrop.teardown = function(){ \r\n\t// call the old method\r\n\torigteardown.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drop.datakey ) || {};\r\n\t// remove the live \"dropinit\" delegator\r\n\tif ( data.live ){\r\n\t\t// remove the \"live\" delegation\r\n\t\t$event.remove( this, \"dropinit\", drop.delegate );\r\n\t\tdata.live = false;\r\n\t}\r\n};\r\n\r\n// identify potential delegate elements\r\ndrop.delegate = function( event, dd ){\r\n\t// local refs\r\n\tvar elems = [], $targets, \r\n\t// element event structure\r\n\tevents = $.data( this, \"events\" ) || {};\r\n\t// query live events\r\n\t$.each( events || [], function( key, arr ){\r\n\t\t// no event type matches\r\n\t\tif ( key.indexOf(\"drop\") !== 0 )\r\n\t\t\treturn;\r\n\t\t$.each( arr, function( i, obj ){\r\n\t\t\t// locate the elements to delegate\r\n\t\t\t$targets = $( event.currentTarget ).find( obj.selector );\r\n\t\t\t// no element found\r\n\t\t\tif ( !$targets.length ) \r\n\t\t\t\treturn;\r\n\t\t\t// take each target...\r\n\t\t\t$targets.each(function(){\r\n\t\t\t\t// add an event handler\r\n\t\t\t\t$event.add( this, obj.origType +'.'+ drop.livekey, obj.origHandler || obj.handler, obj.data );\r\n\t\t\t\t// remember new elements\r\n\t\t\t\tif ( $.inArray( this, elems ) < 0 )\r\n\t\t\t\t\telems.push( this );\t\r\n\t\t\t});\t\r\n\t\t});\r\n\t});\r\n\t// may not exist when artifically triggering dropinit event\r\n\tif ( dd )\r\n\t\t// clean-up after the interaction ends\r\n\t\t$event.add( dd.drag, \"dragend.\"+drop.livekey, function(){\r\n\t\t\t$.each( elems.concat( this ), function(){\r\n\t\t\t\t$event.remove( this, '.'+ drop.livekey );\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t//drop.delegates.push( elems );\r\n\treturn elems.length ? $( elems ) : false;\r\n};\r\n\r\n})( jQuery ); // confine scope\t\n\n//# sourceURL=webpack:///./lib/jquery.event.drop.live-2.2.js?");

/***/ }),

/***/ "./out/comon.js":
/*!**********************!*\
  !*** ./out/comon.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.constants = {\r\n    componentsDir: 'components',\r\n    connectorElementClassName: 'component-container',\r\n    componentTypeName: 'data-component-name',\r\n    componentData: 'component-data'\r\n};\r\nexports.strings = {};\r\nfunction guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\nexports.guid = guid;\r\nclass Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\nexports.Callback = Callback;\r\n//# sourceMappingURL=comon.js.map\n\n//# sourceURL=webpack:///./out/comon.js?");

/***/ }),

/***/ "./out/component-editor.js":
/*!*********************************!*\
  !*** ./out/component-editor.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/*******************************************************************************\r\n * Copyright (C) maishu All rights reserved.\r\n *\r\n * HTML 页面设计器\r\n *\r\n * 作者: 寒烟\r\n * 日期: 2018/5/30\r\n *\r\n * 个人博客：   http://www.cnblogs.com/ansiboy/\r\n * GITHUB:     http://github.com/ansiboy\r\n * QQ 讨论组：  119038574\r\n *\r\n ********************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(/*! react */ \"react\");\r\nconst component_1 = __webpack_require__(/*! ./component */ \"./out/component.js\");\r\nconst comon_1 = __webpack_require__(/*! ./comon */ \"./out/comon.js\");\r\nconst ReactDOM = __webpack_require__(/*! react-dom */ \"react-dom\");\r\nclass ComponentEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._element = null;\r\n        this.state = { editors: [] };\r\n    }\r\n    componentWillReceiveProps(props) {\r\n        this.setState({\r\n            designer: props.designer,\r\n        });\r\n    }\r\n    getEditors(designer) {\r\n        if (designer == null) {\r\n            return [];\r\n        }\r\n        // 各个控件相同的编辑器\r\n        let commonPropEditorInfos = [];\r\n        let componentDatas = designer.selectedComponents;\r\n        for (let i = 0; i < componentDatas.length; i++) {\r\n            let control = componentDatas[i];\r\n            let className = control.type;\r\n            let propEditorInfos = component_1.Component.getPropEditors(className);\r\n            if (i == 0) {\r\n                commonPropEditorInfos = propEditorInfos || [];\r\n            }\r\n            else {\r\n                let items = [];\r\n                commonPropEditorInfos.forEach(propInfo1 => {\r\n                    propEditorInfos.forEach(propInfo2 => {\r\n                        let propName1 = propInfo1.propNames.join('.');\r\n                        let propName2 = propInfo2.propNames.join('.');\r\n                        if (propInfo1.editorType == propInfo2.editorType && propName1 == propName2) {\r\n                            items.push(propInfo1);\r\n                        }\r\n                    });\r\n                });\r\n                commonPropEditorInfos = items;\r\n            }\r\n        }\r\n        // 各个控件相同的属性值\r\n        let commonFlatProps;\r\n        for (let i = 0; i < componentDatas.length; i++) {\r\n            let control = componentDatas[i];\r\n            let controlProps = Object.assign({}, control.props);\r\n            delete controlProps.children;\r\n            controlProps = this.flatProps(controlProps);\r\n            if (i == 0) {\r\n                commonFlatProps = controlProps;\r\n            }\r\n            else {\r\n                let obj = {};\r\n                for (let key in commonFlatProps) {\r\n                    if (commonFlatProps[key] == controlProps[key])\r\n                        obj[key] = controlProps[key];\r\n                }\r\n                commonFlatProps = obj;\r\n            }\r\n        }\r\n        let editors = [];\r\n        for (let i = 0; i < commonPropEditorInfos.length; i++) {\r\n            let propEditorInfo = commonPropEditorInfos[i];\r\n            let propName = propEditorInfo.propNames[propEditorInfo.propNames.length - 1];\r\n            let editorType = propEditorInfo.editorType;\r\n            let propNames = propEditorInfo.propNames;\r\n            let editor = ReactDOM.render(editorType, {\r\n                value: commonFlatProps[propNames.join('.')],\r\n                onChange: (value) => {\r\n                    for (let i = 0; i < componentDatas.length; i++) {\r\n                        let c = componentDatas[i];\r\n                        console.assert(c.props.id);\r\n                        designer.updateControlProps(c.props.id, propNames, value);\r\n                    }\r\n                }\r\n            });\r\n            editors.push({ prop: propName, editor, group: propEditorInfo.group });\r\n        }\r\n        return editors;\r\n    }\r\n    flatProps(props, baseName) {\r\n        baseName = baseName ? baseName + '.' : '';\r\n        let obj = {};\r\n        for (let key in props) {\r\n            if (typeof props[key] != 'object') {\r\n                obj[baseName + key] = props[key];\r\n            }\r\n            else {\r\n                Object.assign(obj, this.flatProps(props[key], key));\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    render() {\r\n        let { designer } = this.state;\r\n        let editors = this.getEditors(designer);\r\n        if (editors.length == 0) {\r\n            return React.createElement(\"div\", { className: \"text-center\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7684\\u5C5E\\u6027\");\r\n        }\r\n        let groupEditorsArray = [];\r\n        for (let i = 0; i < editors.length; i++) {\r\n            let group = editors[i].group || '';\r\n            let groupEditors = groupEditorsArray.filter(o => o.group == group)[0];\r\n            if (groupEditors == null) {\r\n                groupEditors = { group: editors[i].group, editors: [] };\r\n                groupEditorsArray.push(groupEditors);\r\n            }\r\n            groupEditors.editors.push({ prop: editors[i].prop, editor: editors[i].editor });\r\n        }\r\n        return React.createElement(React.Fragment, null, groupEditorsArray.map((g) => React.createElement(\"div\", { key: g.group, className: \"panel panel-default\" },\r\n            g.group ? React.createElement(\"div\", { className: \"panel-heading\" }, comon_1.strings[g.group] || g.group) : null,\r\n            React.createElement(\"div\", { className: \"panel-body\" }, g.editors.map((o, i) => React.createElement(\"div\", { key: i, className: \"form-group\" },\r\n                React.createElement(\"label\", null, comon_1.strings[o.prop] || o.prop),\r\n                React.createElement(\"div\", { className: \"control\" }, o.editor)))))));\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n}\r\nexports.ComponentEditor = ComponentEditor;\r\n//# sourceMappingURL=component-editor.js.map\n\n//# sourceURL=webpack:///./out/component-editor.js?");

/***/ }),

/***/ "./out/component-toolbar.js":
/*!**********************************!*\
  !*** ./out/component-toolbar.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst component_1 = __webpack_require__(/*! ./component */ \"./out/component.js\");\r\nconst React = __webpack_require__(/*! react */ \"react\");\r\nconst comon_1 = __webpack_require__(/*! ./comon */ \"./out/comon.js\");\r\nconst style_1 = __webpack_require__(/*! ./style */ \"./out/style.js\");\r\nclass ComponentPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componets: [] };\r\n    }\r\n    componentDraggable(toolItemElement, componentData) {\r\n        console.assert(toolItemElement != null);\r\n        toolItemElement.draggable = true;\r\n        toolItemElement.addEventListener('dragstart', function (ev) {\r\n            componentData.props = componentData.props || {};\r\n            ev.dataTransfer.setData(comon_1.constants.componentData, JSON.stringify(componentData));\r\n            ev.dataTransfer.setData('mousePosition', JSON.stringify({ x: ev.offsetX, y: ev.offsetY }));\r\n        });\r\n    }\r\n    setComponets(componets) {\r\n        this.setState({ componets });\r\n    }\r\n    static getComponentData(dataTransfer) {\r\n        var str = dataTransfer.getData(comon_1.constants.componentData);\r\n        if (!str)\r\n            return;\r\n        return JSON.parse(str);\r\n    }\r\n    /** 获取光标在图标内的位置 */\r\n    static mouseInnerPosition(dataTransfer) {\r\n        let str = dataTransfer.getData('mousePosition');\r\n        if (!str)\r\n            return;\r\n        return JSON.parse(str);\r\n    }\r\n    render() {\r\n        let props = Object.assign({}, this.props);\r\n        let componets = this.state.componets || [];\r\n        return React.createElement(component_1.DesignerContext.Consumer, null, context => {\r\n            this.designer = context.designer;\r\n            return React.createElement(\"div\", Object.assign({}, props, { className: `${style_1.classNames.componentPanel} panel panel-primary` }),\r\n                React.createElement(\"div\", { className: \"panel-heading\" }, \"\\u5DE5\\u5177\\u680F\"),\r\n                React.createElement(\"div\", { className: \"panel-body\" },\r\n                    React.createElement(\"ul\", { ref: (e) => this.toolbarElement = this.toolbarElement || e }, componets.map((c, i) => {\r\n                        let props = { key: i };\r\n                        return React.createElement(\"li\", Object.assign({}, props),\r\n                            React.createElement(\"div\", { className: \"btn-link\" },\r\n                                React.createElement(\"i\", { className: c.icon, style: { fontSize: 44, color: 'black' }, ref: e => {\r\n                                        if (!e)\r\n                                            return;\r\n                                        let ctrl = c.componentData;\r\n                                        this.componentDraggable(e, ctrl);\r\n                                    } })),\r\n                            React.createElement(\"div\", null, c.displayName));\r\n                    }))));\r\n        });\r\n    }\r\n}\r\nexports.ComponentPanel = ComponentPanel;\r\n//# sourceMappingURL=component-toolbar.js.map\n\n//# sourceURL=webpack:///./out/component-toolbar.js?");

/***/ }),

/***/ "./out/component-wrapper.js":
/*!**********************************!*\
  !*** ./out/component-wrapper.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst component_1 = __webpack_require__(/*! ./component */ \"./out/component.js\");\r\nconst React = __webpack_require__(/*! react */ \"react\");\r\nconst comon_1 = __webpack_require__(/*! ./comon */ \"./out/comon.js\");\r\nconst component_toolbar_1 = __webpack_require__(/*! ./component-toolbar */ \"./out/component-toolbar.js\");\r\nconst style_1 = __webpack_require__(/*! ./style */ \"./out/style.js\");\r\n/**\r\n * 组件包装器，对组件进行包装，实现组件设计时的行为。\r\n * 1. 组件的移动\r\n * 2. 组件的拖放\r\n */\r\nclass ComponentWrapper extends React.Component {\r\n    designtimeBehavior(element, attr) {\r\n        if (!element)\r\n            throw Errors.argumentNull('element');\r\n        if (!attr)\r\n            throw Errors.argumentNull('args');\r\n        if (element.getAttribute('data-behavior')) {\r\n            return;\r\n        }\r\n        element.setAttribute('data-behavior', 'behavior');\r\n        let designer = this.props.designer;\r\n        console.assert(attr.container != null);\r\n        console.assert(attr.movable != null);\r\n        if (attr.container) {\r\n            ComponentWrapper.enableDroppable(element, designer);\r\n        }\r\n        if (attr.movable) {\r\n            console.assert(element != null);\r\n            ComponentWrapper.draggable(designer, element);\r\n            if (this.handler != null)\r\n                ComponentWrapper.draggable(designer, element, this.handler);\r\n        }\r\n        else {\r\n            element.onclick = (ev) => ComponentWrapper.invokeOnClick(ev, designer, element);\r\n        }\r\n    }\r\n    /**\r\n     * 启用拖放操作，以便通过拖放图标添加控件\r\n     */\r\n    static enableDroppable(element, designer) {\r\n        console.assert(element != null);\r\n        element.addEventListener('dragover', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let componentName = event.dataTransfer.getData(comon_1.constants.componentData);\r\n            if (componentName)\r\n                event.dataTransfer.dropEffect = \"copy\";\r\n            else\r\n                event.dataTransfer.dropEffect = \"move\";\r\n            console.log(`dragover: left:${event.layerX} top:${event.layerX}`);\r\n        });\r\n        element.ondrop = (event) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let ctrl = component_toolbar_1.ComponentPanel.getComponentData(event.dataTransfer);\r\n            if (!ctrl)\r\n                return;\r\n            ctrl.props.style = ctrl.props.style || {};\r\n            designer.pageData.props.style = designer.pageData.props.style || {};\r\n            if (!ctrl.props.style.position) {\r\n                ctrl.props.style.position = designer.pageData.props.style.position;\r\n            }\r\n            let pos = component_toolbar_1.ComponentPanel.mouseInnerPosition(event.dataTransfer);\r\n            console.assert(pos != null);\r\n            if (ctrl.props.style.position == 'absolute') {\r\n                ctrl.props.style.left = event.layerX - pos.x;\r\n                ctrl.props.style.top = event.layerY - pos.y;\r\n            }\r\n            designer.appendComponent(element.id, ctrl);\r\n        };\r\n    }\r\n    static isResizeHandleClassName(className) {\r\n        let classNames = [\r\n            'resize_handle NE', 'resize_handle NN', 'resize_handle NW',\r\n            'resize_handle WW', 'resize_handle EE', 'resize_handle SW',\r\n            'resize_handle SS', 'resize_handle SE',\r\n        ];\r\n        return classNames.indexOf(className) >= 0;\r\n    }\r\n    static draggable(designer, element, handler) {\r\n        if (!designer)\r\n            throw Errors.argumentNull('designer');\r\n        if (!element)\r\n            throw Errors.argumentNull('element');\r\n        console.assert(element.id);\r\n        handler = handler || element;\r\n        let componentId = element.id;\r\n        console.assert(componentId);\r\n        let startPos;\r\n        let rect;\r\n        let dragStart;\r\n        $(handler)\r\n            .drag(\"init\", function (ev) {\r\n            startPos = $(element).position();\r\n            if ($(this).is(`.${style_1.classNames.componentSelected}`))\r\n                return $(`.${style_1.classNames.componentSelected}`);\r\n        })\r\n            .drag('start', function (ev, dd) {\r\n            dd.attr = $(ev.target).prop(\"className\");\r\n            dd.width = $(this).width();\r\n            dd.height = $(this).height();\r\n            dd.sourceElement = element;\r\n            dragStart = Date.now();\r\n        })\r\n            .drag(function (ev, dd) {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            rect = {};\r\n            if (dd.attr.indexOf(\"E\") > -1) {\r\n                rect.width = Math.max(32, dd.width + dd.deltaX);\r\n            }\r\n            if (dd.attr.indexOf(\"S\") > -1) {\r\n                rect.height = Math.max(32, dd.height + dd.deltaY);\r\n            }\r\n            if (dd.attr.indexOf(\"W\") > -1) {\r\n                rect.width = Math.max(32, dd.width - dd.deltaX);\r\n                setLeft(dd);\r\n            }\r\n            if (dd.attr.indexOf(\"N\") > -1) {\r\n                rect.height = Math.max(32, dd.height - dd.deltaY);\r\n                setTop(dd);\r\n            }\r\n            if (dd.attr.indexOf(\"WW\") >= 0)\r\n                setLeft(dd);\r\n            if (dd.attr.indexOf(\"NE\") >= 0 || dd.attr.indexOf(\"NW\") >= 0 || dd.attr.indexOf(\"SW\") >= 0)\r\n                setPosition(dd);\r\n            if (dd.attr.indexOf(\"NN\") >= 0)\r\n                setTop(dd);\r\n            if (dd.attr.indexOf(\"drag\") > -1) {\r\n                rect.top = dd.offsetY;\r\n                rect.left = dd.offsetX;\r\n            }\r\n            if (!ComponentWrapper.isResizeHandleClassName(dd.attr)) {\r\n                setPosition(dd);\r\n            }\r\n            if (dd.attr)\r\n                $(this).css(rect);\r\n        }, { click: true })\r\n            .drag('end', function (ev, dd) {\r\n            let interval = Date.now() - dragStart;\r\n            ComponentWrapper.isDrag = interval >= 300;\r\n            if (!ComponentWrapper.isResizeHandleClassName(dd.attr)) {\r\n                let left = startPos.left + dd.deltaX;\r\n                let top = startPos.top + dd.deltaY;\r\n                designer.setComponentPosition(element.id, { left, top });\r\n                element.style.transform = '';\r\n            }\r\n            else {\r\n                let left, top;\r\n                if (dd.attr.indexOf(\"W\") > -1)\r\n                    left = startPos.left + dd.deltaX;\r\n                if (dd.attr.indexOf(\"N\") > -1)\r\n                    top = startPos.top + dd.deltaY;\r\n                element.style.transform = '';\r\n                designer.setComponentPosition(element.id, { left, top });\r\n                designer.setComponentSize(componentId, rect);\r\n            }\r\n        })\r\n            .click((ev) => {\r\n            ComponentWrapper.invokeOnClick(ev, designer, element);\r\n        });\r\n        let setPosition = (dd) => {\r\n            console.log(['dd.offsetX, dd.offsetY', dd.offsetX, dd.offsetY]);\r\n            console.log(dd);\r\n            element.style.transform = `translate(${dd.deltaX}px,${dd.deltaY}px)`;\r\n        };\r\n        let setTop = (dd) => {\r\n            element.style.transform = `translateY(${dd.deltaY}px)`;\r\n        };\r\n        let setLeft = (dd) => {\r\n            element.style.transform = `translateX(${dd.deltaX}px)`;\r\n        };\r\n    }\r\n    static invokeOnClick(ev, designer, element) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n        if (ComponentWrapper.isDrag) {\r\n            ComponentWrapper.isDrag = false;\r\n            return;\r\n        }\r\n        let elementID = element.id;\r\n        if (!ev.ctrlKey) {\r\n            designer.selectComponent(element.id);\r\n            return;\r\n        }\r\n        let selectedControlIds = designer.selectedComponentIds;\r\n        console.assert(elementID);\r\n        if (selectedControlIds.indexOf(elementID) >= 0) {\r\n            selectedControlIds = selectedControlIds.filter(o => o != elementID);\r\n        }\r\n        else {\r\n            selectedControlIds.push(elementID);\r\n        }\r\n        designer.selectComponent(selectedControlIds);\r\n    }\r\n    componentDidMount() {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        let attr = this.props.source.attr;\r\n        this.designtimeBehavior(this.element, attr);\r\n    }\r\n    render() {\r\n        console.assert(!Array.isArray(this.props.children));\r\n        let shouldWrapper = true;\r\n        let attr = this.props.source.attr;\r\n        shouldWrapper = attr.resize || (typeof this.props.source.type != 'string' && this.props.source.type != component_1.ContainerHost);\r\n        if (!shouldWrapper) {\r\n            return this.renderWidthoutWrapper();\r\n        }\r\n        let props = this.props.source.props;\r\n        let style = props.style = props.style || {};\r\n        let { top, left, position, width, height, display, visibility } = style;\r\n        let className = style_1.appendClassName(props.className || '', style_1.classNames.componentWrapper);\r\n        className = props.selected ? style_1.appendClassName(className, style_1.classNames.componentSelected) : className;\r\n        let wrapperProps = {\r\n            id: props.id,\r\n            className,\r\n            style: { top, left, position, width, height, display, visibility },\r\n            ref: (e) => this.element = e || this.element\r\n        };\r\n        let move_handle = props.selected && attr.showHandler ? React.createElement(\"div\", { className: \"move_handle\", style: {}, ref: e => this.handler = e || this.handler }) : null;\r\n        let showResizeHandle = attr.resize && props.style.position == 'absolute' && props.selected;\r\n        let source = this.props.source;\r\n        if (props.style) {\r\n            delete props.style.left;\r\n            delete props.style.top;\r\n            delete props.style.position;\r\n            props.style.width = '100%';\r\n            props.style.height = '100%';\r\n        }\r\n        return React.createElement(component_1.ComponentWrapperContext.Provider, { value: this },\r\n            React.createElement(\"div\", Object.assign({}, wrapperProps),\r\n                move_handle,\r\n                showResizeHandle ?\r\n                    React.createElement(React.Fragment, null,\r\n                        React.createElement(\"div\", { className: \"resize_handle NE\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle NN\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle NW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle WW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle EE\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SS\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SE\" })) : null,\r\n                this.createRawElement(source.type, source.props, source.children)));\r\n    }\r\n    renderWidthoutWrapper() {\r\n        let { type, props, children } = this.props.source;\r\n        props.ref = (e) => {\r\n            if (!e)\r\n                return;\r\n            if (e.tagName) {\r\n                let attr = this.props.source.attr;\r\n                this.designtimeBehavior(e, attr);\r\n                return;\r\n            }\r\n        };\r\n        if (props.selected) {\r\n            props.className = style_1.appendClassName(props.className || '', style_1.classNames.componentSelected);\r\n        }\r\n        let element = this.createRawElement(type, props, children);\r\n        return React.createElement(component_1.ComponentWrapperContext.Provider, { value: this }, element);\r\n    }\r\n    createRawElement(type, props, children) {\r\n        let isEmptyElement = (children || []).length == 0;\r\n        if (isEmptyElement) {\r\n            let emtpy = this.props.designer.designTimeEmptyElement(type, props);\r\n            children = [emtpy];\r\n        }\r\n        return React.createElement(type, props, ...children);\r\n    }\r\n}\r\nComponentWrapper.isDrag = false;\r\nexports.ComponentWrapper = ComponentWrapper;\r\n//# sourceMappingURL=component-wrapper.js.map\n\n//# sourceURL=webpack:///./out/component-wrapper.js?");

/***/ }),

/***/ "./out/component.js":
/*!**************************!*\
  !*** ./out/component.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/*******************************************************************************\r\n * Copyright (C) maishu All rights reserved.\r\n *\r\n * 作者: 寒烟\r\n * 日期: 2018/5/30\r\n *\r\n * 个人博客：   http://www.cnblogs.com/ansiboy/\r\n * GITHUB:     http://github.com/ansiboy\r\n * QQ 讨论组：  119038574\r\n *\r\n * component.tsx 文件用于运行时加载，所以要控制此文件的大小，用于在运行时创建页面\r\n *\r\n ********************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(/*! react */ \"react\");\r\nconst page_designer_1 = __webpack_require__(/*! ./page-designer */ \"./out/page-designer.js\");\r\nconst style_1 = __webpack_require__(/*! ./style */ \"./out/style.js\");\r\nconst comon_1 = __webpack_require__(/*! ./comon */ \"./out/comon.js\");\r\nconst component_toolbar_1 = __webpack_require__(/*! ./component-toolbar */ \"./out/component-toolbar.js\");\r\nconst errors_1 = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\r\n// 非 dom 的 prop，以 ctrl 开大，以便于处理\r\nexports.NotDomPropPrefix = 'ctrl_';\r\nexports.DesignerContext = React.createContext({ designer: null });\r\nexports.ComponentWrapperContext = React.createContext(null);\r\nfunction component(args) {\r\n    return function (constructor) {\r\n        if (page_designer_1.PageDesigner) {\r\n            Component.setAttribute(constructor.name, args);\r\n        }\r\n        Component.register(constructor.name, constructor);\r\n        return constructor;\r\n    };\r\n}\r\nexports.component = component;\r\nclass Component {\r\n    /**\r\n     * 设置组件特性\r\n     * @param typename 组件类型名称\r\n     * @param attr 组件特性\r\n     */\r\n    static setAttribute(typename, attr) {\r\n        Component.componentAttributes[typename] = attr;\r\n    }\r\n    /**\r\n     * 获取组件特性\r\n     * @param typename 组件类型名称\r\n     */\r\n    static getAttribute(type) {\r\n        let typename = typeof type == 'string' ? type : type.name;\r\n        let attr = Component.componentAttributes[typename];\r\n        return Object.assign({ type }, Component.defaultComponentAttribute, attr || {});\r\n    }\r\n    static getPropEditors(controlClassName) {\r\n        let classEditors = this.controlPropEditors[controlClassName] || [];\r\n        return classEditors;\r\n    }\r\n    static getPropEditor(controlClassName, ...propNames) {\r\n        return this.getPropEditorByArray(controlClassName, propNames);\r\n    }\r\n    /** 通过属性数组获取属性的编辑器 */\r\n    static getPropEditorByArray(controlClassName, propNames) {\r\n        let classEditors = this.controlPropEditors[controlClassName] || [];\r\n        let editor = classEditors.filter(o => o.propNames.join('.') == propNames.join('.'))[0];\r\n        return editor;\r\n    }\r\n    static setPropEditor(componentType, propName, editorType, group) {\r\n        group = group || '';\r\n        let propNames = propName.split('.');\r\n        let className = typeof componentType == 'string' ? componentType : componentType.prototype.typename || componentType.name;\r\n        let classProps = Component.controlPropEditors[className] = Component.controlPropEditors[className] || [];\r\n        for (let i = 0; i < classProps.length; i++) {\r\n            let propName1 = classProps[i].propNames.join('.');\r\n            let propName2 = propNames.join('.');\r\n            if (propName1 == propName2) {\r\n                classProps[i].editorType = editorType;\r\n                return;\r\n            }\r\n        }\r\n        classProps.push({ propNames: propNames, editorType, group });\r\n    }\r\n    /**\r\n     * 将持久化的元素数据转换为 ReactElement\r\n     * @param args 元素数据\r\n     */\r\n    static createElement(args, h) {\r\n        h = h || React.createElement;\r\n        try {\r\n            let type = args.type;\r\n            let componentName = args.type;\r\n            let controlType = Component.componentTypes[componentName];\r\n            if (controlType) {\r\n                type = controlType;\r\n            }\r\n            let children = args.children ? args.children.map(o => Component.createElement(o, h)) : [];\r\n            let props = args.props == null ? {} : JSON.parse(JSON.stringify(args.props));\r\n            let result;\r\n            if (typeof type == 'string') {\r\n                if (props.text) {\r\n                    children.push(props.text);\r\n                }\r\n                //=========================================\r\n                // props.text 非 DOM 的 prop，并且已经使用完\r\n                delete props.text;\r\n                //=========================================\r\n            }\r\n            type = type == Component.Fragment ? React.Fragment : type;\r\n            result = h(type, props, ...children);\r\n            return result;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            return null;\r\n        }\r\n    }\r\n    static register(componentName, componentType, attr) {\r\n        if (componentType == null && typeof componentName == 'function') {\r\n            componentType = componentName;\r\n            componentName = componentType.name;\r\n            componentType['componentName'] = componentName;\r\n        }\r\n        if (!componentName)\r\n            throw errors_1.Errors.argumentNull('componentName');\r\n        if (!componentType)\r\n            throw errors_1.Errors.argumentNull('componentType');\r\n        Component.componentTypes[componentName] = componentType;\r\n        if (attr)\r\n            Component.setAttribute(componentName, attr);\r\n    }\r\n}\r\n//==========================================\r\n// 用于创建 React 的 React.Fragment \r\nComponent.Fragment = \"\";\r\n//==========================================\r\nComponent.defaultComponentAttribute = {\r\n    container: false, movable: false, showHandler: false, resize: false\r\n};\r\nComponent.componentAttributes = {\r\n    'div': { container: true, movable: true, showHandler: true, resize: true },\r\n    'img': { container: false, movable: true, resize: true },\r\n    'label': { movable: true },\r\n    'ul': { container: false, movable: true, showHandler: true, resize: false },\r\n    'li': { container: true, movable: false, },\r\n    'table': { container: false, movable: true, showHandler: true, resize: true },\r\n    'thead': { container: false, movable: false },\r\n    'tbody': { container: false, movable: false },\r\n    'tfoot': { container: false, movable: false },\r\n    'tr': { container: false, movable: false },\r\n    'td': { container: true, movable: false },\r\n};\r\nComponent.controlPropEditors = {};\r\nComponent.componentTypes = {};\r\nexports.Component = Component;\r\nexports.FormContext = React.createContext({ form: null });\r\nclass ContainerHost extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let children = this.children(props);\r\n        this.state = { children };\r\n    }\r\n    children(props) {\r\n        let arr = props.children == null ? [] :\r\n            Array.isArray(props.children) ? props.children : [props.children];\r\n        let children = [];\r\n        arr.forEach(o => {\r\n            if (!React.isValidElement(o))\r\n                return;\r\n            children.push(o);\r\n        });\r\n        return children;\r\n    }\r\n    componentWillReceiveProps(props) {\r\n        let children = this.children(props);\r\n        this.setState({ children });\r\n    }\r\n    render() {\r\n        let props = {};\r\n        for (let key in this.props) {\r\n            if (key == 'ref' || key == 'id')\r\n                continue;\r\n            props[key] = this.props[key];\r\n        }\r\n        props.style = Object.assign({ minHeight: 40 }, props.style);\r\n        let children = this.state.children.filter(o => o.props.parent_id == null);\r\n        return React.createElement(exports.FormContext.Provider, { value: { form: this } }, children);\r\n    }\r\n}\r\nexports.ContainerHost = ContainerHost;\r\nclass ComponentContainer extends React.Component {\r\n    /**\r\n     * 启用拖放操作，以便通过拖放图标添加控件\r\n     */\r\n    enableAppendDroppable(element) {\r\n        if (element.getAttribute('enable-append-droppable'))\r\n            return;\r\n        element.setAttribute('enable-append-droppable', 'true');\r\n        console.assert(element != null);\r\n        element.addEventListener('dragover', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = style_1.appendClassName(element.className || '', 'active');\r\n            let componentName = event.dataTransfer.getData(comon_1.constants.componentData);\r\n            if (componentName)\r\n                event.dataTransfer.dropEffect = \"copy\";\r\n            else\r\n                event.dataTransfer.dropEffect = \"move\";\r\n            console.log(`dragover: left:${event.layerX} top:${event.layerX}`);\r\n        });\r\n        let func = function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = style_1.removeClassName(element.className, 'active');\r\n        };\r\n        element.addEventListener('dragleave', func);\r\n        element.addEventListener('dragend', func);\r\n        element.addEventListener('dragexit', func);\r\n        element.ondrop = (event) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = style_1.removeClassName(element.className, 'active');\r\n            let ctrl = component_toolbar_1.ComponentPanel.getComponentData(event.dataTransfer);\r\n            if (!ctrl)\r\n                return;\r\n            console.assert(this.props.id);\r\n            console.assert(this.designer);\r\n            ctrl.props.parent_id = this.props.id;\r\n            console.assert(this.host != null, 'host is null');\r\n            this.designer.appendComponent(this.host.props.id, ctrl);\r\n        };\r\n    }\r\n    enableMoveDroppable(element) {\r\n        if (element.getAttribute('enable-move-droppable'))\r\n            return;\r\n        element.setAttribute('enable-move-droppable', 'true');\r\n        $(element)\r\n            .drop('start', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            style_1.appendClassName(element, 'active');\r\n        })\r\n            .drop('drop', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            let componentData = this.designer.findComponentData(dd.sourceElement.id);\r\n            console.assert(componentData != null);\r\n            let propName = 'parent_id';\r\n            this.designer.moveControl(dd.sourceElement.id, this.host.props.id);\r\n            this.designer.updateControlProps(dd.sourceElement.id, [propName], this.props.id);\r\n        })\r\n            .drop('end', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            style_1.removeClassName(element, 'active');\r\n        });\r\n    }\r\n    render() {\r\n        return React.createElement(exports.FormContext.Consumer, null, (args) => {\r\n            let host = this.host = args.form;\r\n            if (host == null)\r\n                throw errors_1.Errors.canntFindHost(this.props.id);\r\n            let children = [];\r\n            if (host.props && host.props.children) {\r\n                let arr;\r\n                if (Array.isArray(host.props.children)) {\r\n                    arr = host.props.children;\r\n                }\r\n                else {\r\n                    arr = [host.props.children];\r\n                }\r\n                children = arr.filter((o) => o.props.parent_id == this.props.id);\r\n            }\r\n            return React.createElement(exports.DesignerContext.Consumer, null, args => React.createElement(exports.ComponentWrapperContext.Consumer, null, wraper => {\r\n                this.wraper = wraper;\r\n                console.assert(this.wraper != null);\r\n                let element = React.createElement(React.Fragment, null,\r\n                    this.props.children,\r\n                    children);\r\n                if (args.designer) {\r\n                    this.designer = args.designer;\r\n                    element = React.createElement(\"div\", { className: style_1.classNames.formItem, ref: e => {\r\n                            if (!e)\r\n                                return;\r\n                            this.enableAppendDroppable(e);\r\n                            this.enableMoveDroppable(e);\r\n                        } }, element);\r\n                }\r\n                return element;\r\n            }));\r\n        });\r\n    }\r\n}\r\nexports.ComponentContainer = ComponentContainer;\r\nexports.ContainerHostName = 'ContainerHost';\r\nComponent.register(exports.ContainerHostName, ContainerHost, { container: false });\r\n//# sourceMappingURL=component.js.map\n\n//# sourceURL=webpack:///./out/component.js?");

/***/ }),

/***/ "./out/editor-panel.js":
/*!*****************************!*\
  !*** ./out/editor-panel.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst style_1 = __webpack_require__(/*! ./style */ \"./out/style.js\");\r\nconst React = __webpack_require__(/*! react */ \"react\");\r\nconst component_editor_1 = __webpack_require__(/*! ./component-editor */ \"./out/component-editor.js\");\r\nclass EditorPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componentDatas: [] };\r\n    }\r\n    componentWillReceiveProps(props) {\r\n        this.setState({ designer: props.designer });\r\n    }\r\n    getComponentData(designer) {\r\n        let componentDatas = [];\r\n        let stack = new Array();\r\n        stack.push(designer.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            componentDatas.push(item);\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++) {\r\n                stack.push(children[i]);\r\n            }\r\n        }\r\n        return componentDatas;\r\n    }\r\n    componentDidMount() {\r\n        // let paneHeight = function () {\r\n        //     return document.body.clientHeight - 86\r\n        // }\r\n        // let panel = jsPanel.create({\r\n        //     position: {\r\n        //         my: 'right-top',\r\n        //         at: 'right-top',\r\n        //         offsetY: 48\r\n        //     },\r\n        //     boxShadow: 0,\r\n        //     theme: 'bootstrap-primary',\r\n        //     panelSize: `300 ${paneHeight()}`,\r\n        //     headerTitle: '<h4>属性</h4>',\r\n        //     headerControls: {\r\n        //         close: 'remove', maximize: 'remove', smallifyrev: 'remove',\r\n        //         smallify: 'remove'\r\n        //     },\r\n        //     // minimizeTo: '#panel-headers',\r\n        //     // content: this.element\r\n        //     // container: this.statusBar.element\r\n        // })\r\n        // let setPos = function () {\r\n        //     let height = paneHeight();\r\n        //     panel.resize(`300 ${height}`)\r\n        //     panel.reposition('right-top 0 48');\r\n        // }\r\n        // window.addEventListener('resize', () => {\r\n        //     setTimeout(() => {\r\n        //         setPos()\r\n        //     }, 100)\r\n        // })\r\n        // setPos()\r\n    }\r\n    render() {\r\n        let { emptyText } = this.props;\r\n        emptyText = emptyText || '';\r\n        let componentDatas = [];\r\n        let selectedComponentIds = [];\r\n        let designer = this.state.designer;\r\n        if (designer) {\r\n            componentDatas = this.getComponentData(designer);\r\n            selectedComponentIds = designer.selectedComponentIds || [];\r\n        }\r\n        // return <div className=\"editor-panel panel panel-primary\" ref={(e: HTMLElement) => this.element = e || this.element}>\r\n        //     <div className=\"panel-heading\">属性</div>\r\n        //     <div className=\"panel-body\">\r\n        //         <div className=\"form-group\">\r\n        // <select className=\"form-control\"\r\n        //     ref={e => {\r\n        //         if (!e) return\r\n        //         e.value = selectedComponentIds.length == 1 ? selectedComponentIds[0] : ''\r\n        //         e.onchange = () => {\r\n        //             if (designer && e.value)\r\n        //                 designer.selectComponent(e.value)\r\n        //         }\r\n        //     }}>\r\n        //     {componentDatas.map(o =>\r\n        //         <option key={o.props.id} id={o.props.id} value={o.props.id}>{o.props.name}</option>\r\n        //     )}\r\n        // </select>\r\n        //         </div>\r\n        //         <ComponentEditor designer={designer} ref={e => this.editor = e || this.editor} />\r\n        //     </div>\r\n        // </div>\r\n        return React.createElement(\"div\", { className: style_1.classNames.editorPanel, ref: (e) => this.element = e || this.element },\r\n            React.createElement(\"select\", { className: \"form-control\", ref: e => {\r\n                    if (!e)\r\n                        return;\r\n                    e.value = selectedComponentIds.length == 1 ? selectedComponentIds[0] : '';\r\n                    e.onchange = () => {\r\n                        if (designer && e.value)\r\n                            designer.selectComponent(e.value);\r\n                    };\r\n                } }, componentDatas.map(o => React.createElement(\"option\", { key: o.props.id, id: o.props.id, value: o.props.id }, o.props.name))),\r\n            React.createElement(component_editor_1.ComponentEditor, { designer: designer, ref: e => this.editor = e || this.editor }));\r\n    }\r\n}\r\nexports.EditorPanel = EditorPanel;\r\n//# sourceMappingURL=editor-panel.js.map\n\n//# sourceURL=webpack:///./out/editor-panel.js?");

/***/ }),

/***/ "./out/errors.js":
/*!***********************!*\
  !*** ./out/errors.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Errors {\r\n    static fileNotExists(fileName) {\r\n        return new Error(`File '${fileName}' is not exists.`);\r\n    }\r\n    static argumentNull(argumentName) {\r\n        return new Error(`Argument ${argumentName} is null or empty.`);\r\n    }\r\n    static pageDataIsNull() {\r\n        return new Error(`Page data is null.`);\r\n    }\r\n    static toolbarRequiredKey() {\r\n        return new Error(`Toolbar has not a key prop.`);\r\n    }\r\n    static loadPluginFail(pluginId) {\r\n        return new Error(`Load plugin '${pluginId}' fail.`);\r\n    }\r\n    static idRequired() {\r\n        return new Error(`Property id is required.`);\r\n    }\r\n    static canntFindHost(componentId) {\r\n        return new Error(`Can not find host element for component container ${componentId}.`);\r\n    }\r\n}\r\nexports.Errors = Errors;\r\n//# sourceMappingURL=errors.js.map\n\n//# sourceURL=webpack:///./out/errors.js?");

/***/ }),

/***/ "./out/index.js":
/*!**********************!*\
  !*** ./out/index.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar page_designer_1 = __webpack_require__(/*! ./page-designer */ \"./out/page-designer.js\");\r\nexports.PageDesigner = page_designer_1.PageDesigner;\r\nvar component_editor_1 = __webpack_require__(/*! ./component-editor */ \"./out/component-editor.js\");\r\nexports.ComponentEditor = component_editor_1.ComponentEditor;\r\nvar editor_panel_1 = __webpack_require__(/*! ./editor-panel */ \"./out/editor-panel.js\");\r\nexports.EditorPanel = editor_panel_1.EditorPanel;\r\nvar component_1 = __webpack_require__(/*! ./component */ \"./out/component.js\");\r\nexports.Component = component_1.Component;\r\nvar component_toolbar_1 = __webpack_require__(/*! ./component-toolbar */ \"./out/component-toolbar.js\");\r\nexports.ComponentPanel = component_toolbar_1.ComponentPanel;\r\n__webpack_require__(/*! ../lib/jquery.event.drag-2.2 */ \"./lib/jquery.event.drag-2.2.js\");\r\n__webpack_require__(/*! ../lib/jquery.event.drag.live-2.2 */ \"./lib/jquery.event.drag.live-2.2.js\");\r\n__webpack_require__(/*! ../lib/jquery.event.drop-2.2 */ \"./lib/jquery.event.drop-2.2.js\");\r\n__webpack_require__(/*! ../lib/jquery.event.drop.live-2.2 */ \"./lib/jquery.event.drop.live-2.2.js\");\r\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack:///./out/index.js?");

/***/ }),

/***/ "./out/page-designer.js":
/*!******************************!*\
  !*** ./out/page-designer.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/*******************************************************************************\r\n * Copyright (C) maishu All rights reserved.\r\n *\r\n * HTML 页面设计器\r\n *\r\n * 作者: 寒烟\r\n * 日期: 2018/5/30\r\n *\r\n * 个人博客：   http://www.cnblogs.com/ansiboy/\r\n * GITHUB:     http://github.com/ansiboy\r\n * QQ 讨论组：  119038574\r\n *\r\n ********************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst component_1 = __webpack_require__(/*! ./component */ \"./out/component.js\");\r\nconst comon_1 = __webpack_require__(/*! ./comon */ \"./out/comon.js\");\r\nconst errors_1 = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\r\nconst React = __webpack_require__(/*! react */ \"react\");\r\nconst style_1 = __webpack_require__(/*! ./style */ \"./out/style.js\");\r\nconst component_wrapper_1 = __webpack_require__(/*! ./component-wrapper */ \"./out/component-wrapper.js\");\r\nclass PageDesigner extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.componentSelected = comon_1.Callback.create();\r\n        this.componentRemoved = comon_1.Callback.create();\r\n        this.componentAppend = comon_1.Callback.create();\r\n        this.componentUpdated = comon_1.Callback.create();\r\n        this.designtimeComponentDidMount = comon_1.Callback.create();\r\n        this.namedComponents = {};\r\n        this.initPageData(props.pageData);\r\n        this.state = { pageData: props.pageData };\r\n        this.designtimeComponentDidMount.add((args) => {\r\n            console.log(`this:designer event:controlComponentDidMount`);\r\n        });\r\n    }\r\n    initPageData(pageData) {\r\n        if (pageData == null) {\r\n            return;\r\n        }\r\n        pageData.children = pageData.children || [];\r\n        let hostCtrl = pageData.children.filter(o => o.type == component_1.ContainerHostName)[0];\r\n        if (hostCtrl == null) {\r\n            hostCtrl = {\r\n                type: component_1.ContainerHostName,\r\n                props: { id: comon_1.guid() }\r\n            };\r\n            pageData.children.push(hostCtrl);\r\n        }\r\n        this.nameComponent(pageData);\r\n    }\r\n    get root() {\r\n        return this._root;\r\n    }\r\n    get pageData() {\r\n        return this.state.pageData;\r\n    }\r\n    get selectedComponentIds() {\r\n        return this.selectedComponents.map(o => o.props.id);\r\n    }\r\n    get selectedComponents() {\r\n        let arr = new Array();\r\n        let stack = new Array();\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item.props.selected == true)\r\n                arr.push(item);\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++)\r\n                stack.push(children[i]);\r\n        }\r\n        return arr;\r\n    }\r\n    updateControlProps(controlId, navPropsNames, value) {\r\n        let componentData = this.findComponentData(controlId);\r\n        if (componentData == null)\r\n            return;\r\n        console.assert(componentData != null);\r\n        console.assert(navPropsNames != null, 'props is null');\r\n        componentData.props = componentData.props || {};\r\n        let obj = componentData.props;\r\n        for (let i = 0; i < navPropsNames.length - 1; i++) {\r\n            obj = obj[navPropsNames[i]] = obj[navPropsNames[i]] || {};\r\n        }\r\n        obj[navPropsNames[navPropsNames.length - 1]] = value;\r\n        this.setState(this.state);\r\n        this.componentUpdated.fire([componentData]);\r\n    }\r\n    sortChildren(parentId, childIds) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!childIds)\r\n            throw errors_1.Errors.argumentNull('childIds');\r\n        let pageData = this.state.pageData;\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        console.assert(parentControl.children != null);\r\n        console.assert((parentControl.children || []).length == childIds.length);\r\n        let p = parentControl;\r\n        parentControl.children = childIds.map(o => {\r\n            let child = p.children.filter(a => a.props.id == o)[0];\r\n            console.assert(child != null, `child ${o} is null`);\r\n            return child;\r\n        });\r\n        this.setState({ pageData });\r\n    }\r\n    /**\r\n     * 对组件及其子控件进行命名\r\n     * @param component\r\n     */\r\n    nameComponent(component) {\r\n        let props = component.props = component.props || {};\r\n        if (!props.name) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (this.namedComponents[name]);\r\n            this.namedComponents[name] = component;\r\n            props.name = name;\r\n        }\r\n        if (!props.id)\r\n            props.id = comon_1.guid();\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < component.children.length; i++) {\r\n            this.nameComponent(component.children[i]);\r\n        }\r\n    }\r\n    /** 添加控件 */\r\n    appendComponent(parentId, childControl, childIds) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!childControl)\r\n            throw errors_1.Errors.argumentNull('childControl');\r\n        this.nameComponent(childControl);\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        parentControl.children = parentControl.children || [];\r\n        parentControl.children.push(childControl);\r\n        if (childIds)\r\n            this.sortChildren(parentId, childIds);\r\n        else {\r\n            let { pageData } = this.state;\r\n            this.setState({ pageData });\r\n        }\r\n        this.selectComponent(childControl.props.id);\r\n        this.componentAppend.fire(this);\r\n    }\r\n    /** 设置控件位置 */\r\n    setComponentPosition(componentId, position) {\r\n        return this.setComponentsPosition([{ componentId, position }]);\r\n    }\r\n    setComponentSize(componentId, size) {\r\n        console.assert(componentId);\r\n        console.assert(size);\r\n        let componentData = this.findComponentData(componentId);\r\n        if (!componentData)\r\n            throw new Error(`Control ${componentId} is not exits.`);\r\n        let style = componentData.props.style = (componentData.props.style || {});\r\n        if (size.height)\r\n            style.height = size.height;\r\n        if (size.width)\r\n            style.width = size.width;\r\n        let { pageData } = this.state;\r\n        this.setState({ pageData });\r\n        this.componentUpdated.fire([componentData]);\r\n    }\r\n    setComponentsPosition(positions) {\r\n        let componentDatas = new Array();\r\n        positions.forEach(o => {\r\n            let { componentId } = o;\r\n            let { left, top } = o.position;\r\n            let componentData = this.findComponentData(componentId);\r\n            if (!componentData)\r\n                throw new Error(`Control ${componentId} is not exits.`);\r\n            let style = componentData.props.style = (componentData.props.style || {});\r\n            if (left)\r\n                style.left = left;\r\n            if (top)\r\n                style.top = top;\r\n            let { pageData } = this.state;\r\n            this.setState({ pageData });\r\n            componentDatas.push(componentData);\r\n        });\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    /**\r\n     * 选择指定的控件\r\n     * @param control 指定的控件\r\n     */\r\n    selectComponent(componentIds) {\r\n        if (typeof componentIds == 'string')\r\n            componentIds = [componentIds];\r\n        var stack = [];\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            let isSelectedControl = componentIds.indexOf(item.props.id) >= 0;\r\n            item.props.selected = isSelectedControl;\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++) {\r\n                stack.push(children[i]);\r\n            }\r\n        }\r\n        this.setState({ pageData: this.pageData });\r\n        this.componentSelected.fire(this.selectedComponentIds);\r\n        //====================================================\r\n        // 设置焦点，以便获取键盘事件\r\n        this.element.focus();\r\n        //====================================================\r\n    }\r\n    /** 移除控件 */\r\n    removeControl(...controlIds) {\r\n        let pageData = this.state.pageData;\r\n        if (!pageData || !pageData.children || pageData.children.length == 0)\r\n            return;\r\n        controlIds.forEach(controlId => {\r\n            this.removeControlFrom(controlId, pageData.children);\r\n        });\r\n        this.setState({ pageData });\r\n        this.componentRemoved.fire(controlIds);\r\n    }\r\n    /**\r\n     * 移动控件到另外一个控件容器\r\n     * @param componentId 要移动的组件编号\r\n     * @param parentId 目标组件编号\r\n     * @param childIds 目标组件子组件的编号，用于排序子组件\r\n     */\r\n    moveControl(componentId, parentId, childIds) {\r\n        let control = this.findComponentData(componentId);\r\n        if (control == null)\r\n            throw new Error(`Cannt find control by id ${componentId}`);\r\n        console.assert(control != null, `Cannt find control by id ${componentId}`);\r\n        let pageData = this.state.pageData;\r\n        console.assert(pageData.children);\r\n        this.removeControlFrom(componentId, pageData.children);\r\n        this.appendComponent(parentId, control, childIds);\r\n    }\r\n    removeControlFrom(controlId, collection) {\r\n        let controlIndex = null;\r\n        for (let i = 0; i < collection.length; i++) {\r\n            if (controlId == collection[i].props.id) {\r\n                controlIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (controlIndex == null) {\r\n            for (let i = 0; i < collection.length; i++) {\r\n                let o = collection[i];\r\n                if (o.children && o.children.length > 0) {\r\n                    let isRemoved = this.removeControlFrom(controlId, o.children);\r\n                    if (isRemoved) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        if (controlIndex == 0) {\r\n            collection.shift();\r\n        }\r\n        else if (controlIndex == collection.length - 1) {\r\n            collection.pop();\r\n        }\r\n        else {\r\n            collection.splice(controlIndex, 1);\r\n        }\r\n        return true;\r\n    }\r\n    findComponentData(controlId) {\r\n        let pageData = this.state.pageData;\r\n        if (!pageData)\r\n            throw errors_1.Errors.pageDataIsNull();\r\n        let stack = new Array();\r\n        stack.push(pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item == null)\r\n                continue;\r\n            if (item.props.id == controlId)\r\n                return item;\r\n            let children = (item.children || []).filter(o => typeof o == 'object');\r\n            stack.push(...children);\r\n        }\r\n        return null;\r\n    }\r\n    onKeyDown(e) {\r\n        const DELETE_KEY_CODE = 46;\r\n        if (e.keyCode == DELETE_KEY_CODE) {\r\n            if (this.selectedComponents.length == 0)\r\n                return;\r\n            this.removeControl(...this.selectedComponentIds);\r\n        }\r\n    }\r\n    designTimeEmptyElement(type, props) {\r\n        let typename = typeof type == 'string' ? type : type.name;\r\n        let text = this.designTimeText(typename, props);\r\n        return text;\r\n    }\r\n    designTimeText(type, props) {\r\n        let text = props.text;\r\n        if (text) {\r\n            return text;\r\n        }\r\n        text = text || props.name || type;\r\n        return text;\r\n    }\r\n    createDesignTimeElement(type, props, ...children) {\r\n        console.assert(props.id);\r\n        if (props.id != null)\r\n            props.key = props.id;\r\n        if (type == 'a' && props.href) {\r\n            props.href = 'javascript:';\r\n        }\r\n        else if (type == 'input' || type == 'button') {\r\n            delete props.onClick;\r\n            props.readOnly = true;\r\n        }\r\n        let attr = component_1.Component.getAttribute(type);\r\n        console.assert(attr != null);\r\n        let className = props.selected ? style_1.appendClassName(props.className || '', style_1.classNames.componentSelected) : props.className;\r\n        return React.createElement(component_wrapper_1.ComponentWrapper, Object.assign({}, Object.assign({}, props, { className }), { designer: this, source: { type, attr, props, children } }));\r\n    }\r\n    componentWillReceiveProps(props) {\r\n        this.initPageData(props.pageData);\r\n        this.setState({ pageData: props.pageData });\r\n    }\r\n    render() {\r\n        let designer = this;\r\n        let { pageData } = this.state;\r\n        let style = this.props.style;\r\n        let result = React.createElement(\"div\", { className: \"designer\", tabIndex: 1, style: style, ref: e => this.element = e || this.element, onKeyDown: (e) => this.onKeyDown(e) },\r\n            React.createElement(component_1.DesignerContext.Provider, { value: { designer } }, (() => {\r\n                this._root = pageData ? component_1.Component.createElement(pageData, this.createDesignTimeElement.bind(this)) : null;\r\n                return this._root;\r\n            })()));\r\n        return result;\r\n    }\r\n}\r\nexports.PageDesigner = PageDesigner;\r\n//# sourceMappingURL=page-designer.js.map\n\n//# sourceURL=webpack:///./out/page-designer.js?");

/***/ }),

/***/ "./out/style.js":
/*!**********************!*\
  !*** ./out/style.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.classNames = {\r\n    componentSelected: `component-selected`,\r\n    emptyTemplates: `empty-templates`,\r\n    loadingTemplates: `loading-templates`,\r\n    templateSelected: `template-selected`,\r\n    templateDialog: `template-dialog`,\r\n    emptyDocument: `empty-document`,\r\n    component: 'component',\r\n    componentWrapper: 'component-wrapper',\r\n    componentPanel: 'component-panel',\r\n    form: 'form',\r\n    formItem: 'form-item',\r\n    editorPanel: 'editor-panel'\r\n};\r\nlet templateDialog = {\r\n    nameHeight: 40,\r\n    fontSize: 22\r\n};\r\nlet element = document.createElement('style');\r\nelement.type = 'text/css';\r\nelement.innerHTML = `\r\n        .${exports.classNames.componentSelected} {\r\n            border: solid 1px #337ab7!important;\r\n        }\r\n        .${exports.classNames.emptyTemplates} {\r\n            padding:50px 0;\r\n            text-align: center;\r\n        }\r\n        .${exports.classNames.loadingTemplates} {\r\n            padding:50px 0;\r\n            text-align: center;\r\n        }\r\n        .${exports.classNames.templateSelected} .page-view {\r\n            border: solid 1px #337ab7!important;\r\n        }\r\n        .${exports.classNames.templateDialog} .name {\r\n            margin-top: -${templateDialog.nameHeight}px;\r\n            height: ${templateDialog.nameHeight}px;\r\n            font-size: ${templateDialog.fontSize}px;\r\n            text-align: center;\r\n            padding-top: 6px;\r\n            background-color: black;\r\n            opacity: 0.5;\r\n        }\r\n        .${exports.classNames.templateDialog} .name span {\r\n            color: white;\r\n        }\r\n        .${exports.classNames.emptyDocument} {\r\n            text-align: center;\r\n            padding: 100px 0;\r\n        }\r\n        ul.nav-tabs li i {\r\n            position: relative;\r\n            top: 4px;\r\n            right: -6px;\r\n        }\r\n        .validationMessage {\r\n            position: absolute;\r\n            margin-top: -60px;\r\n            background-color: red;\r\n            color: white;\r\n            padding: 4px 10px;\r\n        }\r\n        .${exports.classNames.form} {\r\n            min-height: 40px;\r\n            width: 100%;\r\n        }\r\n        .${exports.classNames.formItem} {\r\n            min-height: 40px;\r\n            width: 100%;\r\n        }\r\n        .${exports.classNames.formItem}.active,\r\n        .${exports.classNames.componentWrapper}.active,\r\n        .${exports.classNames.componentWrapper}.${exports.classNames.componentSelected}.active {\r\n            border: 1px solid green;\r\n        }\r\n        .${exports.classNames.editorPanel} {\r\n            width: 300px;\r\n            background: white;\r\n            color: black;\r\n            margin: 0;\r\n            font-size: 14px;\r\n            z-index: 100;\r\n            overflow: auto;\r\n        }\r\n        .${exports.classNames.editorPanel} label {\r\n            width: 80px;\r\n            float: left;\r\n            padding: 4px;\r\n            text-overflow: ellipsis;\r\n            overflow: hidden;\r\n        }\r\n        .${exports.classNames.editorPanel} .control {\r\n            padding-left: 90px;\r\n        }\r\n        .${exports.classNames.editorPanel} .empty {\r\n            padding-top: 200px;\r\n            text-align: center;\r\n        }\r\n        .${exports.classNames.componentPanel} {\r\n            background: white;\r\n            color: black;\r\n            width: 90px;\r\n            font-size: 14px;\r\n            z-index: 100;\r\n        }\r\n        .${exports.classNames.componentPanel} .panel-heading {\r\n            text-align: center;\r\n        }\r\n        .${exports.classNames.componentPanel} ul li {\r\n            width: 64px;\r\n            text-align: center;\r\n            padding: 8px;\r\n        }\r\n    `;\r\ndocument.head.appendChild(element);\r\nfunction appendClassName(element, addonClassName) {\r\n    if (element == null)\r\n        throw Errors.argumentNull('element');\r\n    if (!addonClassName)\r\n        throw Errors.argumentNull('addonClassName');\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className;\r\n    sourceClassName = sourceClassName || '';\r\n    console.assert(addonClassName);\r\n    if (sourceClassName.indexOf(addonClassName) >= 0)\r\n        return sourceClassName;\r\n    let className = `${sourceClassName} ${addonClassName}`;\r\n    if (typeof element != 'string')\r\n        element.className = className;\r\n    return className;\r\n}\r\nexports.appendClassName = appendClassName;\r\nfunction removeClassName(element, targetClassName) {\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className || '';\r\n    if (sourceClassName.indexOf(targetClassName) < 0)\r\n        return sourceClassName;\r\n    sourceClassName = sourceClassName || '';\r\n    sourceClassName = sourceClassName.replace(new RegExp(targetClassName, 'g'), '');\r\n    sourceClassName = sourceClassName.trim();\r\n    if (typeof element != 'string')\r\n        element.className = sourceClassName;\r\n    return sourceClassName;\r\n}\r\nexports.removeClassName = removeClassName;\r\n//# sourceMappingURL=style.js.map\n\n//# sourceURL=webpack:///./out/style.js?");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_react__;\n\n//# sourceURL=webpack:///external_%22React%22?");

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_react_dom__;\n\n//# sourceURL=webpack:///external_%22ReactDOM%22?");

/***/ })

/******/ });
});
{"version":3,"sources":["webpack://jueying/webpack/universalModuleDefinition","webpack://jueying/webpack/bootstrap","webpack://jueying/external \"React\"","webpack://jueying/./out/common.js","webpack://jueying/./out/style.js","webpack://jueying/./out/component.js","webpack://jueying/./out/errors.js","webpack://jueying/./out/component-panel.js","webpack://jueying/./out/page-designer.js","webpack://jueying/./out/index.js","webpack://jueying/./out/jquery.js","webpack://jueying/external \"$\"","webpack://jueying/./lib/jquery.event.drag-2.2.js","webpack://jueying/./lib/jquery.event.drag.live-2.2.js","webpack://jueying/./lib/jquery.event.drop-2.2.js","webpack://jueying/./lib/jquery.event.drop.live-2.2.js","webpack://jueying/./out/component-wrapper.js","webpack://jueying/./out/editor-panel.js","webpack://jueying/./out/property-editor.js","webpack://jueying/./out/prop-editor.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__9__","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","defineProperty","constants","componentsDir","connectorElementClassName","componentTypeName","componentData","componentPosition","proptDisplayNames","guid","s4","Math","floor","random","toString","substring","Callback","this","funcs","Array","func","push","filter","o","args","forEach","errors_1","classNames","componentSelected","emptyTemplates","loadingTemplates","templateSelected","templateDialog","emptyDocument","component","componentWrapper","componentPanel","componentIcon","placeholder","editorPanel","designer","moveDown","element","document","createElement","type","setAttribute","innerHTML","head","appendChild","appendClassName","addonClassName","Errors","argumentNull","sourceClassName","className","console","assert","indexOf","removeClassName","targetClassName","replace","RegExp","trim","React","page_designer_1","style_1","common_1","component_panel_1","DesignerContext","createContext","ComponentWrapperContext","constructor","PageDesigner","Component","name","register","typename","attr","componentAttributes","assign","defaultComponentAttribute","componentType","result","propEditorInfo","componentPropEditors","i","length","propName","display","componentPropEditorDisplay","controlClassName","getPropEditorByArray","propNames","componentTypeOrOptions","editorType","group","editorDisplay","options","displayName","split","classProps","join","h","_createElement","components","componentTypes","context","componentName","controlType","masterPage","children","map","props","text","Fragment","ref","e","MasterPage","typeName","childComponents","error","container","movable","showHandler","resize","MasterPageName","MasterPageContext","master","super","state","arr","isArray","isValidElement","style","minHeight","parentid","Provider","PlaceHolder","id","placeHolderIdNull","getAttribute","addEventListener","event","preventDefault","stopPropagation","dataTransfer","getData","dropEffect","log","layerX","ondrop","ctrl","ComponentPanel","getComponentData","appendComponent","host","$","drop","dd","sourceElement","wraper","source","findComponentData","moveComponent","updateComponentProps","componentId","empty","Consumer","canntFindMasterPage","enableAppendDroppable","enableMoveDroppable","PageView","pageData","propCanntNull","ErrorBoundary","info","setState","message","stack","Error","fileName","argumentName","pluginId","fieldName","component_1","componets","toolbarElement","toolItemElement","draggable","ev","setData","JSON","stringify","x","offsetX","y","offsetY","str","parse","c","componentIndexName","icon","fontSize","color","componentDraggable","component_wrapper_1","create","componentRemoved","componentAppend","componentUpdated","designtimeComponentDidMount","fillPageData","add","componentIds","travelComponentData","item","itemRef","names","getOwnPropertyNames","ids","nameComponent","setComponetRefProp","r","selectedComponents","pop","selected","componentProps","componentDatas","navPropsNames","obj","fire","parentId","childIds","parentControl","p","child","a","namedComponents","num","componentIndex","splice","selectComponent","position","setComponentsPosition","size","height","width","positions","left","top","isSelectedControl","selectedComponentIds","focus","controlId","removeComponentFrom","childComponentIndex","collection","controlIndex","shift","pageDataIsNull","keyCode","removeComponent","argumentFieldCanntNull","attr1","attr2","wrapperProps","ComponentWrapper","tabIndex","onKeyDown","createDesignTimeElement","defaultProps","wrapDesignTimeElement","strings","editor_panel_1","EditorPanel","prop_editor_1","PropEditor","TextInput","j","fn","drag","arg","opts","isFunction","trigger","$event","$special","special","defaults","which","distance","not","handle","relative","click","datakey","noBubble","data","related","each","def","undefined","remove","setup","extend","init","attachEvent","dontstart","teardown","removeData","textselect","detachEvent","touched","results","target","is","closest","currentTarget","propagates","mousedown","interactions","interaction","pageX","pageY","dragging","hijack","flatten","handler","live","elem","offset","callback","droppable","pow","Date","getTime","ia","orig","originalEvent","mode","len","isNaN","cancelled","properties","subject","isPropagationStopped","dispatch","proxy","update","startX","startY","deltaX","deltaY","originalX","originalY","slice","available","jquery","nodeType","member","makeArray","bool","css","unselectable","locate","$dispatch","apply","arguments","touchHooks","fixHooks","touchstart","touchmove","touchend","touchcancel","touches","changedTouches","prop","draginit","dragstart","dragend","jQuery","origadd","origteardown","livekey","selector","delegate","elems","events","origType","origHandler","inArray","multi","Infinity","delay","tolerance","targets","active","anyactive","winner","location","grep","$targets","timer","tolerate","clearTimeout","index","$elem","posi","outerHeight","outerWidth","right","bottom","contains","test","modes","overlap","max","min","sort","b","drp","drg","end","xy","last","setTimeout","dropinit","dropstart","dropend","find","concat","onclick","invokeOnClick","pos","mouseInnerPosition","startPos","rect","dragStart","now","setLeft","setTop","setPosition","isResizeHandleClassName","interval","isDrag","transform","setComponentPosition","setComponentSize","elementID","ctrlKey","selectedControlIds","designtimeBehavior","renderWidthoutWrapper","visibility","move_handle","showResizeHandle","createRawElement","tagName","emtpy","designTimeEmptyElement","designTimeText","property_editor_1","designerComponentChanged","_designer","PropertyEditor","editor","customRender","_element","commonFlatProps","commonPropEditorInfos","propEditorInfos","getPropEditors","items","propInfo1","propInfo2","propName1","propName2","control","controlProps","editors","editorProps","propValue","editComponents","updateComponentProp","getEditors","groupEditorsArray","groupEditors","g","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","valueType","itemsPromise","textValues","onChange","textValue","floatRegex","parseInt","parseFloat","dropdown"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"$\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"$\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jueying\"] = factory(require(\"React\"), require(\"$\"));\n\telse\n\t\troot[\"jueying\"] = factory(root[\"React\"], root[\"$\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__9__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.constants = {\r\n    componentsDir: 'components',\r\n    connectorElementClassName: 'component-container',\r\n    componentTypeName: 'data-component-name',\r\n    componentData: 'component-data',\r\n    componentPosition: \"component-position\"\r\n};\r\nexports.proptDisplayNames = {};\r\nfunction guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\nexports.guid = guid;\r\nclass Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\nexports.Callback = Callback;\r\n//# sourceMappingURL=common.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst errors_1 = require(\"./errors\");\r\nexports.classNames = {\r\n    componentSelected: `component-selected`,\r\n    emptyTemplates: `empty-templates`,\r\n    loadingTemplates: `loading-templates`,\r\n    templateSelected: `template-selected`,\r\n    templateDialog: `template-dialog`,\r\n    emptyDocument: `empty-document`,\r\n    component: 'component',\r\n    componentWrapper: 'component-wrapper',\r\n    componentPanel: 'component-panel',\r\n    componentIcon: 'component-icon',\r\n    placeholder: 'placeholder',\r\n    editorPanel: 'editor-panel',\r\n    designer: 'designer',\r\n    moveDown: 'move-down',\r\n};\r\nlet templateDialog = {\r\n    nameHeight: 40,\r\n    fontSize: 22\r\n};\r\nlet element = document.createElement('style');\r\nelement.type = 'text/css';\r\nelement.setAttribute(\"data-name\", \"jueying\");\r\nelement.innerHTML = `\r\n            .${exports.classNames.componentSelected} {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${exports.classNames.componentSelected} > :first-child {\r\n                border-color: blue;\r\n              }\r\n              .${exports.classNames.componentSelected} .resize_handle {\r\n                position: absolute;\r\n                height: 6px;\r\n                width: 6px;\r\n                border: 1px solid #89B;\r\n                background: #9AC;\r\n              }\r\n              .${exports.classNames.componentSelected} .move_handle {\r\n                height: 12px;\r\n                width: 12px;\r\n                top: 6px;\r\n                left: 8px;\r\n                border: solid 1px black;\r\n                position: relative;\r\n                margin-top: -12px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NW,\r\n              .${exports.classNames.componentSelected} .NN,\r\n              .${exports.classNames.componentSelected} .NE {\r\n                top: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NE,\r\n              .${exports.classNames.componentSelected} .EE,\r\n              .${exports.classNames.componentSelected} .SE {\r\n                right: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .SW,\r\n              .${exports.classNames.componentSelected}.SS,\r\n              .${exports.classNames.componentSelected} .SE {\r\n                bottom: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .NW,\r\n              .${exports.classNames.componentSelected} .WW,\r\n              .${exports.classNames.componentSelected} .SW {\r\n                left: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .SE,\r\n              .${exports.classNames.componentSelected} .NW {\r\n                cursor: nw-resize;\r\n              }\r\n              .${exports.classNames.componentSelected} .SW,\r\n              .${exports.classNames.componentSelected} .NE {\r\n                cursor: ne-resize;\r\n              }\r\n              .${exports.classNames.componentSelected} .NN,\r\n              .${exports.classNames.componentSelected} .SS {\r\n                cursor: n-resize;\r\n                left: 50%;\r\n                margin-left: -4px;\r\n              }\r\n              .${exports.classNames.componentSelected} .EE,\r\n              .${exports.classNames.componentSelected} .WW {\r\n                cursor: e-resize;\r\n                top: 50%;\r\n                margin-top: -4px;\r\n              }\r\n            .${exports.classNames.emptyTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.loadingTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.templateSelected} .page-view {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${exports.classNames.templateDialog} .name {\r\n                margin-top: -${templateDialog.nameHeight}px;\r\n                height: ${templateDialog.nameHeight}px;\r\n                font-size: ${templateDialog.fontSize}px;\r\n                text-align: center;\r\n                padding-top: 6px;\r\n                background-color: black;\r\n                opacity: 0.5;\r\n            }\r\n            .${exports.classNames.templateDialog} .name span {\r\n                color: white;\r\n            }\r\n            .${exports.classNames.emptyDocument} {\r\n                text-align: center;\r\n                padding: 100px 0;\r\n            }\r\n            .${exports.classNames.component} > .NW,\r\n            .${exports.classNames.component} > .NN,\r\n            .${exports.classNames.component} > .NE,\r\n            .${exports.classNames.component} > .EE,\r\n            .${exports.classNames.component} > .SE,\r\n            .${exports.classNames.component} > .SW,\r\n            .${exports.classNames.component} > .SS,\r\n            .${exports.classNames.component} > .WW {\r\n                display: none;\r\n            }\r\n            .${exports.classNames.componentSelected}.component > .NW,\r\n            .${exports.classNames.componentSelected}.component > .NN,\r\n            .${exports.classNames.componentSelected}.component > .NE,\r\n            .${exports.classNames.componentSelected}.component > .EE,\r\n            .${exports.classNames.componentSelected}.component > .SE,\r\n            .${exports.classNames.componentSelected}.component > .SW,\r\n            .${exports.classNames.componentSelected}.component > .SS,\r\n            .${exports.classNames.componentSelected}.component > .WW {\r\n                display: block;\r\n            }\r\n            .${exports.classNames.placeholder} {\r\n                min-height: 40px;\r\n                width: 100%;\r\n            }\r\n            .${exports.classNames.placeholder}.active,\r\n            .${exports.classNames.componentWrapper}.active,\r\n            .${exports.classNames.componentWrapper}.${exports.classNames.componentSelected}.active {\r\n                border: 1px solid green;\r\n            }\r\n            .${exports.classNames.editorPanel} {\r\n                width: 300px;\r\n                background: white;\r\n                color: black;\r\n                margin: 0;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                overflow: auto;\r\n            }\r\n            .${exports.classNames.editorPanel} label {\r\n                width: 80px;\r\n                float: left;\r\n                padding: 4px;\r\n                text-overflow: ellipsis;\r\n                overflow: hidden;\r\n            }\r\n            .${exports.classNames.editorPanel} .control {\r\n                padding-left: 90px;\r\n            }\r\n            .${exports.classNames.editorPanel} .empty {\r\n                padding-top: 200px;\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.designer} .error,\r\n            .${exports.classNames.editorPanel} .error {\r\n                color: red;\r\n            }\r\n            .${exports.classNames.componentPanel} {\r\n                background: white;\r\n                color: black;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                list-style: none;\r\n                padding: 0;\r\n                text-align: center\r\n            }\r\n            .${exports.classNames.componentPanel} .panel-heading {\r\n                text-align: center;\r\n            }\r\n            .${exports.classNames.componentPanel} li {\r\n                text-align: center;\r\n                padding: 8px;\r\n            }\r\n            .${exports.classNames.componentWrapper}.${exports.classNames.moveDown} {\r\n         \r\n            }\r\n        `;\r\ndocument.head.appendChild(element);\r\nfunction appendClassName(element, addonClassName) {\r\n    if (element == null)\r\n        throw errors_1.Errors.argumentNull('element');\r\n    if (!addonClassName)\r\n        throw errors_1.Errors.argumentNull('addonClassName');\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className;\r\n    sourceClassName = sourceClassName || '';\r\n    console.assert(addonClassName);\r\n    if (sourceClassName.indexOf(addonClassName) >= 0)\r\n        return sourceClassName;\r\n    let className = `${sourceClassName} ${addonClassName}`;\r\n    if (typeof element != 'string')\r\n        element.className = className;\r\n    return className;\r\n}\r\nexports.appendClassName = appendClassName;\r\nfunction removeClassName(element, targetClassName) {\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className || '';\r\n    if (sourceClassName.indexOf(targetClassName) < 0)\r\n        return sourceClassName;\r\n    sourceClassName = sourceClassName || '';\r\n    sourceClassName = sourceClassName.replace(new RegExp(targetClassName, 'g'), '');\r\n    sourceClassName = sourceClassName.trim();\r\n    if (typeof element != 'string')\r\n        element.className = sourceClassName;\r\n    return sourceClassName;\r\n}\r\nexports.removeClassName = removeClassName;\r\n//# sourceMappingURL=style.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst page_designer_1 = require(\"./page-designer\");\r\nconst errors_1 = require(\"./errors\");\r\nconst style_1 = require(\"./style\");\r\nconst common_1 = require(\"./common\");\r\nconst component_panel_1 = require(\"./component-panel\");\r\nexports.DesignerContext = React.createContext({ designer: null });\r\nexports.ComponentWrapperContext = React.createContext(null);\r\nfunction component(args) {\r\n    return function (constructor) {\r\n        if (page_designer_1.PageDesigner) {\r\n            Component.setAttribute(constructor.name, args);\r\n        }\r\n        Component.register(constructor.name, constructor);\r\n        return constructor;\r\n    };\r\n}\r\nexports.component = component;\r\nclass Component {\r\n    /**\r\n     * 设置组件特性\r\n     * @param typename 组件类型名称\r\n     * @param attr 组件特性\r\n     */\r\n    static setAttribute(typename, attr) {\r\n        Component.componentAttributes[typename] = attr;\r\n    }\r\n    /**\r\n     * 获取组件特性\r\n     * @param typename 组件类型名称\r\n     */\r\n    static getAttribute(type) {\r\n        let typename = typeof type == 'string' ? type : type.name;\r\n        let attr = Component.componentAttributes[typename];\r\n        return Object.assign({ type }, Component.defaultComponentAttribute, attr || {});\r\n    }\r\n    static getPropEditors(componentData) {\r\n        let componentType = componentData.type;\r\n        let result = [];\r\n        let propEditorInfo = this.componentPropEditors[componentType] || [];\r\n        for (let i = 0; i < propEditorInfo.length; i++) {\r\n            let propName = propEditorInfo[i].propName;\r\n            let display = Component.componentPropEditorDisplay[`${componentType}.${propName}`];\r\n            if (display != null && display(componentData) == false)\r\n                continue;\r\n            result.push(propEditorInfo[i]);\r\n        }\r\n        return result;\r\n        // let classEditors = this.componentPropEditors[componentType] || []\r\n        // Component.componentPropEditorDisplay[`${className}.${propName}`] = editorDisplay;\r\n        // return classEditors\r\n    }\r\n    static getPropEditor(controlClassName, propName) {\r\n        return this.getPropEditorByArray(controlClassName, propName);\r\n    }\r\n    /** 通过属性数组获取属性的编辑器 */\r\n    static getPropEditorByArray(controlClassName, propNames) {\r\n        let classEditors = this.componentPropEditors[controlClassName] || [];\r\n        let editor = classEditors.filter(o => o.propName == propNames)[0];\r\n        return editor;\r\n    }\r\n    static setPropEditor(componentTypeOrOptions, propName, editorType, group) {\r\n        let componentType;\r\n        let editorDisplay;\r\n        if (typeof componentTypeOrOptions == \"object\") {\r\n            let options = componentTypeOrOptions;\r\n            componentType = options.componentType;\r\n            propName = options.propName;\r\n            editorType = options.editorType;\r\n            group = options.group;\r\n            editorDisplay = options.display;\r\n            if (options.displayName != null) {\r\n                common_1.proptDisplayNames[propName] = options.displayName;\r\n            }\r\n        }\r\n        else {\r\n            componentType = componentTypeOrOptions;\r\n        }\r\n        group = group || '';\r\n        // 属性可能为导航属性,例如 style.width\r\n        let propNames = propName.split('.');\r\n        let className = typeof componentType == 'string' ? componentType : componentType.prototype.typename || componentType.name;\r\n        Component.componentPropEditorDisplay[`${className}.${propName}`] = editorDisplay;\r\n        let classProps = Component.componentPropEditors[className] = Component.componentPropEditors[className] || [];\r\n        for (let i = 0; i < classProps.length; i++) {\r\n            let propName1 = classProps[i].propName; //classProps[i].propNames.join('.')\r\n            let propName2 = propNames.join('.');\r\n            if (propName1 == propName2) {\r\n                classProps[i].editorType = editorType;\r\n                return;\r\n            }\r\n        }\r\n        classProps.push({ propName, editorType, group });\r\n    }\r\n    static createElement(componentData, h) {\r\n        return Component._createElement(componentData, { components: [], componentTypes: [] }, h);\r\n    }\r\n    /**\r\n     * 将持久化的元素数据转换为 ReactElement\r\n     * @param componentData 元素数据\r\n     */\r\n    static _createElement(componentData, context, h) {\r\n        if (!componentData)\r\n            throw errors_1.Errors.argumentNull('componentData');\r\n        h = h || React.createElement;\r\n        try {\r\n            let type = componentData.type;\r\n            let componentName = componentData.type;\r\n            let controlType = Component.componentTypes[componentName];\r\n            if (controlType) {\r\n                type = controlType;\r\n            }\r\n            let children = componentData.children ? componentData.children.map(o => Component._createElement(o, context, h)) : [];\r\n            let props = componentData.props == null ? {} : Object.assign({}, componentData.props); //JSON.parse(JSON.stringify(componentData.props));\r\n            if (controlType != null && controlType[\"defaultProps\"]) {\r\n                props = Object.assign({}, controlType[\"defaultProps\"], props);\r\n            }\r\n            let result;\r\n            if (typeof type == 'string') {\r\n                if (props.text) {\r\n                    children.push(props.text);\r\n                }\r\n                //=========================================\r\n                // props.text 非 DOM 的 prop，并且已经使用完\r\n                delete props.text;\r\n                if (h == React.createElement) {\r\n                    delete props.attr;\r\n                }\r\n                //=========================================\r\n            }\r\n            let masterPage;\r\n            type = type == Component.Fragment ? React.Fragment : type;\r\n            let ref = props.ref;\r\n            props.ref = function (e) {\r\n                if (typeof ref == \"function\")\r\n                    ref(e);\r\n                if (e instanceof MasterPage) {\r\n                    masterPage = e;\r\n                    for (let i = 0; i < context.componentTypes.length; i++) {\r\n                        let typeName = context.componentTypes[i];\r\n                        let childComponents = masterPage.childComponents[typeName] = masterPage.childComponents[typeName] || [];\r\n                        childComponents.push(context.components[i]);\r\n                    }\r\n                }\r\n                else if (e != null) {\r\n                    context.components.push(e);\r\n                    context.componentTypes.push(typeof type == \"string\" ? type : type.name);\r\n                    // masterPage.componentCreated.fire({ component: e, type: typeof type == \"string\" ? type : type.name });\r\n                }\r\n            };\r\n            result = h(type, props, ...children);\r\n            return result;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            return null;\r\n        }\r\n    }\r\n    static register(componentName, componentType, attr) {\r\n        if (componentType == null && typeof componentName == 'function') {\r\n            componentType = componentName;\r\n            componentName = componentType.name;\r\n            componentType['componentName'] = componentName;\r\n        }\r\n        if (!componentName)\r\n            throw errors_1.Errors.argumentNull('componentName');\r\n        if (!componentType)\r\n            throw errors_1.Errors.argumentNull('componentType');\r\n        Component.componentTypes[componentName] = componentType;\r\n        if (attr)\r\n            Component.setAttribute(componentName, attr);\r\n    }\r\n}\r\n//==========================================\r\n// 用于创建 React 的 React.Fragment \r\nComponent.Fragment = \"\";\r\n//==========================================\r\nComponent.defaultComponentAttribute = {\r\n    container: false, movable: false, showHandler: false, resize: false\r\n};\r\nComponent.componentAttributes = {\r\n    'div': { container: true, movable: true, showHandler: true, resize: true },\r\n    'img': { container: false, movable: true, resize: true },\r\n    'label': { movable: true },\r\n    'ul': { container: false, movable: true, showHandler: true, resize: false },\r\n    'li': { container: true, movable: false, },\r\n    'table': { container: false, movable: true, showHandler: true, resize: true },\r\n    'thead': { container: false, movable: false },\r\n    'tbody': { container: false, movable: false },\r\n    'tfoot': { container: false, movable: false },\r\n    'tr': { container: false, movable: false },\r\n    'td': { container: true, movable: false },\r\n};\r\nComponent.componentPropEditors = {};\r\nComponent.componentPropEditorDisplay = {};\r\nComponent.componentTypes = {};\r\nexports.Component = Component;\r\nexports.MasterPageName = 'MasterPage';\r\nexports.MasterPageContext = React.createContext({ master: null });\r\nclass MasterPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.childComponents = {};\r\n        let children = MasterPage.children(props);\r\n        this.state = { children };\r\n    }\r\n    static children(props) {\r\n        let arr = props.children == null ? [] :\r\n            Array.isArray(props.children) ? props.children : [props.children];\r\n        let children = [];\r\n        arr.forEach(o => {\r\n            if (!React.isValidElement(o))\r\n                return;\r\n            children.push(o);\r\n        });\r\n        return children;\r\n    }\r\n    static getDerivedStateFromProps(props) {\r\n        let children = MasterPage.children(props);\r\n        return { children };\r\n    }\r\n    render() {\r\n        let props = {};\r\n        for (let key in this.props) {\r\n            if (key == 'ref' || key == 'id')\r\n                continue;\r\n            props[key] = this.props[key];\r\n        }\r\n        props.style = Object.assign({ minHeight: 40 }, props.style);\r\n        let children = this.state.children.filter(o => o.props.parentid == null);\r\n        let master = this;\r\n        console.assert(master != null);\r\n        return React.createElement(exports.MasterPageContext.Provider, { value: { master } }, children);\r\n    }\r\n}\r\nexports.MasterPage = MasterPage;\r\nComponent.register(exports.MasterPageName, MasterPage, { container: false });\r\n/**\r\n * 占位符，用于放置控件\r\n */\r\nclass PlaceHolder extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        if (!this.props.id) {\r\n            throw errors_1.Errors.placeHolderIdNull();\r\n        }\r\n    }\r\n    /**\r\n     * 启用拖放操作，以便通过拖放图标添加控件\r\n     */\r\n    enableAppendDroppable(element, master) {\r\n        if (element.getAttribute('enable-append-droppable'))\r\n            return;\r\n        element.setAttribute('enable-append-droppable', 'true');\r\n        console.assert(element != null);\r\n        element.addEventListener('dragover', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = style_1.appendClassName(element.className || '', 'active');\r\n            let componentName = event.dataTransfer.getData(common_1.constants.componentData);\r\n            if (componentName)\r\n                event.dataTransfer.dropEffect = \"copy\";\r\n            else\r\n                event.dataTransfer.dropEffect = \"move\";\r\n            console.log(`dragover: left:${event.layerX} top:${event.layerX}`);\r\n        });\r\n        let func = function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = style_1.removeClassName(element.className, 'active');\r\n        };\r\n        element.addEventListener('dragleave', func);\r\n        element.addEventListener('dragend', func);\r\n        element.addEventListener('dragexit', func);\r\n        element.ondrop = (event) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = style_1.removeClassName(element.className, 'active');\r\n            let ctrl;\r\n            if (event.dataTransfer)\r\n                ctrl = component_panel_1.ComponentPanel.getComponentData(event.dataTransfer);\r\n            if (!ctrl)\r\n                return;\r\n            console.assert(this.props.id != null);\r\n            console.assert(this.designer != null);\r\n            ctrl.props.parentid = this.props.id;\r\n            console.assert(master != null, 'host is null');\r\n            this.designer.appendComponent(master.props.id, ctrl);\r\n        };\r\n    }\r\n    enableMoveDroppable(element, host) {\r\n        if (element.getAttribute('enable-move-droppable'))\r\n            return;\r\n        element.setAttribute('enable-move-droppable', 'true');\r\n        $(element)\r\n            .drop('start', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            style_1.appendClassName(element, 'active');\r\n        })\r\n            .drop('drop', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            let componentData = this.designer.findComponentData(dd.sourceElement.id);\r\n            console.assert(componentData != null);\r\n            this.designer.moveComponent(dd.sourceElement.id, host.props.id);\r\n            this.designer.updateComponentProps({\r\n                componentId: \"string\", propName: \"string\", value: \"any\"\r\n            }); //dd.sourceElement.id, propName, this.props.id\r\n        })\r\n            .drop('end', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            style_1.removeClassName(element, 'active');\r\n        });\r\n    }\r\n    render() {\r\n        let empty = this.props.empty || React.createElement(\"div\", { key: common_1.guid(), className: \"empty\" }, \"\\u53EF\\u4EE5\\u62D6\\u62C9\\u63A7\\u4EF6\\u5230\\u8FD9\\u91CC\");\r\n        return React.createElement(exports.MasterPageContext.Consumer, null, (args) => {\r\n            let master = args.master;\r\n            if (master == null)\r\n                throw errors_1.Errors.canntFindMasterPage(this.props.id);\r\n            let children = [];\r\n            if (master.props && master.props.children) {\r\n                let arr;\r\n                if (Array.isArray(master.props.children)) {\r\n                    arr = master.props.children;\r\n                }\r\n                else {\r\n                    arr = [master.props.children];\r\n                }\r\n                children = arr.filter((o) => o.props.parentid != null && o.props.parentid == this.props.id);\r\n            }\r\n            return React.createElement(exports.DesignerContext.Consumer, null, args => React.createElement(exports.ComponentWrapperContext.Consumer, null, wraper => {\r\n                this.wraper = wraper;\r\n                console.assert(this.wraper != null);\r\n                if (args.designer != null && children.length == 0) {\r\n                    children = [empty];\r\n                }\r\n                let element = React.createElement(React.Fragment, null,\r\n                    this.props.children,\r\n                    children);\r\n                if (args.designer) {\r\n                    this.designer = args.designer;\r\n                    element = React.createElement(\"div\", { key: common_1.guid(), className: style_1.classNames.placeholder, ref: e => {\r\n                            if (!e)\r\n                                return;\r\n                            this.element = e;\r\n                            this.enableAppendDroppable(e, master);\r\n                            this.enableMoveDroppable(e, master);\r\n                        } }, element);\r\n                }\r\n                return element;\r\n            }));\r\n        });\r\n    }\r\n}\r\nexports.PlaceHolder = PlaceHolder;\r\nComponent.register('PlaceHolder', PlaceHolder);\r\nclass PageView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        if (!this.props.pageData)\r\n            throw errors_1.Errors.propCanntNull(PageView.name, 'pageData');\r\n    }\r\n    render() {\r\n        let element = Component.createElement(this.props.pageData);\r\n        return element;\r\n    }\r\n}\r\nexports.PageView = PageView;\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // Display fallback UI\r\n        this.setState({ error });\r\n        // You can also log the error to an error reporting service\r\n        //   logErrorToMyService(error, info);\r\n        debugger;\r\n    }\r\n    render() {\r\n        let { error } = this.state || {};\r\n        if (error) {\r\n            // You can render any custom fallback UI\r\n            return React.createElement(\"div\", { className: \"error\" },\r\n                React.createElement(\"div\", null, error.message),\r\n                React.createElement(\"div\", null, error.stack));\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\nexports.ErrorBoundary = ErrorBoundary;\r\n//# sourceMappingURL=component.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Errors {\r\n    static placeHolderIdNull() {\r\n        let msg = `Place holder property id cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static fileNotExists(fileName) {\r\n        return new Error(`File '${fileName}' is not exists.`);\r\n    }\r\n    static argumentNull(argumentName) {\r\n        return new Error(`Argument ${argumentName} is null or empty.`);\r\n    }\r\n    static argumentRangeError(argumentName) {\r\n        return new Error(`Argument ${argumentName} range error.`);\r\n    }\r\n    static pageDataIsNull() {\r\n        return new Error(`Page data is null.`);\r\n    }\r\n    static toolbarRequiredKey() {\r\n        return new Error(`Toolbar has not a key prop.`);\r\n    }\r\n    static loadPluginFail(pluginId) {\r\n        return new Error(`Load plugin '${pluginId}' fail.`);\r\n    }\r\n    static idRequired() {\r\n        return new Error(`Property id is required.`);\r\n    }\r\n    static canntFindMasterPage(componentId) {\r\n        return new Error(`Can not find master page for component container ${componentId}.`);\r\n    }\r\n    static propCanntNull(componentName, property) {\r\n        let msg = `${componentName} property ${property} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static argumentFieldCanntNull(fieldName, argumentName) {\r\n        let msg = `${fieldName} of argument ${argumentName} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n}\r\nexports.Errors = Errors;\r\n//# sourceMappingURL=errors.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconsole.log(`React is null:${React == null}`);\r\nconst common_1 = require(\"./common\");\r\nconst component_1 = require(\"./component\");\r\nconst style_1 = require(\"./style\");\r\nclass ComponentPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componets: [] };\r\n    }\r\n    get element() {\r\n        return this.toolbarElement;\r\n    }\r\n    componentDraggable(toolItemElement, componentData) {\r\n        console.assert(toolItemElement != null);\r\n        toolItemElement.draggable = true;\r\n        toolItemElement.addEventListener('dragstart', function (ev) {\r\n            componentData.props = componentData.props || {};\r\n            ev.dataTransfer.setData(common_1.constants.componentData, JSON.stringify(componentData));\r\n            ev.dataTransfer.setData('mousePosition', JSON.stringify({ x: ev.offsetX, y: ev.offsetY }));\r\n        });\r\n    }\r\n    setComponets(componets) {\r\n        this.setState({ componets });\r\n    }\r\n    static getComponentData(dataTransfer) {\r\n        var str = dataTransfer.getData(common_1.constants.componentData);\r\n        if (!str)\r\n            return;\r\n        return JSON.parse(str);\r\n    }\r\n    /** 获取光标在图标内的位置 */\r\n    static mouseInnerPosition(dataTransfer) {\r\n        let str = dataTransfer.getData('mousePosition');\r\n        if (!str)\r\n            return;\r\n        return JSON.parse(str);\r\n    }\r\n    render() {\r\n        let empty = this.props.empty || React.createElement(\"div\", { className: \"empty\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7EC4\\u4EF6\");\r\n        let props = Object.assign({}, this.props);\r\n        let componets = this.state.componets || [];\r\n        return React.createElement(component_1.DesignerContext.Consumer, null, context => {\r\n            this.designer = context.designer;\r\n            return React.createElement(\"ul\", Object.assign({}, props, { className: `${style_1.classNames.componentPanel} ${this.props.className || \"\"}`, ref: (e) => this.toolbarElement = this.toolbarElement || e }), componets.length == 0 ? empty : componets.map((c, i) => {\r\n                let props = { key: i };\r\n                props[ComponentPanel.componentIndexName] = `${i}`;\r\n                return React.createElement(\"li\", Object.assign({}, props, { className: style_1.classNames.componentIcon }),\r\n                    React.createElement(\"div\", { className: \"btn-link\" },\r\n                        React.createElement(\"i\", { className: c.icon, style: { fontSize: 44, color: 'black' }, ref: e => {\r\n                                if (!e)\r\n                                    return;\r\n                                let ctrl = c.componentData;\r\n                                this.componentDraggable(e, ctrl);\r\n                            } })),\r\n                    React.createElement(\"div\", null, c.displayName));\r\n            }));\r\n            // return <div {...props as any} className={`${classNames.componentPanel} panel panel-primary`}>\r\n            //     <div className=\"panel-heading\">工具栏</div>\r\n            //     <div className=\"panel-body\">\r\n            //     </div>\r\n            // </div>\r\n        });\r\n    }\r\n}\r\nComponentPanel.componentIndexName = \"data-component-index\";\r\nexports.ComponentPanel = ComponentPanel;\r\n//# sourceMappingURL=component-panel.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst common_1 = require(\"./common\");\r\nconst errors_1 = require(\"./errors\");\r\nconst component_1 = require(\"./component\");\r\nconst style_1 = require(\"./style\");\r\nconst component_wrapper_1 = require(\"./component-wrapper\");\r\nclass PageDesigner extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.componentSelected = common_1.Callback.create();\r\n        this.componentRemoved = common_1.Callback.create();\r\n        this.componentAppend = common_1.Callback.create();\r\n        this.componentUpdated = common_1.Callback.create();\r\n        this.designtimeComponentDidMount = common_1.Callback.create();\r\n        let components = {};\r\n        PageDesigner.fillPageData(props.pageData, components);\r\n        this.state = { pageData: props.pageData, components };\r\n        this.designtimeComponentDidMount.add((args) => {\r\n            console.log(`this:designer event:controlComponentDidMount`);\r\n        });\r\n    }\r\n    static setComponetRefProp(pageData, components) {\r\n        //=========================================================\r\n        // 纪录当前 pageData 控件 ID\r\n        let componentIds = {};\r\n        //=========================================================\r\n        PageDesigner.travelComponentData(pageData).forEach(item => {\r\n            console.assert(item.props != null && item.props.id != null);\r\n            componentIds[item.type] = componentIds[item.type] || [];\r\n            componentIds[item.type].push(item.props[\"id\"]);\r\n            let itemRef = item.props.ref;\r\n            item.props.ref = (e) => {\r\n                if (e != null) {\r\n                    components[item.type] = components[item.type] || [];\r\n                    components[item.type].push(e);\r\n                }\r\n                if (typeof itemRef == \"function\")\r\n                    itemRef(e);\r\n            };\r\n        });\r\n        //=========================================================\r\n        // 仅保留 componentIds 中的控件 \r\n        let names = Object.getOwnPropertyNames(components);\r\n        for (let i = 0; i < names.length; i++) {\r\n            let typename = names[i];\r\n            let ids = componentIds[typename] || [];\r\n            components[typename] = (components[typename] || []).filter(o => ids.indexOf(o[\"id\"] || o.props[\"id\"]) >= 0);\r\n        }\r\n        //=========================================================\r\n    }\r\n    /** 对 pageData 进行缺少的字段进行补充 */\r\n    static fillPageData(pageData, components) {\r\n        if (pageData == null) {\r\n            return;\r\n        }\r\n        pageData.children = pageData.children || [];\r\n        PageDesigner.nameComponent(pageData);\r\n        PageDesigner.setComponetRefProp(pageData, components);\r\n    }\r\n    allComponents() {\r\n        let r = [];\r\n        for (let key in this.state.components) {\r\n            r.push(...this.state.components[key]);\r\n        }\r\n        return r;\r\n    }\r\n    /** 页面数据 */\r\n    get pageData() {\r\n        return this.state.pageData;\r\n    }\r\n    /** 获取已选择了的组件编号 */\r\n    get selectedComponentIds() {\r\n        return this.selectedComponents.map(o => o.props.id);\r\n    }\r\n    /** 获取已选择了的组件 */\r\n    get selectedComponents() {\r\n        let arr = new Array();\r\n        let stack = new Array();\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item.props != null && item.props.selected == true)\r\n                arr.push(item);\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++)\r\n                stack.push(children[i]);\r\n        }\r\n        return arr;\r\n    }\r\n    /** 更新组件属性 */\r\n    updateComponentProp(componentId, propName, value) {\r\n        return this.updateComponentProps({ componentId, propName, value });\r\n    }\r\n    /** 更新组件多个属性 */\r\n    updateComponentProps(...componentProps) {\r\n        let componentDatas = [];\r\n        for (let i = 0; i < componentProps.length; i++) {\r\n            let { componentId, propName, value } = componentProps[i];\r\n            let componentData = this.findComponentData(componentId);\r\n            if (componentData == null)\r\n                continue;\r\n            let navPropsNames = propName.split(\".\");\r\n            console.assert(componentData != null);\r\n            console.assert(navPropsNames != null, 'props is null');\r\n            componentData.props = componentData.props || {};\r\n            let obj = componentData.props;\r\n            for (let i = 0; i < navPropsNames.length - 1; i++) {\r\n                obj = obj[navPropsNames[i]] = obj[navPropsNames[i]] || {};\r\n            }\r\n            obj[navPropsNames[navPropsNames.length - 1]] = value;\r\n            componentDatas.push(componentData);\r\n        }\r\n        this.setState(this.state);\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    sortChildren(parentId, childIds) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!childIds)\r\n            throw errors_1.Errors.argumentNull('childIds');\r\n        let pageData = this.state.pageData;\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        console.assert(parentControl.children != null);\r\n        console.assert((parentControl.children || []).length == childIds.length);\r\n        let p = parentControl;\r\n        parentControl.children = childIds.map(o => {\r\n            let child = p.children.filter(a => a.props.id == o)[0];\r\n            console.assert(child != null, `child ${o} is null`);\r\n            return child;\r\n        });\r\n        this.setState({ pageData });\r\n    }\r\n    /**\r\n     * 对组件及其子控件进行命名\r\n     * @param component\r\n     */\r\n    static nameComponent(component) {\r\n        let namedComponents = {};\r\n        let props = component.props = component.props || {};\r\n        if (!props.name) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (namedComponents[name]);\r\n            namedComponents[name] = component;\r\n            props.name = name;\r\n        }\r\n        if (!props.id)\r\n            props.id = common_1.guid();\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < component.children.length; i++) {\r\n            PageDesigner.nameComponent(component.children[i]);\r\n        }\r\n    }\r\n    /**\r\n     * 添加控件\r\n     * @param parentId 父控件编号\r\n     * @param componentData 控件数据\r\n     * @param componentIndex 新添加组件在子组件中的次序\r\n     */\r\n    appendComponent(parentId, componentData, componentIndex) {\r\n        if (!parentId)\r\n            throw errors_1.Errors.argumentNull('parentId');\r\n        if (!componentData)\r\n            throw errors_1.Errors.argumentNull('childComponent');\r\n        PageDesigner.nameComponent(componentData);\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        parentControl.children = parentControl.children || [];\r\n        if (componentIndex != null) {\r\n            parentControl.children.splice(componentIndex, 0, componentData);\r\n        }\r\n        else {\r\n            parentControl.children.push(componentData);\r\n        }\r\n        let { pageData } = this.state;\r\n        this.setState({ pageData });\r\n        this.selectComponent(componentData.props.id);\r\n        this.componentAppend.fire(this);\r\n    }\r\n    /**\r\n     * 设置控件位置\r\n     * @param componentId 组件编号\r\n     * @param position 组件位置\r\n     */\r\n    setComponentPosition(componentId, position) {\r\n        return this.setComponentsPosition([{ componentId, position }]);\r\n    }\r\n    /**\r\n     * 设置控件大小\r\n     * @param componentId 组件编号\r\n     * @param size 组件大小\r\n     */\r\n    setComponentSize(componentId, size) {\r\n        console.assert(componentId != null);\r\n        console.assert(size != null);\r\n        let componentData = this.findComponentData(componentId);\r\n        if (!componentData)\r\n            throw new Error(`Control ${componentId} is not exits.`);\r\n        let style = componentData.props.style = (componentData.props.style || {});\r\n        if (size.height)\r\n            style.height = size.height;\r\n        if (size.width)\r\n            style.width = size.width;\r\n        let { pageData } = this.state;\r\n        this.setState({ pageData });\r\n        this.componentUpdated.fire([componentData]);\r\n    }\r\n    /** 设置多个组件的位置 */\r\n    setComponentsPosition(positions) {\r\n        let componentDatas = new Array();\r\n        positions.forEach(o => {\r\n            let { componentId } = o;\r\n            let { left, top } = o.position;\r\n            if (typeof left == \"number\") {\r\n                left = `${left}px`;\r\n            }\r\n            if (typeof top == \"number\") {\r\n                top = `${top}px`;\r\n            }\r\n            let componentData = this.findComponentData(componentId);\r\n            if (!componentData)\r\n                throw new Error(`Control ${componentId} is not exits.`);\r\n            let style = componentData.props.style = (componentData.props.style || {});\r\n            if (left)\r\n                style.left = left;\r\n            if (top)\r\n                style.top = top;\r\n            let { pageData } = this.state;\r\n            this.setState({ pageData });\r\n            componentDatas.push(componentData);\r\n        });\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    /**\r\n     * 选择指定的控件\r\n     * @param control 指定的控件\r\n     */\r\n    selectComponent(componentIds) {\r\n        if (typeof componentIds == 'string')\r\n            componentIds = [componentIds];\r\n        var stack = [];\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            let isSelectedControl = componentIds.indexOf(item.props.id) >= 0;\r\n            item.props.selected = isSelectedControl;\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++) {\r\n                stack.push(children[i]);\r\n            }\r\n        }\r\n        this.setState({ pageData: this.pageData });\r\n        this.componentSelected.fire(this.selectedComponentIds);\r\n        //====================================================\r\n        // 设置焦点，以便获取键盘事件\r\n        this.element.focus();\r\n        //====================================================\r\n    }\r\n    /** 移除控件 */\r\n    removeComponent(...componentIds) {\r\n        let pageData = this.state.pageData;\r\n        if (!pageData || !pageData.children || pageData.children.length == 0)\r\n            return;\r\n        componentIds.forEach(controlId => {\r\n            this.removeComponentFrom(controlId, pageData.children);\r\n        });\r\n        this.setState({ pageData });\r\n        this.componentRemoved.fire(componentIds);\r\n    }\r\n    /**\r\n     * 移动控件到另外一个控件容器\r\n     * @param componentId 要移动的组件编号\r\n     * @param parentId 目标组件编号\r\n     * @param beforeChildId 组件的前一个子组件编号\r\n     */\r\n    moveComponent(componentId, parentId, childComponentIndex) {\r\n        let component = this.findComponentData(componentId);\r\n        if (component == null)\r\n            throw new Error(`Cannt find component by id ${componentId}`);\r\n        console.assert(component != null, `Cannt find component by id ${componentId}`);\r\n        let pageData = this.state.pageData;\r\n        console.assert(pageData.children != null);\r\n        this.removeComponentFrom(componentId, pageData.children);\r\n        this.appendComponent(parentId, component, childComponentIndex);\r\n    }\r\n    removeComponentFrom(controlId, collection) {\r\n        let controlIndex = null;\r\n        for (let i = 0; i < collection.length; i++) {\r\n            if (controlId == collection[i].props.id) {\r\n                controlIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (controlIndex == null) {\r\n            for (let i = 0; i < collection.length; i++) {\r\n                let o = collection[i];\r\n                if (o.children && o.children.length > 0) {\r\n                    let isRemoved = this.removeComponentFrom(controlId, o.children);\r\n                    if (isRemoved) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        if (controlIndex == 0) {\r\n            collection.shift();\r\n        }\r\n        else if (controlIndex == collection.length - 1) {\r\n            collection.pop();\r\n        }\r\n        else {\r\n            collection.splice(controlIndex, 1);\r\n        }\r\n        return true;\r\n    }\r\n    static travelComponentData(pageData, filter) {\r\n        let stack = new Array();\r\n        stack.push(pageData);\r\n        let r = [];\r\n        // return new Promise((resolve, reject) => {\r\n        filter = filter || (() => true);\r\n        while (stack.length > 0) {\r\n            let item = stack.shift();\r\n            if (filter(item)) {\r\n                r.push(item);\r\n            }\r\n            //===============================================\r\n            // 子元素有可能为字符串, 过滤出对象\r\n            let children = (item.children || []).filter(o => typeof o == 'object');\r\n            //===============================================\r\n            stack.push(...children);\r\n        }\r\n        return r;\r\n    }\r\n    findComponetsByTypeName(componentTypeName) {\r\n        let components = this.state.components[componentTypeName];\r\n        return components;\r\n    }\r\n    findComponentData(componentId) {\r\n        let pageData = this.state.pageData;\r\n        if (!pageData)\r\n            throw errors_1.Errors.pageDataIsNull();\r\n        let componentDatas = PageDesigner.travelComponentData(pageData, (item) => item.props.id == componentId);\r\n        return componentDatas[0];\r\n    }\r\n    onKeyDown(e) {\r\n        const DELETE_KEY_CODE = 46;\r\n        if (e.keyCode == DELETE_KEY_CODE) {\r\n            if (this.selectedComponents.length == 0)\r\n                return;\r\n            this.removeComponent(...this.selectedComponentIds);\r\n        }\r\n    }\r\n    createDesignTimeElement(type, props, ...children) {\r\n        if (type == null)\r\n            throw errors_1.Errors.argumentNull('type');\r\n        if (props == null)\r\n            throw errors_1.Errors.argumentNull('props');\r\n        if (props.id == null)\r\n            throw errors_1.Errors.argumentFieldCanntNull('id', 'props');\r\n        console.assert(props.id != null);\r\n        if (props.id != null)\r\n            props.key = props.id;\r\n        //===================================================\r\n        // 获取对象的 ComponentAttribute ，以从对象 props 中获取的为准\r\n        let attr1 = component_1.Component.getAttribute(type);\r\n        console.assert(attr1 != null);\r\n        let attr2 = props.attr || {};\r\n        let attr = Object.assign({}, attr1, attr2);\r\n        delete props.attr;\r\n        //===================================================\r\n        let className = props.selected ? style_1.appendClassName(props.className || '', style_1.classNames.componentSelected) : props.className;\r\n        let wrapperProps = Object.assign({}, props);\r\n        delete wrapperProps.ref;\r\n        wrapperProps.className = className;\r\n        return React.createElement(component_wrapper_1.ComponentWrapper, Object.assign({}, wrapperProps, { designer: this, source: { type, attr, props, children } }));\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        PageDesigner.fillPageData(props.pageData, state.components);\r\n        return { pageData: props.pageData };\r\n    }\r\n    render() {\r\n        let designer = this;\r\n        let { pageData } = this.state;\r\n        let style = this.props.style;\r\n        let result = React.createElement(\"div\", { className: style_1.classNames.designer, tabIndex: 1, style: style, ref: e => this.element = e || this.element, onKeyDown: (e) => this.onKeyDown(e) },\r\n            React.createElement(component_1.DesignerContext.Provider, { value: { designer } }, (() => {\r\n                let _root = pageData ? component_1.Component.createElement(pageData, this.createDesignTimeElement.bind(this)) : null;\r\n                return _root;\r\n            })()));\r\n        return result;\r\n    }\r\n}\r\nPageDesigner.defaultProps = { pageData: null, wrapDesignTimeElement: true };\r\nexports.PageDesigner = PageDesigner;\r\n//# sourceMappingURL=page-designer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nrequire(\"./jquery\");\r\nrequire(\"../lib/jquery.event.drag-2.2\");\r\nrequire(\"../lib/jquery.event.drag.live-2.2\");\r\nrequire(\"../lib/jquery.event.drop-2.2\");\r\nrequire(\"../lib/jquery.event.drop.live-2.2\");\r\nvar common_1 = require(\"./common\");\r\nexports.strings = common_1.proptDisplayNames;\r\nexports.proptDisplayNames = common_1.proptDisplayNames;\r\nvar component_1 = require(\"./component\");\r\nexports.Component = component_1.Component;\r\nexports.DesignerContext = component_1.DesignerContext;\r\nexports.MasterPage = component_1.MasterPage;\r\nexports.MasterPageContext = component_1.MasterPageContext;\r\nexports.PlaceHolder = component_1.PlaceHolder;\r\nexports.PageView = component_1.PageView;\r\nvar component_panel_1 = require(\"./component-panel\");\r\nexports.ComponentPanel = component_panel_1.ComponentPanel;\r\nvar editor_panel_1 = require(\"./editor-panel\");\r\nexports.EditorPanel = editor_panel_1.EditorPanel;\r\nvar page_designer_1 = require(\"./page-designer\");\r\nexports.PageDesigner = page_designer_1.PageDesigner;\r\nvar prop_editor_1 = require(\"./prop-editor\");\r\nexports.PropEditor = prop_editor_1.PropEditor;\r\nexports.TextInput = prop_editor_1.TextInput;\r\nvar style_1 = require(\"./style\");\r\nexports.classNames = style_1.classNames;\r\n// (function (factory) {\r\n//     if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n//         var v = factory(require, exports);\r\n//         if (v !== undefined) module.exports = v;\r\n//     }\r\n//     else if (typeof define === \"function\" && define.amd) {\r\n//         define([\"require\", \"exports\"], factory);\r\n//     }\r\n// })(function (require, exports) {\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// import * as j from '../lib/jquery-2.1.3'\r\n// let jquery = window['$'] || window['jQuery'];\r\n// if (jquery == null) {\r\n//     window['$'] = window['jQuery'] = j\r\n// }\r\nconst j = require(\"jquery\");\r\nlet jquery = window['$'] || window['jQuery'];\r\nif (jquery == null) {\r\n    window['$'] = window['jQuery'] = j;\r\n}\r\n//# sourceMappingURL=jquery.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","/*! \r\n * jquery.event.drag - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2008-06-04 \r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x\r\n\r\n;(function( $ ){\r\n\r\n// add the jquery instance method\r\n$.fn.drag = function( str, arg, opts ){\r\n\t// figure out the event type\r\n\tvar type = typeof str == \"string\" ? str : \"\",\r\n\t// figure out the event handler...\r\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\r\n\t// fix the event type\r\n\tif ( type.indexOf(\"drag\") !== 0 ) \r\n\t\ttype = \"drag\"+ type;\r\n\t// were options passed\r\n\topts = ( str == fn ? arg : opts ) || {};\r\n\t// trigger or bind event handler\r\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\r\n};\r\n\r\n// local refs (increase compression)\r\nvar $event = $.event, \r\n$special = $event.special,\r\n// configure the drag special event \r\ndrag = $special.drag = {\r\n\t\r\n\t// these are the default settings\r\n\tdefaults: {\r\n\t\twhich: 1, // mouse button pressed to start drag sequence\r\n\t\tdistance: 0, // distance dragged before dragstart\r\n\t\tnot: ':input', // selector to suppress dragging on target elements\r\n\t\thandle: null, // selector to match handle target elements\r\n\t\trelative: false, // true to use \"position\", false to use \"offset\"\r\n\t\tdrop: true, // false to suppress drop events, true or selector to allow\r\n\t\tclick: false // false to suppress click events after dragend (no proxy)\r\n\t},\r\n\t\r\n\t// the key name for stored drag data\r\n\tdatakey: \"dragdata\",\r\n\t\r\n\t// prevent bubbling for better performance\r\n\tnoBubble: true,\r\n\t\r\n\t// count bound related events\r\n\tadd: function( obj ){ \r\n\t\t// read the interaction data\r\n\t\tvar data = $.data( this, drag.datakey ),\r\n\t\t// read any passed options \r\n\t\topts = obj.data || {};\r\n\t\t// count another realted event\r\n\t\tdata.related += 1;\r\n\t\t// extend data options bound with this event\r\n\t\t// don't iterate \"opts\" in case it is a node \r\n\t\t$.each( drag.defaults, function( key, def ){\r\n\t\t\tif ( opts[ key ] !== undefined )\r\n\t\t\t\tdata[ key ] = opts[ key ];\r\n\t\t});\r\n\t},\r\n\t\r\n\t// forget unbound related events\r\n\tremove: function(){\r\n\t\t$.data( this, drag.datakey ).related -= 1;\r\n\t},\r\n\t\r\n\t// configure interaction, capture settings\r\n\tsetup: function(){\r\n\t\t// check for related events\r\n\t\tif ( $.data( this, drag.datakey ) ) \r\n\t\t\treturn;\r\n\t\t// initialize the drag data with copied defaults\r\n\t\tvar data = $.extend({ related:0 }, drag.defaults );\r\n\t\t// store the interaction data\r\n\t\t$.data( this, drag.datakey, data );\r\n\t\t// bind the mousedown event, which starts drag interactions\r\n\t\t$event.add( this, \"touchstart mousedown\", drag.init, data );\r\n\t\t// prevent image dragging in IE...\r\n\t\tif ( this.attachEvent ) \r\n\t\t\tthis.attachEvent(\"ondragstart\", drag.dontstart ); \r\n\t},\r\n\t\r\n\t// destroy configured interaction\r\n\tteardown: function(){\r\n\t\tvar data = $.data( this, drag.datakey ) || {};\r\n\t\t// check for related events\r\n\t\tif ( data.related ) \r\n\t\t\treturn;\r\n\t\t// remove the stored data\r\n\t\t$.removeData( this, drag.datakey );\r\n\t\t// remove the mousedown event\r\n\t\t$event.remove( this, \"touchstart mousedown\", drag.init );\r\n\t\t// enable text selection\r\n\t\tdrag.textselect( true ); \r\n\t\t// un-prevent image dragging in IE...\r\n\t\tif ( this.detachEvent ) \r\n\t\t\tthis.detachEvent(\"ondragstart\", drag.dontstart ); \r\n\t},\r\n\t\t\r\n\t// initialize the interaction\r\n\tinit: function( event ){ \r\n\t\t// sorry, only one touch at a time\r\n\t\tif ( drag.touched ) \r\n\t\t\treturn;\r\n\t\t// the drag/drop interaction data\r\n\t\tvar dd = event.data, results;\r\n\t\t// check the which directive\r\n\t\tif ( event.which != 0 && dd.which > 0 && event.which != dd.which ) \r\n\t\t\treturn; \r\n\t\t// check for suppressed selector\r\n\t\tif ( $( event.target ).is( dd.not ) ) \r\n\t\t\treturn;\r\n\t\t// check for handle selector\r\n\t\tif ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length ) \r\n\t\t\treturn;\r\n\r\n\t\tdrag.touched = event.type == 'touchstart' ? this : null;\r\n\t\tdd.propagates = 1;\r\n\t\tdd.mousedown = this;\r\n\t\tdd.interactions = [ drag.interaction( this, dd ) ];\r\n\t\tdd.target = event.target;\r\n\t\tdd.pageX = event.pageX;\r\n\t\tdd.pageY = event.pageY;\r\n\t\tdd.dragging = null;\r\n\t\t// handle draginit event... \r\n\t\tresults = drag.hijack( event, \"draginit\", dd );\r\n\t\t// early cancel\r\n\t\tif ( !dd.propagates )\r\n\t\t\treturn;\r\n\t\t// flatten the result set\r\n\t\tresults = drag.flatten( results );\r\n\t\t// insert new interaction elements\r\n\t\tif ( results && results.length ){\r\n\t\t\tdd.interactions = [];\r\n\t\t\t$.each( results, function(){\r\n\t\t\t\tdd.interactions.push( drag.interaction( this, dd ) );\r\n\t\t\t});\r\n\t\t}\r\n\t\t// remember how many interactions are propagating\r\n\t\tdd.propagates = dd.interactions.length;\r\n\t\t// locate and init the drop targets\r\n\t\tif ( dd.drop !== false && $special.drop ) \r\n\t\t\t$special.drop.handler( event, dd );\r\n\t\t// disable text selection\r\n\t\tdrag.textselect( false ); \r\n\t\t// bind additional events...\r\n\t\tif ( drag.touched )\r\n\t\t\t$event.add( drag.touched, \"touchmove touchend\", drag.handler, dd );\r\n\t\telse \r\n\t\t\t$event.add( document, \"mousemove mouseup\", drag.handler, dd );\r\n\t\t// helps prevent text selection or scrolling\r\n\t\tif ( !drag.touched || dd.live )\r\n\t\t\treturn false;\r\n\t},\t\r\n\t\r\n\t// returns an interaction object\r\n\tinteraction: function( elem, dd ){\r\n\t\tvar offset = $( elem )[ dd.relative ? \"position\" : \"offset\" ]() || { top:0, left:0 };\r\n\t\treturn {\r\n\t\t\tdrag: elem, \r\n\t\t\tcallback: new drag.callback(), \r\n\t\t\tdroppable: [],\r\n\t\t\toffset: offset\r\n\t\t};\r\n\t},\r\n\t\r\n\t// handle drag-releatd DOM events\r\n\thandler: function( event ){ \r\n\t\t// read the data before hijacking anything\r\n\t\tvar dd = event.data;\t\r\n\t\t// handle various events\r\n\t\tswitch ( event.type ){\r\n\t\t\t// mousemove, check distance, start dragging\r\n\t\t\tcase !dd.dragging && 'touchmove': \r\n\t\t\t\tevent.preventDefault();\r\n\t\t\tcase !dd.dragging && 'mousemove':\r\n\t\t\t\t//  drag tolerance, x� + y� = distance�\r\n\t\t\t\tif ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) ) \r\n\t\t\t\t\tbreak; // distance tolerance not reached\r\n\t\t\t\tevent.target = dd.target; // force target from \"mousedown\" event (fix distance issue)\r\n\t\t\t\tdrag.hijack( event, \"dragstart\", dd ); // trigger \"dragstart\"\r\n\t\t\t\tif ( dd.propagates ) // \"dragstart\" not rejected\r\n\t\t\t\t\tdd.dragging = true; // activate interaction\r\n\t\t\t// mousemove, dragging\r\n\t\t\tcase 'touchmove':\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tif ( dd.dragging ){\r\n\t\t\t\t\t// trigger \"drag\"\t\t\r\n\t\t\t\t\tdrag.hijack( event, \"drag\", dd );\r\n\t\t\t\t\tif ( dd.propagates ){\r\n\t\t\t\t\t\t// manage drop events\r\n\t\t\t\t\t\tif ( dd.drop !== false && $special.drop )\r\n\t\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"dropstart\", \"dropend\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak; // \"drag\" not rejected, stop\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.type = \"mouseup\"; // helps \"drop\" handler behave\r\n\t\t\t\t}\r\n\t\t\t// mouseup, stop dragging\r\n\t\t\tcase 'touchend': \r\n\t\t\tcase 'mouseup': \r\n\t\t\tdefault:\r\n\t\t\t\tif ( drag.touched )\r\n\t\t\t\t\t$event.remove( drag.touched, \"touchmove touchend\", drag.handler ); // remove touch events\r\n\t\t\t\telse \r\n\t\t\t\t\t$event.remove( document, \"mousemove mouseup\", drag.handler ); // remove page events\t\r\n\t\t\t\tif ( dd.dragging ){\r\n\t\t\t\t\tif ( dd.drop !== false && $special.drop )\r\n\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"drop\"\r\n\t\t\t\t\tdrag.hijack( event, \"dragend\", dd ); // trigger \"dragend\"\t\r\n\t\t\t\t}\r\n\t\t\t\tdrag.textselect( true ); // enable text selection\r\n\t\t\t\t// if suppressing click events...\r\n\t\t\t\tif ( dd.click === false && dd.dragging )\r\n\t\t\t\t\t$.data( dd.mousedown, \"suppress.click\", new Date().getTime() + 5 );\r\n\t\t\t\tdd.dragging = drag.touched = false; // deactivate element\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t// re-use event object for custom events\r\n\thijack: function( event, type, dd, x, elem ){\r\n\t\t// not configured\r\n\t\tif ( !dd ) \r\n\t\t\treturn;\r\n\t\t// remember the original event and type\r\n\t\tvar orig = { event:event.originalEvent, type:event.type },\r\n\t\t// is the event drag related or drog related?\r\n\t\tmode = type.indexOf(\"drop\") ? \"drag\" : \"drop\",\r\n\t\t// iteration vars\r\n\t\tresult, i = x || 0, ia, $elems, callback,\r\n\t\tlen = !isNaN( x ) ? x : dd.interactions.length;\r\n\t\t// modify the event type\r\n\t\tevent.type = type;\r\n\t\t// remove the original event\r\n\t\tevent.originalEvent = null;\r\n\t\t// initialize the results\r\n\t\tdd.results = [];\r\n\t\t// handle each interacted element\r\n\t\tdo if ( ia = dd.interactions[ i ] ){\r\n\t\t\t// validate the interaction\r\n\t\t\tif ( type !== \"dragend\" && ia.cancelled )\r\n\t\t\t\tcontinue;\r\n\t\t\t// set the dragdrop properties on the event object\r\n\t\t\tcallback = drag.properties( event, dd, ia );\r\n\t\t\t// prepare for more results\r\n\t\t\tia.results = [];\r\n\t\t\t// handle each element\r\n\t\t\t$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){\r\n\t\t\t\t// identify drag or drop targets individually\r\n\t\t\t\tcallback.target = subject;\r\n\t\t\t\t// force propagtion of the custom event\r\n\t\t\t\tevent.isPropagationStopped = function(){ return false; };\r\n\t\t\t\t// handle the event\t\r\n\t\t\t\tresult = subject ? $event.dispatch.call( subject, event, callback ) : null;\r\n\t\t\t\t// stop the drag interaction for this element\r\n\t\t\t\tif ( result === false ){\r\n\t\t\t\t\tif ( mode == \"drag\" ){\r\n\t\t\t\t\t\tia.cancelled = true;\r\n\t\t\t\t\t\tdd.propagates -= 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( type == \"drop\" ){\r\n\t\t\t\t\t\tia[ mode ][p] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// assign any dropinit elements\r\n\t\t\t\telse if ( type == \"dropinit\" )\r\n\t\t\t\t\tia.droppable.push( drag.element( result ) || subject );\r\n\t\t\t\t// accept a returned proxy element \r\n\t\t\t\tif ( type == \"dragstart\" )\r\n\t\t\t\t\tia.proxy = $( drag.element( result ) || ia.drag )[0];\r\n\t\t\t\t// remember this result\t\r\n\t\t\t\tia.results.push( result );\r\n\t\t\t\t// forget the event result, for recycling\r\n\t\t\t\tdelete event.result;\r\n\t\t\t\t// break on cancelled handler\r\n\t\t\t\tif ( type !== \"dropinit\" )\r\n\t\t\t\t\treturn result;\r\n\t\t\t});\t\r\n\t\t\t// flatten the results\t\r\n\t\t\tdd.results[ i ] = drag.flatten( ia.results );\t\r\n\t\t\t// accept a set of valid drop targets\r\n\t\t\tif ( type == \"dropinit\" )\r\n\t\t\t\tia.droppable = drag.flatten( ia.droppable );\r\n\t\t\t// locate drop targets\r\n\t\t\tif ( type == \"dragstart\" && !ia.cancelled )\r\n\t\t\t\tcallback.update(); \r\n\t\t}\r\n\t\twhile ( ++i < len )\r\n\t\t// restore the original event & type\r\n\t\tevent.type = orig.type;\r\n\t\tevent.originalEvent = orig.event;\r\n\t\t// return all handler results\r\n\t\treturn drag.flatten( dd.results );\r\n\t},\r\n\t\t\r\n\t// extend the callback object with drag/drop properties...\r\n\tproperties: function( event, dd, ia ){\t\t\r\n\t\tvar obj = ia.callback;\r\n\t\t// elements\r\n\t\tobj.drag = ia.drag;\r\n\t\tobj.proxy = ia.proxy || ia.drag;\r\n\t\t// starting mouse position\r\n\t\tobj.startX = dd.pageX;\r\n\t\tobj.startY = dd.pageY;\r\n\t\t// current distance dragged\r\n\t\tobj.deltaX = event.pageX - dd.pageX;\r\n\t\tobj.deltaY = event.pageY - dd.pageY;\r\n\t\t// original element position\r\n\t\tobj.originalX = ia.offset.left;\r\n\t\tobj.originalY = ia.offset.top;\r\n\t\t// adjusted element position\r\n\t\tobj.offsetX = obj.originalX + obj.deltaX; \r\n\t\tobj.offsetY = obj.originalY + obj.deltaY;\r\n\t\t// assign the drop targets information\r\n\t\tobj.drop = drag.flatten( ( ia.drop || [] ).slice() );\r\n\t\tobj.available = drag.flatten( ( ia.droppable || [] ).slice() );\r\n\t\treturn obj;\t\r\n\t},\r\n\t\r\n\t// determine is the argument is an element or jquery instance\r\n\telement: function( arg ){\r\n\t\tif ( arg && ( arg.jquery || arg.nodeType == 1 ) )\r\n\t\t\treturn arg;\r\n\t},\r\n\t\r\n\t// flatten nested jquery objects and arrays into a single dimension array\r\n\tflatten: function( arr ){\r\n\t\treturn $.map( arr, function( member ){\r\n\t\t\treturn member && member.jquery ? $.makeArray( member ) : \r\n\t\t\t\tmember && member.length ? drag.flatten( member ) : member;\r\n\t\t});\r\n\t},\r\n\t\r\n\t// toggles text selection attributes ON (true) or OFF (false)\r\n\ttextselect: function( bool ){ \r\n\t\t$( document )[ bool ? \"unbind\" : \"bind\" ](\"selectstart\", drag.dontstart )\r\n\t\t\t.css(\"MozUserSelect\", bool ? \"\" : \"none\" );\r\n\t\t// .attr(\"unselectable\", bool ? \"off\" : \"on\" )\r\n\t\tdocument.unselectable = bool ? \"off\" : \"on\"; \r\n\t},\r\n\t\r\n\t// suppress \"selectstart\" and \"ondragstart\" events\r\n\tdontstart: function(){ \r\n\t\treturn false; \r\n\t},\r\n\t\r\n\t// a callback instance contructor\r\n\tcallback: function(){}\r\n\t\r\n};\r\n\r\n// callback methods\r\ndrag.callback.prototype = {\r\n\tupdate: function(){\r\n\t\tif ( $special.drop && this.available.length )\r\n\t\t\t$.each( this.available, function( i ){\r\n\t\t\t\t$special.drop.locate( this, i );\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\n// patch $.event.$dispatch to allow suppressing clicks\r\nvar $dispatch = $event.dispatch;\r\n$event.dispatch = function( event ){\r\n\tif ( $.data( this, \"suppress.\"+ event.type ) - new Date().getTime() > 0 ){\r\n\t\t$.removeData( this, \"suppress.\"+ event.type );\r\n\t\treturn;\r\n\t}\r\n\treturn $dispatch.apply( this, arguments );\r\n};\r\n\r\n// event fix hooks for touch events...\r\nvar touchHooks = \r\n$event.fixHooks.touchstart = \r\n$event.fixHooks.touchmove = \r\n$event.fixHooks.touchend =\r\n$event.fixHooks.touchcancel = {\r\n\tprops: \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\r\n\tfilter: function( event, orig ) {\r\n\t\tif ( orig ){\r\n\t\t\tvar touched = ( orig.touches && orig.touches[0] )\r\n\t\t\t\t|| ( orig.changedTouches && orig.changedTouches[0] )\r\n\t\t\t\t|| null; \r\n\t\t\t// iOS webkit: touchstart, touchmove, touchend\r\n\t\t\tif ( touched ) \r\n\t\t\t\t$.each( touchHooks.props, function( i, prop ){\r\n\t\t\t\t\tevent[ prop ] = touched[ prop ];\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n};\r\n\r\n// share the same special event configuration with related events...\r\n$special.draginit = $special.dragstart = $special.dragend = drag;\r\n\r\n})( jQuery );","/*! \r\n * jquery.event.drag.live - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2010-06-07\r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x, event.drag 2.2\r\n\r\n;(function( $ ){\r\n\t\r\n// local refs (increase compression)\r\nvar $event = $.event,\r\n// ref the special event config\r\ndrag = $event.special.drag,\r\n// old drag event add method\r\norigadd = drag.add,\r\n// old drag event teradown method\r\norigteardown = drag.teardown;\r\n\r\n// allow events to bubble for delegation\r\ndrag.noBubble = false;\r\n\r\n// the namespace for internal live events\r\ndrag.livekey = \"livedrag\";\r\n\r\n// new drop event add method\r\ndrag.add = function( obj ){ \r\n\t// call the old method\r\n\torigadd.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drag.datakey );\r\n\t// bind the live \"draginit\" delegator\r\n\tif ( !data.live && obj.selector ){\r\n\t\tdata.live = true;\r\n\t\t$event.add( this, \"draginit.\"+ drag.livekey, drag.delegate );\r\n\t}\r\n};\r\n\r\n// new drop event teardown method\r\ndrag.teardown = function(){ \r\n\t// call the old method\r\n\torigteardown.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drag.datakey ) || {};\r\n\t// bind the live \"draginit\" delegator\r\n\tif ( data.live ){\r\n\t\t// remove the \"live\" delegation\r\n\t\t$event.remove( this, \"draginit.\"+ drag.livekey, drag.delegate );\r\n\t\tdata.live = false;\r\n\t}\r\n};\r\n\r\n// identify potential delegate elements\r\ndrag.delegate = function( event ){\r\n\t// local refs\r\n\tvar elems = [], target, \r\n\t// element event structure\r\n\tevents = $.data( this, \"events\" ) || {};\r\n\t// query live events\r\n\t$.each( events || [], function( key, arr ){\r\n\t\t// no event type matches\r\n\t\tif ( key.indexOf(\"drag\") !== 0 )\r\n\t\t\treturn;\r\n\t\t$.each( arr || [], function( i, obj ){\r\n\t\t\t// locate the element to delegate\r\n\t\t\ttarget = $( event.target ).closest( obj.selector, event.currentTarget )[0];\r\n\t\t\t// no element found\r\n\t\t\tif ( !target ) \r\n\t\t\t\treturn;\r\n\t\t\t// add an event handler\r\n\t\t\t$event.add( target, obj.origType+'.'+drag.livekey, obj.origHandler || obj.handler, obj.data );\r\n\t\t\t// remember new elements\r\n\t\t\tif ( $.inArray( target, elems ) < 0 )\r\n\t\t\t\telems.push( target );\t\t\r\n\t\t});\r\n\t});\r\n\t// if there are no elements, break\r\n\tif ( !elems.length ) \r\n\t\treturn false;\r\n\t// return the matched results, and clenup when complete\t\t\r\n\treturn $( elems ).bind(\"dragend.\"+ drag.livekey, function(){\r\n\t\t$event.remove( this, \".\"+ drag.livekey ); // cleanup delegation\r\n\t});\r\n};\r\n\t\r\n})( jQuery );","/*! \n * jquery.event.drop - v 2.2\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\n * Open Source MIT License - http://threedubmedia.com/code/license\n */\n// Created: 2008-06-04 \n// Updated: 2012-05-21\n// REQUIRES: jquery 1.7.x, event.drag 2.2\n\n;(function($){ // secure $ jQuery alias\n\n// Events: drop, dropstart, dropend\n\n// add the jquery instance method\n$.fn.drop = function( str, arg, opts ){\n\t// figure out the event type\n\tvar type = typeof str == \"string\" ? str : \"\",\n\t// figure out the event handler...\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\n\t// fix the event type\n\tif ( type.indexOf(\"drop\") !== 0 ) \n\t\ttype = \"drop\"+ type;\n\t// were options passed\n\topts = ( str == fn ? arg : opts ) || {};\n\t// trigger or bind event handler\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\n};\n\n// DROP MANAGEMENT UTILITY\n// returns filtered drop target elements, caches their positions\n$.drop = function( opts ){ \n\topts = opts || {};\n\t// safely set new options...\n\tdrop.multi = opts.multi === true ? Infinity : \n\t\topts.multi === false ? 1 : !isNaN( opts.multi ) ? opts.multi : drop.multi;\n\tdrop.delay = opts.delay || drop.delay;\n\tdrop.tolerance = $.isFunction( opts.tolerance ) ? opts.tolerance : \n\t\topts.tolerance === null ? null : drop.tolerance;\n\tdrop.mode = opts.mode || drop.mode || 'intersect';\n};\n\n// local refs (increase compression)\nvar $event = $.event, \n$special = $event.special,\n// configure the drop special event\ndrop = $.event.special.drop = {\n\n\t// these are the default settings\n\tmulti: 1, // allow multiple drop winners per dragged element\n\tdelay: 20, // async timeout delay\n\tmode: 'overlap', // drop tolerance mode\n\t\t\n\t// internal cache\n\ttargets: [], \n\t\n\t// the key name for stored drop data\n\tdatakey: \"dropdata\",\n\t\t\n\t// prevent bubbling for better performance\n\tnoBubble: true,\n\t\n\t// count bound related events\n\tadd: function( obj ){ \n\t\t// read the interaction data\n\t\tvar data = $.data( this, drop.datakey );\n\t\t// count another realted event\n\t\tdata.related += 1;\n\t},\n\t\n\t// forget unbound related events\n\tremove: function(){\n\t\t$.data( this, drop.datakey ).related -= 1;\n\t},\n\t\n\t// configure the interactions\n\tsetup: function(){\n\t\t// check for related events\n\t\tif ( $.data( this, drop.datakey ) ) \n\t\t\treturn;\n\t\t// initialize the drop element data\n\t\tvar data = { \n\t\t\trelated: 0,\n\t\t\tactive: [],\n\t\t\tanyactive: 0,\n\t\t\twinner: 0,\n\t\t\tlocation: {}\n\t\t};\n\t\t// store the drop data on the element\n\t\t$.data( this, drop.datakey, data );\n\t\t// store the drop target in internal cache\n\t\tdrop.targets.push( this );\n\t},\n\t\n\t// destroy the configure interaction\t\n\tteardown: function(){ \n\t\tvar data = $.data( this, drop.datakey ) || {};\n\t\t// check for related events\n\t\tif ( data.related ) \n\t\t\treturn;\n\t\t// remove the stored data\n\t\t$.removeData( this, drop.datakey );\n\t\t// reference the targeted element\n\t\tvar element = this;\n\t\t// remove from the internal cache\n\t\tdrop.targets = $.grep( drop.targets, function( target ){ \n\t\t\treturn ( target !== element ); \n\t\t});\n\t},\n\t\n\t// shared event handler\n\thandler: function( event, dd ){ \n\t\t// local vars\n\t\tvar results, $targets;\n\t\t// make sure the right data is available\n\t\tif ( !dd ) \n\t\t\treturn;\n\t\t// handle various events\n\t\tswitch ( event.type ){\n\t\t\t// draginit, from $.event.special.drag\n\t\t\tcase 'mousedown': // DROPINIT >>\n\t\t\tcase 'touchstart': // DROPINIT >>\n\t\t\t\t// collect and assign the drop targets\n\t\t\t\t$targets =  $( drop.targets );\n\t\t\t\tif ( typeof dd.drop == \"string\" )\n\t\t\t\t\t$targets = $targets.filter( dd.drop );\n\t\t\t\t// reset drop data winner properties\n\t\t\t\t$targets.each(function(){\n\t\t\t\t\tvar data = $.data( this, drop.datakey );\n\t\t\t\t\tdata.active = [];\n\t\t\t\t\tdata.anyactive = 0;\n\t\t\t\t\tdata.winner = 0;\n\t\t\t\t});\n\t\t\t\t// set available target elements\n\t\t\t\tdd.droppable = $targets;\n\t\t\t\t// activate drop targets for the initial element being dragged\n\t\t\t\t$special.drag.hijack( event, \"dropinit\", dd ); \n\t\t\t\tbreak;\n\t\t\t// drag, from $.event.special.drag\n\t\t\tcase 'mousemove': // TOLERATE >>\n\t\t\tcase 'touchmove': // TOLERATE >>\n\t\t\t\tdrop.event = event; // store the mousemove event\n\t\t\t\tif ( !drop.timer )\n\t\t\t\t\t// monitor drop targets\n\t\t\t\t\tdrop.tolerate( dd ); \n\t\t\t\tbreak;\n\t\t\t// dragend, from $.event.special.drag\n\t\t\tcase 'mouseup': // DROP >> DROPEND >>\n\t\t\tcase 'touchend': // DROP >> DROPEND >>\n\t\t\t\tdrop.timer = clearTimeout( drop.timer ); // delete timer\t\n\t\t\t\tif ( dd.propagates ){\n\t\t\t\t\t$special.drag.hijack( event, \"drop\", dd ); \n\t\t\t\t\t$special.drag.hijack( event, \"dropend\", dd ); \n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t}\n\t},\n\t\t\n\t// returns the location positions of an element\n\tlocate: function( elem, index ){ \n\t\tvar data = $.data( elem, drop.datakey ),\n\t\t$elem = $( elem ), \n\t\tposi = $elem.offset() || {}, \n\t\theight = $elem.outerHeight(), \n\t\twidth = $elem.outerWidth(),\n\t\tlocation = { \n\t\t\telem: elem, \n\t\t\twidth: width, \n\t\t\theight: height,\n\t\t\ttop: posi.top, \n\t\t\tleft: posi.left, \n\t\t\tright: posi.left + width, \n\t\t\tbottom: posi.top + height\n\t\t};\n\t\t// drag elements might not have dropdata\n\t\tif ( data ){\n\t\t\tdata.location = location;\n\t\t\tdata.index = index;\n\t\t\tdata.elem = elem;\n\t\t}\n\t\treturn location;\n\t},\n\t\n\t// test the location positions of an element against another OR an X,Y coord\n\tcontains: function( target, test ){ // target { location } contains test [x,y] or { location }\n\t\treturn ( ( test[0] || test.left ) >= target.left && ( test[0] || test.right ) <= target.right\n\t\t\t&& ( test[1] || test.top ) >= target.top && ( test[1] || test.bottom ) <= target.bottom ); \n\t},\n\t\n\t// stored tolerance modes\n\tmodes: { // fn scope: \"$.event.special.drop\" object \n\t\t// target with mouse wins, else target with most overlap wins\n\t\t'intersect': function( event, proxy, target ){\n\t\t\treturn this.contains( target, [ event.pageX, event.pageY ] ) ? // check cursor\n\t\t\t\t1e9 : this.modes.overlap.apply( this, arguments ); // check overlap\n\t\t},\n\t\t// target with most overlap wins\t\n\t\t'overlap': function( event, proxy, target ){\n\t\t\t// calculate the area of overlap...\n\t\t\treturn Math.max( 0, Math.min( target.bottom, proxy.bottom ) - Math.max( target.top, proxy.top ) )\n\t\t\t\t* Math.max( 0, Math.min( target.right, proxy.right ) - Math.max( target.left, proxy.left ) );\n\t\t},\n\t\t// proxy is completely contained within target bounds\t\n\t\t'fit': function( event, proxy, target ){\n\t\t\treturn this.contains( target, proxy ) ? 1 : 0;\n\t\t},\n\t\t// center of the proxy is contained within target bounds\t\n\t\t'middle': function( event, proxy, target ){\n\t\t\treturn this.contains( target, [ proxy.left + proxy.width * .5, proxy.top + proxy.height * .5 ] ) ? 1 : 0;\n\t\t}\n\t},\t\n\t\n\t// sort drop target cache by by winner (dsc), then index (asc)\n\tsort: function( a, b ){\n\t\treturn ( b.winner - a.winner ) || ( a.index - b.index );\n\t},\n\t\t\n\t// async, recursive tolerance execution\n\ttolerate: function( dd ){\t\t\n\t\t// declare local refs\n\t\tvar i, drp, drg, data, arr, len, elem,\n\t\t// interaction iteration variables\n\t\tx = 0, ia, end = dd.interactions.length,\n\t\t// determine the mouse coords\n\t\txy = [ drop.event.pageX, drop.event.pageY ],\n\t\t// custom or stored tolerance fn\n\t\ttolerance = drop.tolerance || drop.modes[ drop.mode ];\n\t\t// go through each passed interaction...\n\t\tdo if ( ia = dd.interactions[x] ){\n\t\t\t// check valid interaction\n\t\t\tif ( !ia )\n\t\t\t\treturn; \n\t\t\t// initialize or clear the drop data\n\t\t\tia.drop = [];\n\t\t\t// holds the drop elements\n\t\t\tarr = []; \n\t\t\tlen = ia.droppable.length;\n\t\t\t// determine the proxy location, if needed\n\t\t\tif ( tolerance )\n\t\t\t\tdrg = drop.locate( ia.proxy ); \n\t\t\t// reset the loop\n\t\t\ti = 0;\n\t\t\t// loop each stored drop target\n\t\t\tdo if ( elem = ia.droppable[i] ){ \n\t\t\t\tdata = $.data( elem, drop.datakey );\n\t\t\t\tdrp = data.location;\n\t\t\t\tif ( !drp ) continue;\n\t\t\t\t// find a winner: tolerance function is defined, call it\n\t\t\t\tdata.winner = tolerance ? tolerance.call( drop, drop.event, drg, drp ) \n\t\t\t\t\t// mouse position is always the fallback\n\t\t\t\t\t: drop.contains( drp, xy ) ? 1 : 0; \n\t\t\t\tarr.push( data );\t\n\t\t\t} while ( ++i < len ); // loop \n\t\t\t// sort the drop targets\n\t\t\tarr.sort( drop.sort );\t\t\t\n\t\t\t// reset the loop\n\t\t\ti = 0;\n\t\t\t// loop through all of the targets again\n\t\t\tdo if ( data = arr[ i ] ){\n\t\t\t\t// winners...\n\t\t\t\tif ( data.winner && ia.drop.length < drop.multi ){\n\t\t\t\t\t// new winner... dropstart\n\t\t\t\t\tif ( !data.active[x] && !data.anyactive ){\n\t\t\t\t\t\t// check to make sure that this is not prevented\n\t\t\t\t\t\tif ( $special.drag.hijack( drop.event, \"dropstart\", dd, x, data.elem )[0] !== false ){ \t\n\t\t\t\t\t\t\tdata.active[x] = 1;\n\t\t\t\t\t\t\tdata.anyactive += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if false, it is not a winner\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdata.winner = 0;\n\t\t\t\t\t}\n\t\t\t\t\t// if it is still a winner\n\t\t\t\t\tif ( data.winner )\n\t\t\t\t\t\tia.drop.push( data.elem );\n\t\t\t\t}\n\t\t\t\t// losers... \n\t\t\t\telse if ( data.active[x] && data.anyactive == 1 ){\n\t\t\t\t\t// former winner... dropend\n\t\t\t\t\t$special.drag.hijack( drop.event, \"dropend\", dd, x, data.elem ); \n\t\t\t\t\tdata.active[x] = 0;\n\t\t\t\t\tdata.anyactive -= 1;\n\t\t\t\t}\n\t\t\t} while ( ++i < len ); // loop \t\t\n\t\t} while ( ++x < end ) // loop\n\t\t// check if the mouse is still moving or is idle\n\t\tif ( drop.last && xy[0] == drop.last.pageX && xy[1] == drop.last.pageY ) \n\t\t\tdelete drop.timer; // idle, don't recurse\n\t\telse  // recurse\n\t\t\tdrop.timer = setTimeout(function(){ \n\t\t\t\tdrop.tolerate( dd ); \n\t\t\t}, drop.delay );\n\t\t// remember event, to compare idleness\n\t\tdrop.last = drop.event; \n\t}\n\t\n};\n\n// share the same special event configuration with related events...\n$special.dropinit = $special.dropstart = $special.dropend = drop;\n\n})(jQuery); // confine scope\t","/*! \n * jquery.event.drop.live - v 2.2\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\n * Open Source MIT License - http://threedubmedia.com/code/license\n */\n// Created: 2010-06-07\n// Updated: 2012-05-21\n// REQUIRES: jquery 1.7.x, event.drag 2.2, event.drop 2.2\n\n;(function($){ // secure $ jQuery alias\n\n// local refs (increase compression)\nvar $event = $.event,\n// ref the drop special event config\ndrop = $event.special.drop,\n// old drop event add method\norigadd = drop.add,\n// old drop event teradown method\norigteardown = drop.teardown;\n\n// allow events to bubble for delegation\ndrop.noBubble = false;\n\n// the namespace for internal live events\ndrop.livekey = \"livedrop\";\n\n// new drop event add method\ndrop.add = function( obj ){ \n\t// call the old method\n\torigadd.apply( this, arguments );\n\t// read the data\n\tvar data = $.data( this, drop.datakey );\n\t// bind the live \"dropinit\" delegator\n\tif ( !data.live && obj.selector ){\n\t\tdata.live = true;\n\t\t$event.add( this, \"dropinit.\"+ drop.livekey, drop.delegate );\n\t}\n};\n\n// new drop event teardown method\ndrop.teardown = function(){ \n\t// call the old method\n\torigteardown.apply( this, arguments );\n\t// read the data\n\tvar data = $.data( this, drop.datakey ) || {};\n\t// remove the live \"dropinit\" delegator\n\tif ( data.live ){\n\t\t// remove the \"live\" delegation\n\t\t$event.remove( this, \"dropinit\", drop.delegate );\n\t\tdata.live = false;\n\t}\n};\n\n// identify potential delegate elements\ndrop.delegate = function( event, dd ){\n\t// local refs\n\tvar elems = [], $targets, \n\t// element event structure\n\tevents = $.data( this, \"events\" ) || {};\n\t// query live events\n\t$.each( events || [], function( key, arr ){\n\t\t// no event type matches\n\t\tif ( key.indexOf(\"drop\") !== 0 )\n\t\t\treturn;\n\t\t$.each( arr, function( i, obj ){\n\t\t\t// locate the elements to delegate\n\t\t\t$targets = $( event.currentTarget ).find( obj.selector );\n\t\t\t// no element found\n\t\t\tif ( !$targets.length ) \n\t\t\t\treturn;\n\t\t\t// take each target...\n\t\t\t$targets.each(function(){\n\t\t\t\t// add an event handler\n\t\t\t\t$event.add( this, obj.origType +'.'+ drop.livekey, obj.origHandler || obj.handler, obj.data );\n\t\t\t\t// remember new elements\n\t\t\t\tif ( $.inArray( this, elems ) < 0 )\n\t\t\t\t\telems.push( this );\t\n\t\t\t});\t\n\t\t});\n\t});\n\t// may not exist when artifically triggering dropinit event\n\tif ( dd )\n\t\t// clean-up after the interaction ends\n\t\t$event.add( dd.drag, \"dragend.\"+drop.livekey, function(){\n\t\t\t$.each( elems.concat( this ), function(){\n\t\t\t\t$event.remove( this, '.'+ drop.livekey );\t\t\t\t\t\t\t\n\t\t\t});\n\t\t});\n\t//drop.delegates.push( elems );\n\treturn elems.length ? $( elems ) : false;\n};\n\n})( jQuery ); // confine scope\t","\"use strict\";\r\n/// <reference path=\"./typings/declare.d.ts\"/>\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst errors_1 = require(\"./errors\");\r\nconst common_1 = require(\"./common\");\r\nconst component_panel_1 = require(\"./component-panel\");\r\nconst style_1 = require(\"./style\");\r\nconst component_1 = require(\"./component\");\r\n/**\r\n * 组件包装器，对组件进行包装，实现组件设计时的行为。\r\n * 1. 组件的移动\r\n * 2. 组件的拖放\r\n */\r\nclass ComponentWrapper extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // Display fallback UI\r\n        this.setState({ error });\r\n        // You can also log the error to an error reporting service\r\n        //   logErrorToMyService(error, info);\r\n        debugger;\r\n    }\r\n    designtimeBehavior(element, attr) {\r\n        if (!element)\r\n            throw errors_1.Errors.argumentNull('element');\r\n        if (!attr)\r\n            throw errors_1.Errors.argumentNull('args');\r\n        if (element.getAttribute('data-behavior')) {\r\n            return;\r\n        }\r\n        element.setAttribute('data-behavior', 'behavior');\r\n        let designer = this.props.designer;\r\n        console.assert(attr.container != null);\r\n        console.assert(attr.movable != null);\r\n        if (attr.container) {\r\n            ComponentWrapper.enableAppendDroppable(element, designer);\r\n        }\r\n        if (attr.movable) {\r\n            console.assert(element != null);\r\n            ComponentWrapper.draggable(designer, element);\r\n            if (this.handler != null)\r\n                ComponentWrapper.draggable(designer, element, this.handler);\r\n        }\r\n        else {\r\n            element.onclick = (ev) => ComponentWrapper.invokeOnClick(ev, designer, element);\r\n        }\r\n    }\r\n    /**\r\n     * 启用拖放操作，以便通过拖放图标添加控件\r\n     */\r\n    static enableAppendDroppable(element, designer) {\r\n        console.assert(element != null);\r\n        element.addEventListener('dragover', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let componentName = event.dataTransfer.getData(common_1.constants.componentData);\r\n            if (componentName)\r\n                event.dataTransfer.dropEffect = \"copy\";\r\n            else\r\n                event.dataTransfer.dropEffect = \"move\";\r\n            console.log(`dragover: left:${event['layerX']} top:${event['layerX']}`);\r\n        });\r\n        element.addEventListener(\"drop\", function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let args1 = arguments[1];\r\n            if (!event.dataTransfer)\r\n                return;\r\n            let ctrl = component_panel_1.ComponentPanel.getComponentData(event.dataTransfer);\r\n            if (!ctrl)\r\n                return;\r\n            ctrl.props.style = ctrl.props.style || {};\r\n            designer.pageData.props.style = designer.pageData.props.style || {};\r\n            if (!ctrl.props.style.position) {\r\n                ctrl.props.style.position = designer.pageData.props.style.position;\r\n            }\r\n            let pos = component_panel_1.ComponentPanel.mouseInnerPosition(event.dataTransfer);\r\n            console.assert(pos != null);\r\n            if (ctrl.props.style.position == 'absolute') {\r\n                ctrl.props.style.left = event['layerX'] - pos.x;\r\n                ctrl.props.style.top = event['layerY'] - pos.y;\r\n            }\r\n            designer.appendComponent(element.id, ctrl);\r\n        });\r\n    }\r\n    static isResizeHandleClassName(className) {\r\n        let classNames = [\r\n            'resize_handle NE', 'resize_handle NN', 'resize_handle NW',\r\n            'resize_handle WW', 'resize_handle EE', 'resize_handle SW',\r\n            'resize_handle SS', 'resize_handle SE',\r\n        ];\r\n        return classNames.indexOf(className) >= 0;\r\n    }\r\n    static draggable(designer, element, handler) {\r\n        if (!designer)\r\n            throw errors_1.Errors.argumentNull('designer');\r\n        if (!element)\r\n            throw errors_1.Errors.argumentNull('element');\r\n        console.assert(element.id != \"\");\r\n        handler = handler || element;\r\n        let componentId = element.id;\r\n        console.assert(componentId != \"\");\r\n        let startPos;\r\n        let rect;\r\n        let dragStart;\r\n        $(handler)\r\n            .drag(\"init\", function (ev) {\r\n            startPos = $(element).position();\r\n            if ($(this).is(`.${style_1.classNames.componentSelected}`))\r\n                return $(`.${style_1.classNames.componentSelected}`);\r\n        })\r\n            .drag('start', function (ev, dd) {\r\n            dd.attr = $(ev.target).prop(\"className\");\r\n            dd.width = $(this).width();\r\n            dd.height = $(this).height();\r\n            dd.sourceElement = element;\r\n            dragStart = Date.now();\r\n        })\r\n            .drag(function (ev, dd) {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            console.log(`drop:`);\r\n            console.log(dd.drop);\r\n            rect = {};\r\n            if (dd.attr.indexOf(\"E\") > -1) {\r\n                rect.width = Math.max(32, dd.width + dd.deltaX);\r\n            }\r\n            if (dd.attr.indexOf(\"S\") > -1) {\r\n                rect.height = Math.max(32, dd.height + dd.deltaY);\r\n            }\r\n            if (dd.attr.indexOf(\"W\") > -1) {\r\n                rect.width = Math.max(32, dd.width - dd.deltaX);\r\n                setLeft(dd);\r\n            }\r\n            if (dd.attr.indexOf(\"N\") > -1) {\r\n                rect.height = Math.max(32, dd.height - dd.deltaY);\r\n                setTop(dd);\r\n            }\r\n            if (dd.attr.indexOf(\"WW\") >= 0)\r\n                setLeft(dd);\r\n            if (dd.attr.indexOf(\"NE\") >= 0 || dd.attr.indexOf(\"NW\") >= 0 || dd.attr.indexOf(\"SW\") >= 0)\r\n                setPosition(dd);\r\n            if (dd.attr.indexOf(\"NN\") >= 0)\r\n                setTop(dd);\r\n            if (dd.attr.indexOf(\"drag\") > -1) {\r\n                rect.top = dd.offsetY;\r\n                rect.left = dd.offsetX;\r\n            }\r\n            if (!ComponentWrapper.isResizeHandleClassName(dd.attr)) {\r\n                setPosition(dd);\r\n            }\r\n            if (dd.attr)\r\n                $(this).css(rect);\r\n        }, { click: true })\r\n            .drag('end', function (ev, dd) {\r\n            let interval = Date.now() - dragStart;\r\n            ComponentWrapper.isDrag = interval >= 300;\r\n            if (!ComponentWrapper.isResizeHandleClassName(dd.attr)) {\r\n                let left = startPos.left + dd.deltaX;\r\n                let top = startPos.top + dd.deltaY;\r\n                designer.setComponentPosition(element.id, { left, top });\r\n                element.style.transform = '';\r\n            }\r\n            else {\r\n                let left, top;\r\n                if (dd.attr.indexOf(\"W\") > -1)\r\n                    left = startPos.left + dd.deltaX;\r\n                if (dd.attr.indexOf(\"N\") > -1)\r\n                    top = startPos.top + dd.deltaY;\r\n                element.style.transform = '';\r\n                designer.setComponentPosition(element.id, { left, top });\r\n                designer.setComponentSize(componentId, rect);\r\n            }\r\n        })\r\n            .click((ev) => {\r\n            ComponentWrapper.invokeOnClick(ev, designer, element);\r\n        });\r\n        let setPosition = (dd) => {\r\n            console.log(['dd.offsetX, dd.offsetY', dd.offsetX, dd.offsetY]);\r\n            console.log(dd);\r\n            element.style.transform = `translate(${dd.deltaX}px,${dd.deltaY}px)`;\r\n        };\r\n        let setTop = (dd) => {\r\n            element.style.transform = `translateY(${dd.deltaY}px)`;\r\n        };\r\n        let setLeft = (dd) => {\r\n            element.style.transform = `translateX(${dd.deltaX}px)`;\r\n        };\r\n    }\r\n    static invokeOnClick(ev, designer, element) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n        if (ComponentWrapper.isDrag) {\r\n            ComponentWrapper.isDrag = false;\r\n            return;\r\n        }\r\n        let elementID = element.id;\r\n        if (!ev.ctrlKey) {\r\n            designer.selectComponent(element.id);\r\n            return;\r\n        }\r\n        let selectedControlIds = designer.selectedComponentIds;\r\n        console.assert(elementID != \"\");\r\n        if (selectedControlIds.indexOf(elementID) >= 0) {\r\n            selectedControlIds = selectedControlIds.filter(o => o != elementID);\r\n        }\r\n        else {\r\n            selectedControlIds.push(elementID);\r\n        }\r\n        designer.selectComponent(selectedControlIds);\r\n    }\r\n    componentDidMount() {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        let attr = this.props.source.attr;\r\n        this.designtimeBehavior(this.element, attr);\r\n    }\r\n    render() {\r\n        let { error } = this.state || {};\r\n        if (error) {\r\n            return React.createElement(\"div\", { className: \"error\" },\r\n                React.createElement(\"div\", null, error.message),\r\n                React.createElement(\"div\", null, error.stack));\r\n        }\r\n        let attr = this.props.source.attr;\r\n        let shouldWrapper = attr.resize || (typeof this.props.source.type != 'string' && this.props.source.type != component_1.MasterPage);\r\n        if (!shouldWrapper) {\r\n            return this.renderWidthoutWrapper();\r\n        }\r\n        let props = this.props.source.props;\r\n        let style = props.style = JSON.parse(JSON.stringify(props.style || {})); // 深复制 style\r\n        let { top, left, position, width, height, display, visibility } = style;\r\n        let className = style_1.appendClassName(props.className || '', style_1.classNames.componentWrapper);\r\n        className = props.selected ? style_1.appendClassName(className, style_1.classNames.componentSelected) : className;\r\n        let wrapperProps = {\r\n            id: props.id,\r\n            className,\r\n            style: { top, left, position, width, height, display, visibility },\r\n            ref: (e) => this.element = e || this.element\r\n        };\r\n        let move_handle = props.selected && attr.showHandler ? React.createElement(\"div\", { className: \"move_handle\", style: {}, ref: e => this.handler = e || this.handler }) : null;\r\n        let showResizeHandle = attr.resize && props.style.position == 'absolute' && props.selected;\r\n        let source = this.props.source;\r\n        if (props.style) {\r\n            delete props.style.left;\r\n            delete props.style.top;\r\n            delete props.style.position;\r\n            if (wrapperProps.style.width && wrapperProps.style.width != 'unset')\r\n                props.style.width = '100%';\r\n            if (wrapperProps.style.height && wrapperProps.style.height != 'unset')\r\n                props.style.height = '100%';\r\n        }\r\n        // source.props.ref = function (e) {\r\n        // };\r\n        return React.createElement(component_1.ComponentWrapperContext.Provider, { value: this },\r\n            React.createElement(\"div\", Object.assign({}, wrapperProps),\r\n                move_handle,\r\n                showResizeHandle ?\r\n                    React.createElement(React.Fragment, null,\r\n                        React.createElement(\"div\", { className: \"resize_handle NE\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle NN\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle NW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle WW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle EE\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SS\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SE\" })) : null,\r\n                this.createRawElement(source.type, source.props, source.children)));\r\n    }\r\n    renderWidthoutWrapper() {\r\n        let { type, props, children } = this.props.source;\r\n        let ref = props.ref;\r\n        props.ref = (e) => {\r\n            if (typeof ref == \"function\")\r\n                ref(e);\r\n            if (!e)\r\n                return;\r\n            if (e.tagName) {\r\n                let attr = this.props.source.attr;\r\n                this.designtimeBehavior(e, attr);\r\n                return;\r\n            }\r\n        };\r\n        if (props.selected) {\r\n            props.className = style_1.appendClassName(props.className || '', style_1.classNames.componentSelected);\r\n        }\r\n        let element = this.createRawElement(type, props, children);\r\n        return React.createElement(component_1.ComponentWrapperContext.Provider, { value: this }, element);\r\n    }\r\n    createRawElement(type, props, children) {\r\n        let isEmptyElement = (children || []).length == 0;\r\n        if (isEmptyElement) {\r\n            let emtpy = this.designTimeEmptyElement(type, props);\r\n            if (emtpy != null)\r\n                children = [emtpy];\r\n        }\r\n        return React.createElement(type, props, ...children);\r\n    }\r\n    designTimeEmptyElement(type, props) {\r\n        if (type == 'input' || type == 'img' || type == 'meta' || type == 'link')\r\n            return null;\r\n        let typename = typeof type == 'string' ? type : type.name;\r\n        let text = this.designTimeText(typename, props);\r\n        return text;\r\n    }\r\n    designTimeText(type, props) {\r\n        let text = props.text;\r\n        if (text) {\r\n            return text;\r\n        }\r\n        text = text || props.name || type;\r\n        return text;\r\n    }\r\n}\r\nComponentWrapper.isDrag = false;\r\nexports.ComponentWrapper = ComponentWrapper;\r\n//# sourceMappingURL=component-wrapper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst property_editor_1 = require(\"./property-editor\");\r\nconst style_1 = require(\"./style\");\r\nclass EditorPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componentDatas: [], designer: null };\r\n        this.designerComponentChanged = () => {\r\n            console.assert(this.designer != null);\r\n            this.setState({ designer: this.designer });\r\n        };\r\n    }\r\n    get designer() {\r\n        return this._designer;\r\n    }\r\n    set designer(value) {\r\n        if (this._designer) {\r\n            this._designer.componentRemoved.remove(this.designerComponentChanged);\r\n            this._designer.componentAppend.remove(this.designerComponentChanged);\r\n            this._designer.componentUpdated.remove(this.designerComponentChanged);\r\n            this._designer.componentSelected.remove(this.designerComponentChanged);\r\n        }\r\n        if (value) {\r\n            value.componentRemoved.add(this.designerComponentChanged);\r\n            value.componentAppend.add(this.designerComponentChanged);\r\n            value.componentUpdated.add(this.designerComponentChanged);\r\n            value.componentSelected.add(this.designerComponentChanged);\r\n        }\r\n        this._designer = value;\r\n        this.setState({ designer: value });\r\n    }\r\n    render() {\r\n        let { empty } = this.props;\r\n        empty = empty || React.createElement(\"div\", { className: \"empty\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7684\\u5C5E\\u6027\");\r\n        let { designer } = this.state;\r\n        return React.createElement(\"div\", { className: `${style_1.classNames.editorPanel} ${this.props.className || \"\"}`, ref: (e) => this.element = e || this.element },\r\n            React.createElement(property_editor_1.PropertyEditor, { designer: designer, ref: e => this.editor = e || this.editor, empty: empty, customRender: this.props.customRender }));\r\n    }\r\n}\r\nexports.EditorPanel = EditorPanel;\r\n//# sourceMappingURL=editor-panel.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst component_1 = require(\"./component\");\r\nconst common_1 = require(\"./common\");\r\nconst errors_1 = require(\"./errors\");\r\nclass PropertyEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._element = null;\r\n        this.state = { designer: this.props.designer };\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        return { designer: props.designer };\r\n    }\r\n    getEditors(designer) {\r\n        if (designer == null) {\r\n            return [];\r\n        }\r\n        // 各个控件相同的编辑器\r\n        let commonPropEditorInfos = [];\r\n        let selectedComponents = designer.selectedComponents;\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let componentData = selectedComponents[i];\r\n            let propEditorInfos = component_1.Component.getPropEditors(componentData);\r\n            if (i == 0) {\r\n                commonPropEditorInfos = propEditorInfos || [];\r\n            }\r\n            else {\r\n                let items = [];\r\n                commonPropEditorInfos.forEach(propInfo1 => {\r\n                    propEditorInfos.forEach(propInfo2 => {\r\n                        let propName1 = propInfo1.propName; //propInfo1.propNames.join('.')\r\n                        let propName2 = propInfo2.propName; //propInfo2.propNames.join('.')\r\n                        if (propInfo1.editorType == propInfo2.editorType && propName1 == propName2) {\r\n                            items.push(propInfo1);\r\n                        }\r\n                    });\r\n                });\r\n                commonPropEditorInfos = items;\r\n            }\r\n        }\r\n        // 各个控件相同的属性值\r\n        let commonFlatProps;\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let control = selectedComponents[i];\r\n            let controlProps = Object.assign({}, control.props);\r\n            delete controlProps.children;\r\n            // controlProps = this.flatProps(controlProps)\r\n            if (i == 0) {\r\n                commonFlatProps = controlProps;\r\n            }\r\n            else {\r\n                let obj = {};\r\n                for (let key in commonFlatProps) {\r\n                    if (commonFlatProps[key] == controlProps[key])\r\n                        obj[key] = controlProps[key];\r\n                }\r\n                commonFlatProps = obj;\r\n            }\r\n        }\r\n        let editors = [];\r\n        for (let i = 0; i < commonPropEditorInfos.length; i++) {\r\n            let propEditorInfo = commonPropEditorInfos[i];\r\n            let propName = propEditorInfo.propName;\r\n            ;\r\n            let editorType = propEditorInfo.editorType;\r\n            let value = this.propValue(propName, commonFlatProps);\r\n            let editorProps = {\r\n                value: value,\r\n                editComponents: selectedComponents,\r\n                updateComponentProp: (value) => {\r\n                    let componentProps = selectedComponents.map(o => ({\r\n                        componentId: o.props.id, propName: propEditorInfo.propName, value\r\n                    }));\r\n                    designer.updateComponentProps(...componentProps);\r\n                }\r\n            };\r\n            let editor = React.createElement(editorType, editorProps);\r\n            editors.push({ prop: propEditorInfo.propName, editor, group: propEditorInfo.group });\r\n        }\r\n        return editors;\r\n    }\r\n    propValue(propName, props) {\r\n        if (!propName)\r\n            throw errors_1.Errors.argumentNull(\"propName\");\r\n        if (!props)\r\n            throw errors_1.Errors.argumentNull(\"props\");\r\n        let navPropsNames = propName.split(\".\");\r\n        let obj = props;\r\n        for (let i = 0; i < navPropsNames.length; i++) {\r\n            obj = obj[navPropsNames[i]];\r\n            if (obj == null)\r\n                return null;\r\n        }\r\n        return obj;\r\n    }\r\n    render() {\r\n        let { designer } = this.state;\r\n        let editors = this.getEditors(designer);\r\n        if (editors.length == 0) {\r\n            let empty = this.props.empty;\r\n            return React.createElement(\"div\", { className: \"text-center\" }, empty);\r\n        }\r\n        if (this.props.customRender) {\r\n            let items = editors.map(o => Object.assign({ displayName: common_1.proptDisplayNames[o.prop] || o.prop }, o));\r\n            let r = this.props.customRender(designer.selectedComponents, items);\r\n            if (r != null) {\r\n                return r;\r\n            }\r\n        }\r\n        let groupEditorsArray = [];\r\n        for (let i = 0; i < editors.length; i++) {\r\n            let group = editors[i].group || '';\r\n            let groupEditors = groupEditorsArray.filter(o => o.group == group)[0];\r\n            if (groupEditors == null) {\r\n                groupEditors = { group: editors[i].group, editors: [] };\r\n                groupEditorsArray.push(groupEditors);\r\n            }\r\n            groupEditors.editors.push({ prop: editors[i].prop, editor: editors[i].editor });\r\n        }\r\n        return React.createElement(React.Fragment, null, groupEditorsArray.map((g) => React.createElement(\"div\", { key: g.group, className: \"panel panel-default\" },\r\n            g.group ? React.createElement(\"div\", { className: \"panel-heading\" }, common_1.proptDisplayNames[g.group] || g.group) : null,\r\n            React.createElement(\"div\", { className: \"panel-body\" }, g.editors.map((o, i) => React.createElement(\"div\", { key: o.prop, className: \"form-group clearfix\" },\r\n                React.createElement(\"label\", null, common_1.proptDisplayNames[o.prop] || o.prop),\r\n                React.createElement(\"div\", { className: \"control\" },\r\n                    React.createElement(component_1.ErrorBoundary, null, o.editor))))))));\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n}\r\nexports.PropertyEditor = PropertyEditor;\r\n//# sourceMappingURL=property-editor.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nclass PropEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    static dropdown(items, valueType) {\r\n        return dropdown(items, valueType);\r\n    }\r\n    static textInput() {\r\n        return TextInput;\r\n    }\r\n}\r\nexports.PropEditor = PropEditor;\r\nclass TextInput extends PropEditor {\r\n    render() {\r\n        let { value } = this.props;\r\n        return React.createElement(\"input\", { className: 'form-control', value: value || '', onChange: e => {\r\n                // this.setState({ value: e.target.value })\r\n                this.props.updateComponentProp(e.target.value);\r\n            } });\r\n    }\r\n}\r\nexports.TextInput = TextInput;\r\nfunction dropdown(items, valueType) {\r\n    let itemsPromise;\r\n    let textValues = [];\r\n    if (valueType == null && Array.isArray(items)) {\r\n        valueType = items.length > 0 && typeof items[0] == \"number\" ? \"number\" : \"string\";\r\n        for (let i = 0; i < items.length; i++) {\r\n            textValues[i] = { text: items[i], value: items[i] };\r\n        }\r\n    }\r\n    else if (valueType == null) {\r\n        valueType = \"string\";\r\n        let propNames = Object.getOwnPropertyNames(items);\r\n        for (let i = 0; i < propNames.length; i++) {\r\n            textValues[i] = { text: items[propNames[i]], value: propNames[i] };\r\n        }\r\n    }\r\n    else if (Array.isArray(items)) {\r\n        textValues = items;\r\n    }\r\n    else {\r\n        itemsPromise = items;\r\n    }\r\n    class Dropdown extends PropEditor {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {};\r\n        }\r\n        componentDidMount() {\r\n            return __awaiter(this, void 0, void 0, function* () {\r\n                if (itemsPromise) {\r\n                    let items = yield itemsPromise;\r\n                    this.setState({ items });\r\n                }\r\n            });\r\n        }\r\n        render() {\r\n            let { items } = this.state;\r\n            let { value } = this.props;\r\n            items = items || textValues;\r\n            return React.createElement(\"select\", { className: 'form-control', value: value == null ? \"\" : value, onChange: e => {\r\n                    let textValue = e.target.value;\r\n                    if (valueType == \"number\") {\r\n                        let integerRegex = /^\\d+$/;\r\n                        let floatRegex = /^[+-]?\\d+(\\.\\d+)?$/;\r\n                        if (integerRegex.test(textValue))\r\n                            value = parseInt(textValue);\r\n                        else if (floatRegex.test(textValue))\r\n                            value = parseFloat(textValue);\r\n                        else\r\n                            value = null;\r\n                    }\r\n                    else {\r\n                        value = textValue;\r\n                    }\r\n                    this.props.updateComponentProp(value);\r\n                } }, items.map(o => React.createElement(\"option\", { key: o.value, value: o.value }, o.text)));\r\n        }\r\n    }\r\n    return Dropdown;\r\n}\r\n//# sourceMappingURL=prop-editor.js.map"],"sourceRoot":""}
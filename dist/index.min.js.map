{"version":3,"sources":["webpack://jueying/webpack/universalModuleDefinition","webpack://jueying/webpack/bootstrap","webpack://jueying/external \"React\"","webpack://jueying/external \"$\"","webpack://jueying/external \"ReactDOM\"","webpack://jueying/./lib/jquery.event.drag-2.2.js","webpack://jueying/./lib/jquery.event.drag.live-2.2.js","webpack://jueying/./lib/jquery.event.drop-2.2.js","webpack://jueying/./lib/jquery.event.drop.live-2.2.js","webpack://jueying/./out/jquery.js","webpack://jueying/./out/common.js","webpack://jueying/./out/errors.js","webpack://jueying/./out/style.js","webpack://jueying/./out/component-panel.js","webpack://jueying/./out/component-wrapper.js","webpack://jueying/./out/component.js","webpack://jueying/./out/error-boundary.js","webpack://jueying/./out/property-editor.js","webpack://jueying/./out/editor-panel.js","webpack://jueying/./out/react-page-builder.js","webpack://jueying/./out/page-designer.js","webpack://jueying/./out/prop-editor.js","webpack://jueying/./out/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","$","fn","drag","str","arg","opts","type","isFunction","indexOf","this","trigger","$event","event","$special","special","defaults","which","distance","not","handle","relative","drop","click","datakey","noBubble","add","obj","data","related","each","def","undefined","remove","setup","extend","init","attachEvent","dontstart","teardown","removeData","textselect","detachEvent","touched","results","dd","target","is","closest","currentTarget","length","propagates","mousedown","interactions","interaction","pageX","pageY","dragging","hijack","flatten","push","handler","document","live","elem","offset","top","left","callback","droppable","preventDefault","Math","pow","Date","getTime","x","result","ia","orig","originalEvent","mode","i","len","isNaN","cancelled","properties","p","subject","isPropagationStopped","dispatch","element","proxy","update","startX","startY","deltaX","deltaY","originalX","originalY","offsetX","offsetY","slice","available","jquery","nodeType","arr","map","member","makeArray","bool","css","unselectable","locate","$dispatch","apply","arguments","touchHooks","fixHooks","touchstart","touchmove","touchend","touchcancel","props","split","filter","touches","changedTouches","prop","draginit","dragstart","dragend","jQuery","origadd","origteardown","livekey","selector","delegate","elems","events","origType","origHandler","inArray","multi","Infinity","delay","tolerance","targets","active","anyactive","winner","location","grep","$targets","timer","tolerate","clearTimeout","index","$elem","posi","height","outerHeight","width","outerWidth","right","bottom","contains","test","modes","overlap","max","min","sort","a","b","drp","drg","end","xy","last","setTimeout","dropinit","dropstart","dropend","find","concat","constants","proptDisplayNames","guid","s4","floor","random","toString","substring","Callback","funcs","Array","func","o","args","forEach","Errors","Error","fileName","argumentName","pluginId","componentId","componentName","fieldName","classNames","componentSelected","emptyTemplates","loadingTemplates","templateSelected","templateDialog","emptyDocument","component","componentWrapper","componentPanel","componentIcon","placeholder","editorPanel","designer","moveDown","createElement","appendClassName","addonClassName","argumentNull","sourceClassName","className","console","assert","removeClassName","targetClassName","replace","RegExp","trim","setAttribute","innerHTML","head","appendChild","super","state","componets","toolbarElement","toolItemElement","componentData","draggable","addEventListener","ev","dataTransfer","setData","JSON","stringify","y","setState","getData","parse","empty","assign","ref","e","c","componentIndexName","icon","style","fontSize","color","ctrl","componentDraggable","displayName","error","info","attr","getAttribute","container","movable","enableAppendDroppable","onclick","invokeOnClick","stopPropagation","dropEffect","log","getComponentData","pageData","position","pos","mouseInnerPosition","appendComponent","id","startPos","rect","dragStart","sourceElement","now","setLeft","setTop","setPosition","isResizeHandleClassName","interval","isDrag","transform","setComponentPosition","setComponentSize","elementID","ctrlKey","selectComponent","selectedControlIds","selectedComponentIds","source","designtimeBehavior","message","stack","noWrapper","renderWidthoutWrapper","display","visibility","selected","wrapperProps","move_handle","showHandler","showResizeHandle","resize","ComponentWrapperContext","Provider","createRawElement","children","tagName","emtpy","designTimeEmptyElement","parentId","typename","name","designTimeText","text","defaultComponentAttribute","componentAttributes","componentType","propEditorInfo","componentPropEditors","propName","componentPropEditorDisplay","controlClassName","getPropEditorByArray","propNames","componentTypeOrOptions","editorType","group","editorDisplay","options","classProps","join","componentTypes","Fragment","_element","commonFlatProps","commonPropEditorInfos","selectedComponents","propEditorInfos","getPropEditors","items","propInfo1","propInfo2","propName1","propName2","control","controlProps","editors","editorProps","propValue","editComponents","updateComponentProp","componentProps","updateComponentProps","editor","navPropsNames","getEditors","customRender","r","groupEditorsArray","groupEditors","g","componentDatas","designerComponentChanged","_designer","componentRemoved","componentAppend","componentUpdated","PageBuilderContext","pageBuilder","argumentFieldCanntNull","attr1","attr2","pageElement","fillPageData","render","createDesignTimeElement","findComponentData","componentSiezs","size","travelComponentData","item","nameComponent","shift","componentIndex","parentControl","splice","componentIds","pop","isSelectedControl","focus","positions","controlId","removeComponentFrom","childComponentIndex","collection","compoentIndex","namedComponents","num","h","_createElement","components","context","getComponentType","masterPage","typeName","childComponents","MasterPageContext","master","isArray","minHeight","register","placeHolderIdNull","layerX","ondrop","host","wraper","moveComponent","Consumer","canntFindMasterPage","enableMoveDroppable","propCanntNull","create","designtimeComponentDidMount","pageBuilderType","fire","setComponentsPosition","setComponentsSize","ids","selectComponents","removeComponents","keyCode","removeComponent","createPage","tabIndex","onKeyDown","defaultProps","wrapDesignTimeElement","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","valueType","itemsPromise","textValues","getOwnPropertyNames","onChange","textValue","floatRegex","parseInt","parseFloat","dropdown"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"$\"), require(\"ReactDOM\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"$\", \"ReactDOM\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jueying\"] = factory(require(\"React\"), require(\"$\"), require(\"ReactDOM\"));\n\telse\n\t\troot[\"jueying\"] = factory(root[\"React\"], root[\"$\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","/*! \r\n * jquery.event.drag - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2008-06-04 \r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x\r\n\r\n;(function( $ ){\r\n\r\n// add the jquery instance method\r\n$.fn.drag = function( str, arg, opts ){\r\n\t// figure out the event type\r\n\tvar type = typeof str == \"string\" ? str : \"\",\r\n\t// figure out the event handler...\r\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\r\n\t// fix the event type\r\n\tif ( type.indexOf(\"drag\") !== 0 ) \r\n\t\ttype = \"drag\"+ type;\r\n\t// were options passed\r\n\topts = ( str == fn ? arg : opts ) || {};\r\n\t// trigger or bind event handler\r\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\r\n};\r\n\r\n// local refs (increase compression)\r\nvar $event = $.event, \r\n$special = $event.special,\r\n// configure the drag special event \r\ndrag = $special.drag = {\r\n\t\r\n\t// these are the default settings\r\n\tdefaults: {\r\n\t\twhich: 1, // mouse button pressed to start drag sequence\r\n\t\tdistance: 0, // distance dragged before dragstart\r\n\t\tnot: ':input', // selector to suppress dragging on target elements\r\n\t\thandle: null, // selector to match handle target elements\r\n\t\trelative: false, // true to use \"position\", false to use \"offset\"\r\n\t\tdrop: true, // false to suppress drop events, true or selector to allow\r\n\t\tclick: false // false to suppress click events after dragend (no proxy)\r\n\t},\r\n\t\r\n\t// the key name for stored drag data\r\n\tdatakey: \"dragdata\",\r\n\t\r\n\t// prevent bubbling for better performance\r\n\tnoBubble: true,\r\n\t\r\n\t// count bound related events\r\n\tadd: function( obj ){ \r\n\t\t// read the interaction data\r\n\t\tvar data = $.data( this, drag.datakey ),\r\n\t\t// read any passed options \r\n\t\topts = obj.data || {};\r\n\t\t// count another realted event\r\n\t\tdata.related += 1;\r\n\t\t// extend data options bound with this event\r\n\t\t// don't iterate \"opts\" in case it is a node \r\n\t\t$.each( drag.defaults, function( key, def ){\r\n\t\t\tif ( opts[ key ] !== undefined )\r\n\t\t\t\tdata[ key ] = opts[ key ];\r\n\t\t});\r\n\t},\r\n\t\r\n\t// forget unbound related events\r\n\tremove: function(){\r\n\t\t$.data( this, drag.datakey ).related -= 1;\r\n\t},\r\n\t\r\n\t// configure interaction, capture settings\r\n\tsetup: function(){\r\n\t\t// check for related events\r\n\t\tif ( $.data( this, drag.datakey ) ) \r\n\t\t\treturn;\r\n\t\t// initialize the drag data with copied defaults\r\n\t\tvar data = $.extend({ related:0 }, drag.defaults );\r\n\t\t// store the interaction data\r\n\t\t$.data( this, drag.datakey, data );\r\n\t\t// bind the mousedown event, which starts drag interactions\r\n\t\t$event.add( this, \"touchstart mousedown\", drag.init, data );\r\n\t\t// prevent image dragging in IE...\r\n\t\tif ( this.attachEvent ) \r\n\t\t\tthis.attachEvent(\"ondragstart\", drag.dontstart ); \r\n\t},\r\n\t\r\n\t// destroy configured interaction\r\n\tteardown: function(){\r\n\t\tvar data = $.data( this, drag.datakey ) || {};\r\n\t\t// check for related events\r\n\t\tif ( data.related ) \r\n\t\t\treturn;\r\n\t\t// remove the stored data\r\n\t\t$.removeData( this, drag.datakey );\r\n\t\t// remove the mousedown event\r\n\t\t$event.remove( this, \"touchstart mousedown\", drag.init );\r\n\t\t// enable text selection\r\n\t\tdrag.textselect( true ); \r\n\t\t// un-prevent image dragging in IE...\r\n\t\tif ( this.detachEvent ) \r\n\t\t\tthis.detachEvent(\"ondragstart\", drag.dontstart ); \r\n\t},\r\n\t\t\r\n\t// initialize the interaction\r\n\tinit: function( event ){ \r\n\t\t// sorry, only one touch at a time\r\n\t\tif ( drag.touched ) \r\n\t\t\treturn;\r\n\t\t// the drag/drop interaction data\r\n\t\tvar dd = event.data, results;\r\n\t\t// check the which directive\r\n\t\tif ( event.which != 0 && dd.which > 0 && event.which != dd.which ) \r\n\t\t\treturn; \r\n\t\t// check for suppressed selector\r\n\t\tif ( $( event.target ).is( dd.not ) ) \r\n\t\t\treturn;\r\n\t\t// check for handle selector\r\n\t\tif ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length ) \r\n\t\t\treturn;\r\n\r\n\t\tdrag.touched = event.type == 'touchstart' ? this : null;\r\n\t\tdd.propagates = 1;\r\n\t\tdd.mousedown = this;\r\n\t\tdd.interactions = [ drag.interaction( this, dd ) ];\r\n\t\tdd.target = event.target;\r\n\t\tdd.pageX = event.pageX;\r\n\t\tdd.pageY = event.pageY;\r\n\t\tdd.dragging = null;\r\n\t\t// handle draginit event... \r\n\t\tresults = drag.hijack( event, \"draginit\", dd );\r\n\t\t// early cancel\r\n\t\tif ( !dd.propagates )\r\n\t\t\treturn;\r\n\t\t// flatten the result set\r\n\t\tresults = drag.flatten( results );\r\n\t\t// insert new interaction elements\r\n\t\tif ( results && results.length ){\r\n\t\t\tdd.interactions = [];\r\n\t\t\t$.each( results, function(){\r\n\t\t\t\tdd.interactions.push( drag.interaction( this, dd ) );\r\n\t\t\t});\r\n\t\t}\r\n\t\t// remember how many interactions are propagating\r\n\t\tdd.propagates = dd.interactions.length;\r\n\t\t// locate and init the drop targets\r\n\t\tif ( dd.drop !== false && $special.drop ) \r\n\t\t\t$special.drop.handler( event, dd );\r\n\t\t// disable text selection\r\n\t\tdrag.textselect( false ); \r\n\t\t// bind additional events...\r\n\t\tif ( drag.touched )\r\n\t\t\t$event.add( drag.touched, \"touchmove touchend\", drag.handler, dd );\r\n\t\telse \r\n\t\t\t$event.add( document, \"mousemove mouseup\", drag.handler, dd );\r\n\t\t// helps prevent text selection or scrolling\r\n\t\tif ( !drag.touched || dd.live )\r\n\t\t\treturn false;\r\n\t},\t\r\n\t\r\n\t// returns an interaction object\r\n\tinteraction: function( elem, dd ){\r\n\t\tvar offset = $( elem )[ dd.relative ? \"position\" : \"offset\" ]() || { top:0, left:0 };\r\n\t\treturn {\r\n\t\t\tdrag: elem, \r\n\t\t\tcallback: new drag.callback(), \r\n\t\t\tdroppable: [],\r\n\t\t\toffset: offset\r\n\t\t};\r\n\t},\r\n\t\r\n\t// handle drag-releatd DOM events\r\n\thandler: function( event ){ \r\n\t\t// read the data before hijacking anything\r\n\t\tvar dd = event.data;\t\r\n\t\t// handle various events\r\n\t\tswitch ( event.type ){\r\n\t\t\t// mousemove, check distance, start dragging\r\n\t\t\tcase !dd.dragging && 'touchmove': \r\n\t\t\t\tevent.preventDefault();\r\n\t\t\tcase !dd.dragging && 'mousemove':\r\n\t\t\t\t//  drag tolerance, x� + y� = distance�\r\n\t\t\t\tif ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) ) \r\n\t\t\t\t\tbreak; // distance tolerance not reached\r\n\t\t\t\tevent.target = dd.target; // force target from \"mousedown\" event (fix distance issue)\r\n\t\t\t\tdrag.hijack( event, \"dragstart\", dd ); // trigger \"dragstart\"\r\n\t\t\t\tif ( dd.propagates ) // \"dragstart\" not rejected\r\n\t\t\t\t\tdd.dragging = true; // activate interaction\r\n\t\t\t// mousemove, dragging\r\n\t\t\tcase 'touchmove':\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tif ( dd.dragging ){\r\n\t\t\t\t\t// trigger \"drag\"\t\t\r\n\t\t\t\t\tdrag.hijack( event, \"drag\", dd );\r\n\t\t\t\t\tif ( dd.propagates ){\r\n\t\t\t\t\t\t// manage drop events\r\n\t\t\t\t\t\tif ( dd.drop !== false && $special.drop )\r\n\t\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"dropstart\", \"dropend\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak; // \"drag\" not rejected, stop\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.type = \"mouseup\"; // helps \"drop\" handler behave\r\n\t\t\t\t}\r\n\t\t\t// mouseup, stop dragging\r\n\t\t\tcase 'touchend': \r\n\t\t\tcase 'mouseup': \r\n\t\t\tdefault:\r\n\t\t\t\tif ( drag.touched )\r\n\t\t\t\t\t$event.remove( drag.touched, \"touchmove touchend\", drag.handler ); // remove touch events\r\n\t\t\t\telse \r\n\t\t\t\t\t$event.remove( document, \"mousemove mouseup\", drag.handler ); // remove page events\t\r\n\t\t\t\tif ( dd.dragging ){\r\n\t\t\t\t\tif ( dd.drop !== false && $special.drop )\r\n\t\t\t\t\t\t$special.drop.handler( event, dd ); // \"drop\"\r\n\t\t\t\t\tdrag.hijack( event, \"dragend\", dd ); // trigger \"dragend\"\t\r\n\t\t\t\t}\r\n\t\t\t\tdrag.textselect( true ); // enable text selection\r\n\t\t\t\t// if suppressing click events...\r\n\t\t\t\tif ( dd.click === false && dd.dragging )\r\n\t\t\t\t\t$.data( dd.mousedown, \"suppress.click\", new Date().getTime() + 5 );\r\n\t\t\t\tdd.dragging = drag.touched = false; // deactivate element\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t// re-use event object for custom events\r\n\thijack: function( event, type, dd, x, elem ){\r\n\t\t// not configured\r\n\t\tif ( !dd ) \r\n\t\t\treturn;\r\n\t\t// remember the original event and type\r\n\t\tvar orig = { event:event.originalEvent, type:event.type },\r\n\t\t// is the event drag related or drog related?\r\n\t\tmode = type.indexOf(\"drop\") ? \"drag\" : \"drop\",\r\n\t\t// iteration vars\r\n\t\tresult, i = x || 0, ia, $elems, callback,\r\n\t\tlen = !isNaN( x ) ? x : dd.interactions.length;\r\n\t\t// modify the event type\r\n\t\tevent.type = type;\r\n\t\t// remove the original event\r\n\t\tevent.originalEvent = null;\r\n\t\t// initialize the results\r\n\t\tdd.results = [];\r\n\t\t// handle each interacted element\r\n\t\tdo if ( ia = dd.interactions[ i ] ){\r\n\t\t\t// validate the interaction\r\n\t\t\tif ( type !== \"dragend\" && ia.cancelled )\r\n\t\t\t\tcontinue;\r\n\t\t\t// set the dragdrop properties on the event object\r\n\t\t\tcallback = drag.properties( event, dd, ia );\r\n\t\t\t// prepare for more results\r\n\t\t\tia.results = [];\r\n\t\t\t// handle each element\r\n\t\t\t$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){\r\n\t\t\t\t// identify drag or drop targets individually\r\n\t\t\t\tcallback.target = subject;\r\n\t\t\t\t// force propagtion of the custom event\r\n\t\t\t\tevent.isPropagationStopped = function(){ return false; };\r\n\t\t\t\t// handle the event\t\r\n\t\t\t\tresult = subject ? $event.dispatch.call( subject, event, callback ) : null;\r\n\t\t\t\t// stop the drag interaction for this element\r\n\t\t\t\tif ( result === false ){\r\n\t\t\t\t\tif ( mode == \"drag\" ){\r\n\t\t\t\t\t\tia.cancelled = true;\r\n\t\t\t\t\t\tdd.propagates -= 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( type == \"drop\" ){\r\n\t\t\t\t\t\tia[ mode ][p] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// assign any dropinit elements\r\n\t\t\t\telse if ( type == \"dropinit\" )\r\n\t\t\t\t\tia.droppable.push( drag.element( result ) || subject );\r\n\t\t\t\t// accept a returned proxy element \r\n\t\t\t\tif ( type == \"dragstart\" )\r\n\t\t\t\t\tia.proxy = $( drag.element( result ) || ia.drag )[0];\r\n\t\t\t\t// remember this result\t\r\n\t\t\t\tia.results.push( result );\r\n\t\t\t\t// forget the event result, for recycling\r\n\t\t\t\tdelete event.result;\r\n\t\t\t\t// break on cancelled handler\r\n\t\t\t\tif ( type !== \"dropinit\" )\r\n\t\t\t\t\treturn result;\r\n\t\t\t});\t\r\n\t\t\t// flatten the results\t\r\n\t\t\tdd.results[ i ] = drag.flatten( ia.results );\t\r\n\t\t\t// accept a set of valid drop targets\r\n\t\t\tif ( type == \"dropinit\" )\r\n\t\t\t\tia.droppable = drag.flatten( ia.droppable );\r\n\t\t\t// locate drop targets\r\n\t\t\tif ( type == \"dragstart\" && !ia.cancelled )\r\n\t\t\t\tcallback.update(); \r\n\t\t}\r\n\t\twhile ( ++i < len )\r\n\t\t// restore the original event & type\r\n\t\tevent.type = orig.type;\r\n\t\tevent.originalEvent = orig.event;\r\n\t\t// return all handler results\r\n\t\treturn drag.flatten( dd.results );\r\n\t},\r\n\t\t\r\n\t// extend the callback object with drag/drop properties...\r\n\tproperties: function( event, dd, ia ){\t\t\r\n\t\tvar obj = ia.callback;\r\n\t\t// elements\r\n\t\tobj.drag = ia.drag;\r\n\t\tobj.proxy = ia.proxy || ia.drag;\r\n\t\t// starting mouse position\r\n\t\tobj.startX = dd.pageX;\r\n\t\tobj.startY = dd.pageY;\r\n\t\t// current distance dragged\r\n\t\tobj.deltaX = event.pageX - dd.pageX;\r\n\t\tobj.deltaY = event.pageY - dd.pageY;\r\n\t\t// original element position\r\n\t\tobj.originalX = ia.offset.left;\r\n\t\tobj.originalY = ia.offset.top;\r\n\t\t// adjusted element position\r\n\t\tobj.offsetX = obj.originalX + obj.deltaX; \r\n\t\tobj.offsetY = obj.originalY + obj.deltaY;\r\n\t\t// assign the drop targets information\r\n\t\tobj.drop = drag.flatten( ( ia.drop || [] ).slice() );\r\n\t\tobj.available = drag.flatten( ( ia.droppable || [] ).slice() );\r\n\t\treturn obj;\t\r\n\t},\r\n\t\r\n\t// determine is the argument is an element or jquery instance\r\n\telement: function( arg ){\r\n\t\tif ( arg && ( arg.jquery || arg.nodeType == 1 ) )\r\n\t\t\treturn arg;\r\n\t},\r\n\t\r\n\t// flatten nested jquery objects and arrays into a single dimension array\r\n\tflatten: function( arr ){\r\n\t\treturn $.map( arr, function( member ){\r\n\t\t\treturn member && member.jquery ? $.makeArray( member ) : \r\n\t\t\t\tmember && member.length ? drag.flatten( member ) : member;\r\n\t\t});\r\n\t},\r\n\t\r\n\t// toggles text selection attributes ON (true) or OFF (false)\r\n\ttextselect: function( bool ){ \r\n\t\t$( document )[ bool ? \"unbind\" : \"bind\" ](\"selectstart\", drag.dontstart )\r\n\t\t\t.css(\"MozUserSelect\", bool ? \"\" : \"none\" );\r\n\t\t// .attr(\"unselectable\", bool ? \"off\" : \"on\" )\r\n\t\tdocument.unselectable = bool ? \"off\" : \"on\"; \r\n\t},\r\n\t\r\n\t// suppress \"selectstart\" and \"ondragstart\" events\r\n\tdontstart: function(){ \r\n\t\treturn false; \r\n\t},\r\n\t\r\n\t// a callback instance contructor\r\n\tcallback: function(){}\r\n\t\r\n};\r\n\r\n// callback methods\r\ndrag.callback.prototype = {\r\n\tupdate: function(){\r\n\t\tif ( $special.drop && this.available.length )\r\n\t\t\t$.each( this.available, function( i ){\r\n\t\t\t\t$special.drop.locate( this, i );\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\n// patch $.event.$dispatch to allow suppressing clicks\r\nvar $dispatch = $event.dispatch;\r\n$event.dispatch = function( event ){\r\n\tif ( $.data( this, \"suppress.\"+ event.type ) - new Date().getTime() > 0 ){\r\n\t\t$.removeData( this, \"suppress.\"+ event.type );\r\n\t\treturn;\r\n\t}\r\n\treturn $dispatch.apply( this, arguments );\r\n};\r\n\r\n// event fix hooks for touch events...\r\nvar touchHooks = \r\n$event.fixHooks.touchstart = \r\n$event.fixHooks.touchmove = \r\n$event.fixHooks.touchend =\r\n$event.fixHooks.touchcancel = {\r\n\tprops: \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\r\n\tfilter: function( event, orig ) {\r\n\t\tif ( orig ){\r\n\t\t\tvar touched = ( orig.touches && orig.touches[0] )\r\n\t\t\t\t|| ( orig.changedTouches && orig.changedTouches[0] )\r\n\t\t\t\t|| null; \r\n\t\t\t// iOS webkit: touchstart, touchmove, touchend\r\n\t\t\tif ( touched ) \r\n\t\t\t\t$.each( touchHooks.props, function( i, prop ){\r\n\t\t\t\t\tevent[ prop ] = touched[ prop ];\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n};\r\n\r\n// share the same special event configuration with related events...\r\n$special.draginit = $special.dragstart = $special.dragend = drag;\r\n\r\n})( jQuery );","/*! \r\n * jquery.event.drag.live - v 2.2\r\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\r\n * Open Source MIT License - http://threedubmedia.com/code/license\r\n */\r\n// Created: 2010-06-07\r\n// Updated: 2012-05-21\r\n// REQUIRES: jquery 1.7.x, event.drag 2.2\r\n\r\n;(function( $ ){\r\n\t\r\n// local refs (increase compression)\r\nvar $event = $.event,\r\n// ref the special event config\r\ndrag = $event.special.drag,\r\n// old drag event add method\r\norigadd = drag.add,\r\n// old drag event teradown method\r\norigteardown = drag.teardown;\r\n\r\n// allow events to bubble for delegation\r\ndrag.noBubble = false;\r\n\r\n// the namespace for internal live events\r\ndrag.livekey = \"livedrag\";\r\n\r\n// new drop event add method\r\ndrag.add = function( obj ){ \r\n\t// call the old method\r\n\torigadd.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drag.datakey );\r\n\t// bind the live \"draginit\" delegator\r\n\tif ( !data.live && obj.selector ){\r\n\t\tdata.live = true;\r\n\t\t$event.add( this, \"draginit.\"+ drag.livekey, drag.delegate );\r\n\t}\r\n};\r\n\r\n// new drop event teardown method\r\ndrag.teardown = function(){ \r\n\t// call the old method\r\n\torigteardown.apply( this, arguments );\r\n\t// read the data\r\n\tvar data = $.data( this, drag.datakey ) || {};\r\n\t// bind the live \"draginit\" delegator\r\n\tif ( data.live ){\r\n\t\t// remove the \"live\" delegation\r\n\t\t$event.remove( this, \"draginit.\"+ drag.livekey, drag.delegate );\r\n\t\tdata.live = false;\r\n\t}\r\n};\r\n\r\n// identify potential delegate elements\r\ndrag.delegate = function( event ){\r\n\t// local refs\r\n\tvar elems = [], target, \r\n\t// element event structure\r\n\tevents = $.data( this, \"events\" ) || {};\r\n\t// query live events\r\n\t$.each( events || [], function( key, arr ){\r\n\t\t// no event type matches\r\n\t\tif ( key.indexOf(\"drag\") !== 0 )\r\n\t\t\treturn;\r\n\t\t$.each( arr || [], function( i, obj ){\r\n\t\t\t// locate the element to delegate\r\n\t\t\ttarget = $( event.target ).closest( obj.selector, event.currentTarget )[0];\r\n\t\t\t// no element found\r\n\t\t\tif ( !target ) \r\n\t\t\t\treturn;\r\n\t\t\t// add an event handler\r\n\t\t\t$event.add( target, obj.origType+'.'+drag.livekey, obj.origHandler || obj.handler, obj.data );\r\n\t\t\t// remember new elements\r\n\t\t\tif ( $.inArray( target, elems ) < 0 )\r\n\t\t\t\telems.push( target );\t\t\r\n\t\t});\r\n\t});\r\n\t// if there are no elements, break\r\n\tif ( !elems.length ) \r\n\t\treturn false;\r\n\t// return the matched results, and clenup when complete\t\t\r\n\treturn $( elems ).bind(\"dragend.\"+ drag.livekey, function(){\r\n\t\t$event.remove( this, \".\"+ drag.livekey ); // cleanup delegation\r\n\t});\r\n};\r\n\t\r\n})( jQuery );","/*! \n * jquery.event.drop - v 2.2\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\n * Open Source MIT License - http://threedubmedia.com/code/license\n */\n// Created: 2008-06-04 \n// Updated: 2012-05-21\n// REQUIRES: jquery 1.7.x, event.drag 2.2\n\n;(function($){ // secure $ jQuery alias\n\n// Events: drop, dropstart, dropend\n\n// add the jquery instance method\n$.fn.drop = function( str, arg, opts ){\n\t// figure out the event type\n\tvar type = typeof str == \"string\" ? str : \"\",\n\t// figure out the event handler...\n\tfn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;\n\t// fix the event type\n\tif ( type.indexOf(\"drop\") !== 0 ) \n\t\ttype = \"drop\"+ type;\n\t// were options passed\n\topts = ( str == fn ? arg : opts ) || {};\n\t// trigger or bind event handler\n\treturn fn ? this.bind( type, opts, fn ) : this.trigger( type );\n};\n\n// DROP MANAGEMENT UTILITY\n// returns filtered drop target elements, caches their positions\n$.drop = function( opts ){ \n\topts = opts || {};\n\t// safely set new options...\n\tdrop.multi = opts.multi === true ? Infinity : \n\t\topts.multi === false ? 1 : !isNaN( opts.multi ) ? opts.multi : drop.multi;\n\tdrop.delay = opts.delay || drop.delay;\n\tdrop.tolerance = $.isFunction( opts.tolerance ) ? opts.tolerance : \n\t\topts.tolerance === null ? null : drop.tolerance;\n\tdrop.mode = opts.mode || drop.mode || 'intersect';\n};\n\n// local refs (increase compression)\nvar $event = $.event, \n$special = $event.special,\n// configure the drop special event\ndrop = $.event.special.drop = {\n\n\t// these are the default settings\n\tmulti: 1, // allow multiple drop winners per dragged element\n\tdelay: 20, // async timeout delay\n\tmode: 'overlap', // drop tolerance mode\n\t\t\n\t// internal cache\n\ttargets: [], \n\t\n\t// the key name for stored drop data\n\tdatakey: \"dropdata\",\n\t\t\n\t// prevent bubbling for better performance\n\tnoBubble: true,\n\t\n\t// count bound related events\n\tadd: function( obj ){ \n\t\t// read the interaction data\n\t\tvar data = $.data( this, drop.datakey );\n\t\t// count another realted event\n\t\tdata.related += 1;\n\t},\n\t\n\t// forget unbound related events\n\tremove: function(){\n\t\t$.data( this, drop.datakey ).related -= 1;\n\t},\n\t\n\t// configure the interactions\n\tsetup: function(){\n\t\t// check for related events\n\t\tif ( $.data( this, drop.datakey ) ) \n\t\t\treturn;\n\t\t// initialize the drop element data\n\t\tvar data = { \n\t\t\trelated: 0,\n\t\t\tactive: [],\n\t\t\tanyactive: 0,\n\t\t\twinner: 0,\n\t\t\tlocation: {}\n\t\t};\n\t\t// store the drop data on the element\n\t\t$.data( this, drop.datakey, data );\n\t\t// store the drop target in internal cache\n\t\tdrop.targets.push( this );\n\t},\n\t\n\t// destroy the configure interaction\t\n\tteardown: function(){ \n\t\tvar data = $.data( this, drop.datakey ) || {};\n\t\t// check for related events\n\t\tif ( data.related ) \n\t\t\treturn;\n\t\t// remove the stored data\n\t\t$.removeData( this, drop.datakey );\n\t\t// reference the targeted element\n\t\tvar element = this;\n\t\t// remove from the internal cache\n\t\tdrop.targets = $.grep( drop.targets, function( target ){ \n\t\t\treturn ( target !== element ); \n\t\t});\n\t},\n\t\n\t// shared event handler\n\thandler: function( event, dd ){ \n\t\t// local vars\n\t\tvar results, $targets;\n\t\t// make sure the right data is available\n\t\tif ( !dd ) \n\t\t\treturn;\n\t\t// handle various events\n\t\tswitch ( event.type ){\n\t\t\t// draginit, from $.event.special.drag\n\t\t\tcase 'mousedown': // DROPINIT >>\n\t\t\tcase 'touchstart': // DROPINIT >>\n\t\t\t\t// collect and assign the drop targets\n\t\t\t\t$targets =  $( drop.targets );\n\t\t\t\tif ( typeof dd.drop == \"string\" )\n\t\t\t\t\t$targets = $targets.filter( dd.drop );\n\t\t\t\t// reset drop data winner properties\n\t\t\t\t$targets.each(function(){\n\t\t\t\t\tvar data = $.data( this, drop.datakey );\n\t\t\t\t\tdata.active = [];\n\t\t\t\t\tdata.anyactive = 0;\n\t\t\t\t\tdata.winner = 0;\n\t\t\t\t});\n\t\t\t\t// set available target elements\n\t\t\t\tdd.droppable = $targets;\n\t\t\t\t// activate drop targets for the initial element being dragged\n\t\t\t\t$special.drag.hijack( event, \"dropinit\", dd ); \n\t\t\t\tbreak;\n\t\t\t// drag, from $.event.special.drag\n\t\t\tcase 'mousemove': // TOLERATE >>\n\t\t\tcase 'touchmove': // TOLERATE >>\n\t\t\t\tdrop.event = event; // store the mousemove event\n\t\t\t\tif ( !drop.timer )\n\t\t\t\t\t// monitor drop targets\n\t\t\t\t\tdrop.tolerate( dd ); \n\t\t\t\tbreak;\n\t\t\t// dragend, from $.event.special.drag\n\t\t\tcase 'mouseup': // DROP >> DROPEND >>\n\t\t\tcase 'touchend': // DROP >> DROPEND >>\n\t\t\t\tdrop.timer = clearTimeout( drop.timer ); // delete timer\t\n\t\t\t\tif ( dd.propagates ){\n\t\t\t\t\t$special.drag.hijack( event, \"drop\", dd ); \n\t\t\t\t\t$special.drag.hijack( event, \"dropend\", dd ); \n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t}\n\t},\n\t\t\n\t// returns the location positions of an element\n\tlocate: function( elem, index ){ \n\t\tvar data = $.data( elem, drop.datakey ),\n\t\t$elem = $( elem ), \n\t\tposi = $elem.offset() || {}, \n\t\theight = $elem.outerHeight(), \n\t\twidth = $elem.outerWidth(),\n\t\tlocation = { \n\t\t\telem: elem, \n\t\t\twidth: width, \n\t\t\theight: height,\n\t\t\ttop: posi.top, \n\t\t\tleft: posi.left, \n\t\t\tright: posi.left + width, \n\t\t\tbottom: posi.top + height\n\t\t};\n\t\t// drag elements might not have dropdata\n\t\tif ( data ){\n\t\t\tdata.location = location;\n\t\t\tdata.index = index;\n\t\t\tdata.elem = elem;\n\t\t}\n\t\treturn location;\n\t},\n\t\n\t// test the location positions of an element against another OR an X,Y coord\n\tcontains: function( target, test ){ // target { location } contains test [x,y] or { location }\n\t\treturn ( ( test[0] || test.left ) >= target.left && ( test[0] || test.right ) <= target.right\n\t\t\t&& ( test[1] || test.top ) >= target.top && ( test[1] || test.bottom ) <= target.bottom ); \n\t},\n\t\n\t// stored tolerance modes\n\tmodes: { // fn scope: \"$.event.special.drop\" object \n\t\t// target with mouse wins, else target with most overlap wins\n\t\t'intersect': function( event, proxy, target ){\n\t\t\treturn this.contains( target, [ event.pageX, event.pageY ] ) ? // check cursor\n\t\t\t\t1e9 : this.modes.overlap.apply( this, arguments ); // check overlap\n\t\t},\n\t\t// target with most overlap wins\t\n\t\t'overlap': function( event, proxy, target ){\n\t\t\t// calculate the area of overlap...\n\t\t\treturn Math.max( 0, Math.min( target.bottom, proxy.bottom ) - Math.max( target.top, proxy.top ) )\n\t\t\t\t* Math.max( 0, Math.min( target.right, proxy.right ) - Math.max( target.left, proxy.left ) );\n\t\t},\n\t\t// proxy is completely contained within target bounds\t\n\t\t'fit': function( event, proxy, target ){\n\t\t\treturn this.contains( target, proxy ) ? 1 : 0;\n\t\t},\n\t\t// center of the proxy is contained within target bounds\t\n\t\t'middle': function( event, proxy, target ){\n\t\t\treturn this.contains( target, [ proxy.left + proxy.width * .5, proxy.top + proxy.height * .5 ] ) ? 1 : 0;\n\t\t}\n\t},\t\n\t\n\t// sort drop target cache by by winner (dsc), then index (asc)\n\tsort: function( a, b ){\n\t\treturn ( b.winner - a.winner ) || ( a.index - b.index );\n\t},\n\t\t\n\t// async, recursive tolerance execution\n\ttolerate: function( dd ){\t\t\n\t\t// declare local refs\n\t\tvar i, drp, drg, data, arr, len, elem,\n\t\t// interaction iteration variables\n\t\tx = 0, ia, end = dd.interactions.length,\n\t\t// determine the mouse coords\n\t\txy = [ drop.event.pageX, drop.event.pageY ],\n\t\t// custom or stored tolerance fn\n\t\ttolerance = drop.tolerance || drop.modes[ drop.mode ];\n\t\t// go through each passed interaction...\n\t\tdo if ( ia = dd.interactions[x] ){\n\t\t\t// check valid interaction\n\t\t\tif ( !ia )\n\t\t\t\treturn; \n\t\t\t// initialize or clear the drop data\n\t\t\tia.drop = [];\n\t\t\t// holds the drop elements\n\t\t\tarr = []; \n\t\t\tlen = ia.droppable.length;\n\t\t\t// determine the proxy location, if needed\n\t\t\tif ( tolerance )\n\t\t\t\tdrg = drop.locate( ia.proxy ); \n\t\t\t// reset the loop\n\t\t\ti = 0;\n\t\t\t// loop each stored drop target\n\t\t\tdo if ( elem = ia.droppable[i] ){ \n\t\t\t\tdata = $.data( elem, drop.datakey );\n\t\t\t\tdrp = data.location;\n\t\t\t\tif ( !drp ) continue;\n\t\t\t\t// find a winner: tolerance function is defined, call it\n\t\t\t\tdata.winner = tolerance ? tolerance.call( drop, drop.event, drg, drp ) \n\t\t\t\t\t// mouse position is always the fallback\n\t\t\t\t\t: drop.contains( drp, xy ) ? 1 : 0; \n\t\t\t\tarr.push( data );\t\n\t\t\t} while ( ++i < len ); // loop \n\t\t\t// sort the drop targets\n\t\t\tarr.sort( drop.sort );\t\t\t\n\t\t\t// reset the loop\n\t\t\ti = 0;\n\t\t\t// loop through all of the targets again\n\t\t\tdo if ( data = arr[ i ] ){\n\t\t\t\t// winners...\n\t\t\t\tif ( data.winner && ia.drop.length < drop.multi ){\n\t\t\t\t\t// new winner... dropstart\n\t\t\t\t\tif ( !data.active[x] && !data.anyactive ){\n\t\t\t\t\t\t// check to make sure that this is not prevented\n\t\t\t\t\t\tif ( $special.drag.hijack( drop.event, \"dropstart\", dd, x, data.elem )[0] !== false ){ \t\n\t\t\t\t\t\t\tdata.active[x] = 1;\n\t\t\t\t\t\t\tdata.anyactive += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if false, it is not a winner\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdata.winner = 0;\n\t\t\t\t\t}\n\t\t\t\t\t// if it is still a winner\n\t\t\t\t\tif ( data.winner )\n\t\t\t\t\t\tia.drop.push( data.elem );\n\t\t\t\t}\n\t\t\t\t// losers... \n\t\t\t\telse if ( data.active[x] && data.anyactive == 1 ){\n\t\t\t\t\t// former winner... dropend\n\t\t\t\t\t$special.drag.hijack( drop.event, \"dropend\", dd, x, data.elem ); \n\t\t\t\t\tdata.active[x] = 0;\n\t\t\t\t\tdata.anyactive -= 1;\n\t\t\t\t}\n\t\t\t} while ( ++i < len ); // loop \t\t\n\t\t} while ( ++x < end ) // loop\n\t\t// check if the mouse is still moving or is idle\n\t\tif ( drop.last && xy[0] == drop.last.pageX && xy[1] == drop.last.pageY ) \n\t\t\tdelete drop.timer; // idle, don't recurse\n\t\telse  // recurse\n\t\t\tdrop.timer = setTimeout(function(){ \n\t\t\t\tdrop.tolerate( dd ); \n\t\t\t}, drop.delay );\n\t\t// remember event, to compare idleness\n\t\tdrop.last = drop.event; \n\t}\n\t\n};\n\n// share the same special event configuration with related events...\n$special.dropinit = $special.dropstart = $special.dropend = drop;\n\n})(jQuery); // confine scope\t","/*! \n * jquery.event.drop.live - v 2.2\n * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com\n * Open Source MIT License - http://threedubmedia.com/code/license\n */\n// Created: 2010-06-07\n// Updated: 2012-05-21\n// REQUIRES: jquery 1.7.x, event.drag 2.2, event.drop 2.2\n\n;(function($){ // secure $ jQuery alias\n\n// local refs (increase compression)\nvar $event = $.event,\n// ref the drop special event config\ndrop = $event.special.drop,\n// old drop event add method\norigadd = drop.add,\n// old drop event teradown method\norigteardown = drop.teardown;\n\n// allow events to bubble for delegation\ndrop.noBubble = false;\n\n// the namespace for internal live events\ndrop.livekey = \"livedrop\";\n\n// new drop event add method\ndrop.add = function( obj ){ \n\t// call the old method\n\torigadd.apply( this, arguments );\n\t// read the data\n\tvar data = $.data( this, drop.datakey );\n\t// bind the live \"dropinit\" delegator\n\tif ( !data.live && obj.selector ){\n\t\tdata.live = true;\n\t\t$event.add( this, \"dropinit.\"+ drop.livekey, drop.delegate );\n\t}\n};\n\n// new drop event teardown method\ndrop.teardown = function(){ \n\t// call the old method\n\torigteardown.apply( this, arguments );\n\t// read the data\n\tvar data = $.data( this, drop.datakey ) || {};\n\t// remove the live \"dropinit\" delegator\n\tif ( data.live ){\n\t\t// remove the \"live\" delegation\n\t\t$event.remove( this, \"dropinit\", drop.delegate );\n\t\tdata.live = false;\n\t}\n};\n\n// identify potential delegate elements\ndrop.delegate = function( event, dd ){\n\t// local refs\n\tvar elems = [], $targets, \n\t// element event structure\n\tevents = $.data( this, \"events\" ) || {};\n\t// query live events\n\t$.each( events || [], function( key, arr ){\n\t\t// no event type matches\n\t\tif ( key.indexOf(\"drop\") !== 0 )\n\t\t\treturn;\n\t\t$.each( arr, function( i, obj ){\n\t\t\t// locate the elements to delegate\n\t\t\t$targets = $( event.currentTarget ).find( obj.selector );\n\t\t\t// no element found\n\t\t\tif ( !$targets.length ) \n\t\t\t\treturn;\n\t\t\t// take each target...\n\t\t\t$targets.each(function(){\n\t\t\t\t// add an event handler\n\t\t\t\t$event.add( this, obj.origType +'.'+ drop.livekey, obj.origHandler || obj.handler, obj.data );\n\t\t\t\t// remember new elements\n\t\t\t\tif ( $.inArray( this, elems ) < 0 )\n\t\t\t\t\telems.push( this );\t\n\t\t\t});\t\n\t\t});\n\t});\n\t// may not exist when artifically triggering dropinit event\n\tif ( dd )\n\t\t// clean-up after the interaction ends\n\t\t$event.add( dd.drag, \"dragend.\"+drop.livekey, function(){\n\t\t\t$.each( elems.concat( this ), function(){\n\t\t\t\t$event.remove( this, '.'+ drop.livekey );\t\t\t\t\t\t\t\n\t\t\t});\n\t\t});\n\t//drop.delegates.push( elems );\n\treturn elems.length ? $( elems ) : false;\n};\n\n})( jQuery ); // confine scope\t","// import * as j from '../lib/jquery-2.1.3'\r\n// let jquery = window['$'] || window['jQuery'];\r\n// if (jquery == null) {\r\n//     window['$'] = window['jQuery'] = j\r\n// }\r\nimport * as j from \"jquery\";\r\nlet jquery = window['$'] || window['jQuery'];\r\nif (jquery == null) {\r\n    window['$'] = window['jQuery'] = j;\r\n}\r\n//# sourceMappingURL=jquery.js.map","export let constants = {\r\n    componentsDir: 'components',\r\n    connectorElementClassName: 'component-container',\r\n    componentTypeName: 'data-component-name',\r\n    componentData: 'component-data',\r\n    componentPosition: \"component-position\"\r\n};\r\nexport let proptDisplayNames = {};\r\nexport function guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\nexport class Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\n//# sourceMappingURL=common.js.map","export class Errors {\r\n    static placeHolderIdNull() {\r\n        let msg = `Place holder property id cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static fileNotExists(fileName) {\r\n        return new Error(`File '${fileName}' is not exists.`);\r\n    }\r\n    static argumentNull(argumentName) {\r\n        return new Error(`Argument ${argumentName} is null or empty.`);\r\n    }\r\n    static argumentRangeError(argumentName) {\r\n        return new Error(`Argument ${argumentName} range error.`);\r\n    }\r\n    static pageDataIsNull() {\r\n        return new Error(`Page data is null.`);\r\n    }\r\n    static toolbarRequiredKey() {\r\n        return new Error(`Toolbar has not a key prop.`);\r\n    }\r\n    static loadPluginFail(pluginId) {\r\n        return new Error(`Load plugin '${pluginId}' fail.`);\r\n    }\r\n    static idRequired() {\r\n        return new Error(`Property id is required.`);\r\n    }\r\n    static canntFindMasterPage(componentId) {\r\n        return new Error(`Can not find master page for component container ${componentId}.`);\r\n    }\r\n    static propCanntNull(componentName, property) {\r\n        let msg = `${componentName} property ${property} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static argumentFieldCanntNull(fieldName, argumentName) {\r\n        let msg = `${fieldName} of argument ${argumentName} cannt be null or empty.`;\r\n        return new Error(msg);\r\n    }\r\n    static componentDataNotExists(componentId) {\r\n        let msg = `Component data ${componentId} is not exists.`;\r\n        return new Error(msg);\r\n    }\r\n}\r\n//# sourceMappingURL=errors.js.map","import { Errors } from \"./errors\";\r\nexport let classNames = {\r\n    componentSelected: `component-selected`,\r\n    emptyTemplates: `empty-templates`,\r\n    loadingTemplates: `loading-templates`,\r\n    templateSelected: `template-selected`,\r\n    templateDialog: `template-dialog`,\r\n    emptyDocument: `empty-document`,\r\n    component: 'component',\r\n    componentWrapper: 'component-wrapper',\r\n    componentPanel: 'component-panel',\r\n    componentIcon: 'component-icon',\r\n    placeholder: 'placeholder',\r\n    editorPanel: 'editor-panel',\r\n    designer: 'designer',\r\n    moveDown: 'move-down',\r\n};\r\nlet templateDialog = {\r\n    nameHeight: 40,\r\n    fontSize: 22\r\n};\r\nlet element = document.createElement('style');\r\nelement.type = 'text/css';\r\nelement.setAttribute(\"data-name\", \"jueying\");\r\nelement.innerHTML = `\r\n            .${classNames.componentSelected} {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${classNames.componentSelected} > :first-child {\r\n                border-color: blue;\r\n              }\r\n              .${classNames.componentSelected} .resize_handle {\r\n                position: absolute;\r\n                height: 6px;\r\n                width: 6px;\r\n                border: 1px solid #89B;\r\n                background: #9AC;\r\n              }\r\n              .${classNames.componentSelected} .move_handle {\r\n                height: 12px;\r\n                width: 12px;\r\n                top: 6px;\r\n                left: 8px;\r\n                border: solid 1px black;\r\n                position: relative;\r\n                margin-top: -12px;\r\n              }\r\n              .${classNames.componentSelected} .NW,\r\n              .${classNames.componentSelected} .NN,\r\n              .${classNames.componentSelected} .NE {\r\n                top: -4px;\r\n              }\r\n              .${classNames.componentSelected} .NE,\r\n              .${classNames.componentSelected} .EE,\r\n              .${classNames.componentSelected} .SE {\r\n                right: -4px;\r\n              }\r\n              .${classNames.componentSelected} .SW,\r\n              .${classNames.componentSelected}.SS,\r\n              .${classNames.componentSelected} .SE {\r\n                bottom: -4px;\r\n              }\r\n              .${classNames.componentSelected} .NW,\r\n              .${classNames.componentSelected} .WW,\r\n              .${classNames.componentSelected} .SW {\r\n                left: -4px;\r\n              }\r\n              .${classNames.componentSelected} .SE,\r\n              .${classNames.componentSelected} .NW {\r\n                cursor: nw-resize;\r\n              }\r\n              .${classNames.componentSelected} .SW,\r\n              .${classNames.componentSelected} .NE {\r\n                cursor: ne-resize;\r\n              }\r\n              .${classNames.componentSelected} .NN,\r\n              .${classNames.componentSelected} .SS {\r\n                cursor: n-resize;\r\n                left: 50%;\r\n                margin-left: -4px;\r\n              }\r\n              .${classNames.componentSelected} .EE,\r\n              .${classNames.componentSelected} .WW {\r\n                cursor: e-resize;\r\n                top: 50%;\r\n                margin-top: -4px;\r\n              }\r\n            .${classNames.emptyTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${classNames.loadingTemplates} {\r\n                padding:50px 0;\r\n                text-align: center;\r\n            }\r\n            .${classNames.templateSelected} .page-view {\r\n                border: solid 1px #337ab7!important;\r\n            }\r\n            .${classNames.templateDialog} .name {\r\n                margin-top: -${templateDialog.nameHeight}px;\r\n                height: ${templateDialog.nameHeight}px;\r\n                font-size: ${templateDialog.fontSize}px;\r\n                text-align: center;\r\n                padding-top: 6px;\r\n                background-color: black;\r\n                opacity: 0.5;\r\n            }\r\n            .${classNames.templateDialog} .name span {\r\n                color: white;\r\n            }\r\n            .${classNames.emptyDocument} {\r\n                text-align: center;\r\n                padding: 100px 0;\r\n            }\r\n            .${classNames.component} > .NW,\r\n            .${classNames.component} > .NN,\r\n            .${classNames.component} > .NE,\r\n            .${classNames.component} > .EE,\r\n            .${classNames.component} > .SE,\r\n            .${classNames.component} > .SW,\r\n            .${classNames.component} > .SS,\r\n            .${classNames.component} > .WW {\r\n                display: none;\r\n            }\r\n            .${classNames.componentSelected}.component > .NW,\r\n            .${classNames.componentSelected}.component > .NN,\r\n            .${classNames.componentSelected}.component > .NE,\r\n            .${classNames.componentSelected}.component > .EE,\r\n            .${classNames.componentSelected}.component > .SE,\r\n            .${classNames.componentSelected}.component > .SW,\r\n            .${classNames.componentSelected}.component > .SS,\r\n            .${classNames.componentSelected}.component > .WW {\r\n                display: block;\r\n            }\r\n            .${classNames.placeholder} {\r\n                min-height: 40px;\r\n                width: 100%;\r\n            }\r\n            .${classNames.placeholder}.active,\r\n            .${classNames.componentWrapper}.active,\r\n            .${classNames.componentWrapper}.${classNames.componentSelected}.active {\r\n                border: 1px solid green;\r\n            }\r\n            .${classNames.editorPanel} {\r\n                width: 300px;\r\n                background: white;\r\n                color: black;\r\n                margin: 0;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                overflow: auto;\r\n            }\r\n            .${classNames.editorPanel} label {\r\n                width: 80px;\r\n                float: left;\r\n                padding: 4px;\r\n                text-overflow: ellipsis;\r\n                overflow: hidden;\r\n            }\r\n            .${classNames.editorPanel} .control {\r\n                padding-left: 90px;\r\n            }\r\n            .${classNames.editorPanel} .empty {\r\n                padding-top: 200px;\r\n                text-align: center;\r\n            }\r\n            .${classNames.designer} .error,\r\n            .${classNames.editorPanel} .error {\r\n                color: red;\r\n            }\r\n            .${classNames.componentPanel} {\r\n                background: white;\r\n                color: black;\r\n                font-size: 14px;\r\n                z-index: 100;\r\n                list-style: none;\r\n                padding: 0;\r\n                text-align: center\r\n            }\r\n            .${classNames.componentPanel} .panel-heading {\r\n                text-align: center;\r\n            }\r\n            .${classNames.componentPanel} li {\r\n                text-align: center;\r\n                padding: 8px;\r\n            }\r\n            .${classNames.componentWrapper}.${classNames.moveDown} {\r\n         \r\n            }\r\n        `;\r\ndocument.head.appendChild(element);\r\nexport function appendClassName(element, addonClassName) {\r\n    if (element == null)\r\n        throw Errors.argumentNull('element');\r\n    if (!addonClassName)\r\n        throw Errors.argumentNull('addonClassName');\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className;\r\n    sourceClassName = sourceClassName || '';\r\n    console.assert(addonClassName);\r\n    if (sourceClassName.indexOf(addonClassName) >= 0)\r\n        return sourceClassName;\r\n    let className = `${sourceClassName} ${addonClassName}`;\r\n    if (typeof element != 'string')\r\n        element.className = className;\r\n    return className;\r\n}\r\nexport function removeClassName(element, targetClassName) {\r\n    let sourceClassName;\r\n    if (typeof element == 'string')\r\n        sourceClassName = element;\r\n    else\r\n        sourceClassName = element.className || '';\r\n    if (sourceClassName.indexOf(targetClassName) < 0)\r\n        return sourceClassName;\r\n    sourceClassName = sourceClassName || '';\r\n    sourceClassName = sourceClassName.replace(new RegExp(targetClassName, 'g'), '');\r\n    sourceClassName = sourceClassName.trim();\r\n    if (typeof element != 'string')\r\n        element.className = sourceClassName;\r\n    return sourceClassName;\r\n}\r\n//# sourceMappingURL=style.js.map","import * as React from \"react\";\r\nimport { constants } from \"./common\";\r\nimport { classNames } from \"./style\";\r\nexport class ComponentPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componets: [] };\r\n    }\r\n    get element() {\r\n        return this.toolbarElement;\r\n    }\r\n    componentDraggable(toolItemElement, componentData) {\r\n        console.assert(toolItemElement != null);\r\n        toolItemElement.draggable = true;\r\n        toolItemElement.addEventListener('dragstart', function (ev) {\r\n            componentData.props = componentData.props || {};\r\n            ev.dataTransfer.setData(constants.componentData, JSON.stringify(componentData));\r\n            ev.dataTransfer.setData('mousePosition', JSON.stringify({ x: ev.offsetX, y: ev.offsetY }));\r\n        });\r\n    }\r\n    setComponets(componets) {\r\n        this.setState({ componets });\r\n    }\r\n    static getComponentData(dataTransfer) {\r\n        var str = dataTransfer.getData(constants.componentData);\r\n        if (!str)\r\n            return;\r\n        return JSON.parse(str);\r\n    }\r\n    /** 获取光标在图标内的位置 */\r\n    static mouseInnerPosition(dataTransfer) {\r\n        let str = dataTransfer.getData('mousePosition');\r\n        if (!str)\r\n            return;\r\n        return JSON.parse(str);\r\n    }\r\n    render() {\r\n        let empty = this.props.empty || React.createElement(\"div\", { className: \"empty\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7EC4\\u4EF6\");\r\n        let props = Object.assign({}, this.props);\r\n        let componets = this.state.componets || [];\r\n        // return <DesignerContext.Consumer>\r\n        //     {context => {\r\n        //         this.designer = context.designer;\r\n        return React.createElement(\"ul\", Object.assign({}, props, { className: `${classNames.componentPanel} ${this.props.className || \"\"}`, ref: (e) => this.toolbarElement = this.toolbarElement || e }), componets.length == 0 ? empty : componets.map((c, i) => {\r\n            let props = { key: i };\r\n            props[ComponentPanel.componentIndexName] = `${i}`;\r\n            return React.createElement(\"li\", Object.assign({}, props, { className: classNames.componentIcon }),\r\n                React.createElement(\"div\", { className: \"btn-link\" },\r\n                    React.createElement(\"i\", { className: c.icon, style: { fontSize: 44, color: 'black' }, ref: e => {\r\n                            if (!e)\r\n                                return;\r\n                            let ctrl = c.componentData;\r\n                            this.componentDraggable(e, ctrl);\r\n                        } })),\r\n                React.createElement(\"div\", null, c.displayName));\r\n        }));\r\n        // return <div {...props as any} className={`${classNames.componentPanel} panel panel-primary`}>\r\n        //     <div className=\"panel-heading\">工具栏</div>\r\n        //     <div className=\"panel-body\">\r\n        //     </div>\r\n        // </div>\r\n        //     }}\r\n        // </DesignerContext.Consumer>\r\n    }\r\n}\r\n// designer: PageDesigner;\r\nComponentPanel.componentIndexName = \"data-component-index\";\r\n//# sourceMappingURL=component-panel.js.map","/// <reference path=\"./typings/declare.d.ts\"/>\r\nimport * as React from \"react\";\r\nimport { Errors } from \"./errors\";\r\nimport { constants } from \"./common\";\r\nimport { ComponentPanel } from \"./component-panel\";\r\nimport { classNames, appendClassName } from \"./style\";\r\nimport { ComponentWrapperContext } from \"./component\";\r\n/**\r\n * 组件包装器，对组件进行包装，实现组件设计时的行为。\r\n * 1. 组件的移动\r\n * 2. 组件的拖放\r\n */\r\nexport class ComponentWrapper extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // Display fallback UI\r\n        this.setState({ error });\r\n        // You can also log the error to an error reporting service\r\n        //   logErrorToMyService(error, info);\r\n        debugger;\r\n    }\r\n    designtimeBehavior(element, attr) {\r\n        if (!element)\r\n            throw Errors.argumentNull('element');\r\n        if (!attr)\r\n            throw Errors.argumentNull('args');\r\n        if (element.getAttribute('data-behavior')) {\r\n            return;\r\n        }\r\n        element.setAttribute('data-behavior', 'behavior');\r\n        let designer = this.props.designer;\r\n        console.assert(attr.container != null);\r\n        console.assert(attr.movable != null);\r\n        if (attr.container) {\r\n            ComponentWrapper.enableAppendDroppable(element, designer);\r\n        }\r\n        if (attr.movable) {\r\n            console.assert(element != null);\r\n            ComponentWrapper.draggable(designer, element);\r\n            if (this.handler != null)\r\n                ComponentWrapper.draggable(designer, element, this.handler);\r\n        }\r\n        else {\r\n            element.onclick = (ev) => ComponentWrapper.invokeOnClick(ev, designer, element);\r\n        }\r\n    }\r\n    /**\r\n     * 启用拖放操作，以便通过拖放图标添加控件\r\n     */\r\n    static enableAppendDroppable(element, designer) {\r\n        console.assert(element != null);\r\n        element.addEventListener('dragover', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let componentName = event.dataTransfer.getData(constants.componentData);\r\n            if (componentName)\r\n                event.dataTransfer.dropEffect = \"copy\";\r\n            else\r\n                event.dataTransfer.dropEffect = \"move\";\r\n            console.log(`dragover: left:${event['layerX']} top:${event['layerX']}`);\r\n        });\r\n        element.addEventListener(\"drop\", function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let args1 = arguments[1];\r\n            if (!event.dataTransfer)\r\n                return;\r\n            let ctrl = ComponentPanel.getComponentData(event.dataTransfer);\r\n            if (!ctrl)\r\n                return;\r\n            ctrl.props.style = ctrl.props.style || {};\r\n            designer.pageData.props.style = designer.pageData.props.style || {};\r\n            if (!ctrl.props.style.position) {\r\n                ctrl.props.style.position = designer.pageData.props.style.position;\r\n            }\r\n            let pos = ComponentPanel.mouseInnerPosition(event.dataTransfer);\r\n            console.assert(pos != null);\r\n            if (ctrl.props.style.position == 'absolute') {\r\n                ctrl.props.style.left = event['layerX'] - pos.x;\r\n                ctrl.props.style.top = event['layerY'] - pos.y;\r\n            }\r\n            designer.appendComponent(element.id, ctrl);\r\n        });\r\n    }\r\n    static isResizeHandleClassName(className) {\r\n        let classNames = [\r\n            'resize_handle NE', 'resize_handle NN', 'resize_handle NW',\r\n            'resize_handle WW', 'resize_handle EE', 'resize_handle SW',\r\n            'resize_handle SS', 'resize_handle SE',\r\n        ];\r\n        return classNames.indexOf(className) >= 0;\r\n    }\r\n    static draggable(designer, element, handler) {\r\n        if (!designer)\r\n            throw Errors.argumentNull('designer');\r\n        if (!element)\r\n            throw Errors.argumentNull('element');\r\n        console.assert(element.id != \"\");\r\n        handler = handler || element;\r\n        let componentId = element.id;\r\n        console.assert(componentId != \"\");\r\n        let startPos;\r\n        let rect;\r\n        let dragStart;\r\n        $(handler)\r\n            .drag(\"init\", function (ev) {\r\n            startPos = $(element).position();\r\n            if ($(this).is(`.${classNames.componentSelected}`))\r\n                return $(`.${classNames.componentSelected}`);\r\n        })\r\n            .drag('start', function (ev, dd) {\r\n            dd.attr = $(ev.target).prop(\"className\");\r\n            dd.width = $(this).width();\r\n            dd.height = $(this).height();\r\n            dd.sourceElement = element;\r\n            dragStart = Date.now();\r\n        })\r\n            .drag(function (ev, dd) {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            console.log(`drop:`);\r\n            console.log(dd.drop);\r\n            rect = {};\r\n            if (dd.attr.indexOf(\"E\") > -1) {\r\n                rect.width = Math.max(32, dd.width + dd.deltaX);\r\n            }\r\n            if (dd.attr.indexOf(\"S\") > -1) {\r\n                rect.height = Math.max(32, dd.height + dd.deltaY);\r\n            }\r\n            if (dd.attr.indexOf(\"W\") > -1) {\r\n                rect.width = Math.max(32, dd.width - dd.deltaX);\r\n                setLeft(dd);\r\n            }\r\n            if (dd.attr.indexOf(\"N\") > -1) {\r\n                rect.height = Math.max(32, dd.height - dd.deltaY);\r\n                setTop(dd);\r\n            }\r\n            if (dd.attr.indexOf(\"WW\") >= 0)\r\n                setLeft(dd);\r\n            if (dd.attr.indexOf(\"NE\") >= 0 || dd.attr.indexOf(\"NW\") >= 0 || dd.attr.indexOf(\"SW\") >= 0)\r\n                setPosition(dd);\r\n            if (dd.attr.indexOf(\"NN\") >= 0)\r\n                setTop(dd);\r\n            if (dd.attr.indexOf(\"drag\") > -1) {\r\n                rect.top = dd.offsetY;\r\n                rect.left = dd.offsetX;\r\n            }\r\n            if (!ComponentWrapper.isResizeHandleClassName(dd.attr)) {\r\n                setPosition(dd);\r\n            }\r\n            if (dd.attr)\r\n                $(this).css(rect);\r\n        }, { click: true })\r\n            .drag('end', function (ev, dd) {\r\n            let interval = Date.now() - dragStart;\r\n            ComponentWrapper.isDrag = interval >= 300;\r\n            if (!ComponentWrapper.isResizeHandleClassName(dd.attr)) {\r\n                let left = startPos.left + dd.deltaX;\r\n                let top = startPos.top + dd.deltaY;\r\n                designer.setComponentPosition(element.id, { left, top });\r\n                element.style.transform = '';\r\n            }\r\n            else {\r\n                let left, top;\r\n                if (dd.attr.indexOf(\"W\") > -1)\r\n                    left = startPos.left + dd.deltaX;\r\n                if (dd.attr.indexOf(\"N\") > -1)\r\n                    top = startPos.top + dd.deltaY;\r\n                element.style.transform = '';\r\n                designer.setComponentPosition(element.id, { left, top });\r\n                designer.setComponentSize(componentId, rect);\r\n            }\r\n        })\r\n            .click((ev) => {\r\n            ComponentWrapper.invokeOnClick(ev, designer, element);\r\n        });\r\n        let setPosition = (dd) => {\r\n            console.log(['dd.offsetX, dd.offsetY', dd.offsetX, dd.offsetY]);\r\n            console.log(dd);\r\n            element.style.transform = `translate(${dd.deltaX}px,${dd.deltaY}px)`;\r\n        };\r\n        let setTop = (dd) => {\r\n            element.style.transform = `translateY(${dd.deltaY}px)`;\r\n        };\r\n        let setLeft = (dd) => {\r\n            element.style.transform = `translateX(${dd.deltaX}px)`;\r\n        };\r\n    }\r\n    static invokeOnClick(ev, designer, element) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n        if (ComponentWrapper.isDrag) {\r\n            ComponentWrapper.isDrag = false;\r\n            return;\r\n        }\r\n        let elementID = element.id;\r\n        if (!ev.ctrlKey) {\r\n            designer.selectComponent(element.id);\r\n            return;\r\n        }\r\n        let selectedControlIds = designer.selectedComponentIds;\r\n        console.assert(elementID != \"\");\r\n        if (selectedControlIds.indexOf(elementID) >= 0) {\r\n            selectedControlIds = selectedControlIds.filter(o => o != elementID);\r\n        }\r\n        else {\r\n            selectedControlIds.push(elementID);\r\n        }\r\n        designer.selectComponent(selectedControlIds);\r\n    }\r\n    componentDidMount() {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        let attr = this.props.source.attr;\r\n        this.designtimeBehavior(this.element, attr);\r\n    }\r\n    render() {\r\n        let { error } = this.state || {};\r\n        if (error) {\r\n            return React.createElement(\"div\", { className: \"error\" },\r\n                React.createElement(\"div\", null, error.message),\r\n                React.createElement(\"div\", null, error.stack));\r\n        }\r\n        let attr = this.props.source.attr;\r\n        let noWrapper = attr.noWrapper; //attr.resize || typeof this.props.source.type != 'string';// || (typeof this.props.source.type != 'string' && this.props.source.type != MasterPage)\r\n        if (noWrapper) {\r\n            return this.renderWidthoutWrapper();\r\n        }\r\n        let props = this.props.source.props;\r\n        let style = props.style = JSON.parse(JSON.stringify(props.style || {})); // 深复制 style\r\n        let { top, left, position, width, height, display, visibility } = style;\r\n        let className = appendClassName(props.className || '', classNames.componentWrapper);\r\n        className = props.selected ? appendClassName(className, classNames.componentSelected) : className;\r\n        let wrapperProps = {\r\n            id: props.id,\r\n            className,\r\n            style: { top, left, position, width, height, display, visibility },\r\n            ref: (e) => this.element = e || this.element\r\n        };\r\n        let move_handle = props.selected && attr.showHandler ? React.createElement(\"div\", { className: \"move_handle\", style: {}, ref: e => this.handler = e || this.handler }) : null;\r\n        let showResizeHandle = attr.resize && props.style.position == 'absolute' && props.selected;\r\n        let source = this.props.source;\r\n        if (props.style) {\r\n            delete props.style.left;\r\n            delete props.style.top;\r\n            delete props.style.position;\r\n            if (wrapperProps.style.width && wrapperProps.style.width != 'unset')\r\n                props.style.width = '100%';\r\n            if (wrapperProps.style.height && wrapperProps.style.height != 'unset')\r\n                props.style.height = '100%';\r\n        }\r\n        // source.props.ref = function (e) {\r\n        // };\r\n        return React.createElement(ComponentWrapperContext.Provider, { value: this },\r\n            React.createElement(\"div\", Object.assign({}, wrapperProps),\r\n                move_handle,\r\n                showResizeHandle ?\r\n                    React.createElement(React.Fragment, null,\r\n                        React.createElement(\"div\", { className: \"resize_handle NE\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle NN\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle NW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle WW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle EE\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SW\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SS\" }),\r\n                        React.createElement(\"div\", { className: \"resize_handle SE\" })) : null,\r\n                this.createRawElement(source.type, source.props, source.children)));\r\n    }\r\n    renderWidthoutWrapper() {\r\n        let { type, props, children } = this.props.source;\r\n        let ref = props.ref;\r\n        props.ref = (e) => {\r\n            if (typeof ref == \"function\")\r\n                ref(e);\r\n            if (!e)\r\n                return;\r\n            if (e.tagName) {\r\n                let attr = this.props.source.attr;\r\n                this.designtimeBehavior(e, attr);\r\n                return;\r\n            }\r\n        };\r\n        if (props.selected) {\r\n            props.className = appendClassName(props.className || '', classNames.componentSelected);\r\n        }\r\n        let element = this.createRawElement(type, props, children);\r\n        return React.createElement(ComponentWrapperContext.Provider, { value: this }, element);\r\n    }\r\n    createRawElement(type, props, children) {\r\n        props = Object.assign({}, props);\r\n        let isEmptyElement = (children || []).length == 0;\r\n        if (isEmptyElement) {\r\n            let emtpy = this.designTimeEmptyElement(type, props);\r\n            if (emtpy != null)\r\n                children = [emtpy];\r\n        }\r\n        if (typeof type == \"string\") {\r\n            props[\"parent-id\"] = props.parentId;\r\n            delete props.parentId;\r\n        }\r\n        return React.createElement(type, props, ...children);\r\n    }\r\n    designTimeEmptyElement(type, props) {\r\n        if (type == 'input' || type == 'img' || type == 'meta' || type == 'link')\r\n            return null;\r\n        let typename = typeof type == 'string' ? type : type.name;\r\n        let text = this.designTimeText(typename, props);\r\n        return text;\r\n    }\r\n    designTimeText(type, props) {\r\n        let text = props.text;\r\n        if (text) {\r\n            return text;\r\n        }\r\n        text = text || props.name || type;\r\n        return text;\r\n    }\r\n}\r\nComponentWrapper.isDrag = false;\r\nexport let defaultComponentAttribute = {\r\n    container: false,\r\n    movable: false,\r\n    showHandler: false,\r\n    resize: false,\r\n    noWrapper: false,\r\n};\r\n//# sourceMappingURL=component-wrapper.js.map","import * as React from \"react\";\r\nimport { defaultComponentAttribute } from \"./component-wrapper\";\r\nimport { Errors } from \"./errors\";\r\nimport { proptDisplayNames } from \"./common\";\r\nexport const ComponentWrapperContext = React.createContext(null);\r\nexport function component(args) {\r\n    return function (constructor) {\r\n        // if (PageDesigner) {\r\n        Component.setAttribute(constructor.name, args);\r\n        // }\r\n        Component.register(constructor.name, constructor);\r\n        return constructor;\r\n    };\r\n}\r\nexport class Component {\r\n    /**\r\n     * 设置组件特性\r\n     * @param typename 组件类型名称\r\n     * @param attr 组件特性\r\n     */\r\n    static setAttribute(typename, attr) {\r\n        Component.componentAttributes[typename] = attr;\r\n    }\r\n    /**\r\n     * 获取组件特性\r\n     * @param typename 组件类型名称\r\n     */\r\n    static getAttribute(type) {\r\n        let typename = typeof type == 'string' ? type : type.name;\r\n        let attr = Component.componentAttributes[typename];\r\n        return Object.assign({ type }, defaultComponentAttribute, attr || {});\r\n    }\r\n    static getPropEditors(componentData) {\r\n        let componentType = typeof componentData == \"string\" ? \"string\" : componentData.type;\r\n        let result = [];\r\n        let propEditorInfo = this.componentPropEditors[componentType] || [];\r\n        for (let i = 0; i < propEditorInfo.length; i++) {\r\n            let propName = propEditorInfo[i].propName;\r\n            let display = Component.componentPropEditorDisplay[`${componentType}.${propName}`];\r\n            if (display != null && display(componentData) == false)\r\n                continue;\r\n            result.push(propEditorInfo[i]);\r\n        }\r\n        return result;\r\n        // let classEditors = this.componentPropEditors[componentType] || []\r\n        // Component.componentPropEditorDisplay[`${className}.${propName}`] = editorDisplay;\r\n        // return classEditors\r\n    }\r\n    static getPropEditor(controlClassName, propName) {\r\n        return this.getPropEditorByArray(controlClassName, propName);\r\n    }\r\n    /** 通过属性数组获取属性的编辑器 */\r\n    static getPropEditorByArray(controlClassName, propNames) {\r\n        let classEditors = this.componentPropEditors[controlClassName] || [];\r\n        let editor = classEditors.filter(o => o.propName == propNames)[0];\r\n        return editor;\r\n    }\r\n    static setPropEditor(componentTypeOrOptions, propName, editorType, group) {\r\n        let componentType;\r\n        let editorDisplay;\r\n        if (typeof componentTypeOrOptions == \"object\") {\r\n            let options = componentTypeOrOptions;\r\n            componentType = options.componentType;\r\n            propName = options.propName;\r\n            editorType = options.editorType;\r\n            group = options.group;\r\n            editorDisplay = options.display;\r\n            if (options.displayName != null) {\r\n                proptDisplayNames[propName] = options.displayName;\r\n            }\r\n        }\r\n        else {\r\n            componentType = componentTypeOrOptions;\r\n        }\r\n        group = group || '';\r\n        // 属性可能为导航属性,例如 style.width\r\n        let propNames = propName.split('.');\r\n        let className = typeof componentType == 'string' ? componentType : componentType.prototype.typename || componentType.name;\r\n        Component.componentPropEditorDisplay[`${className}.${propName}`] = editorDisplay;\r\n        let classProps = Component.componentPropEditors[className] = Component.componentPropEditors[className] || [];\r\n        for (let i = 0; i < classProps.length; i++) {\r\n            let propName1 = classProps[i].propName; //classProps[i].propNames.join('.')\r\n            let propName2 = propNames.join('.');\r\n            if (propName1 == propName2) {\r\n                classProps[i].editorType = editorType;\r\n                return;\r\n            }\r\n        }\r\n        classProps.push({ propName, editorType, group });\r\n    }\r\n    static register(componentName, componentType, attr) {\r\n        if (componentType == null && typeof componentName == 'function') {\r\n            componentType = componentName;\r\n            componentName = componentType.name;\r\n            componentType['componentName'] = componentName;\r\n        }\r\n        if (!componentName)\r\n            throw Errors.argumentNull('componentName');\r\n        if (!componentType)\r\n            throw Errors.argumentNull('componentType');\r\n        Component.componentTypes[componentName] = componentType;\r\n        if (attr)\r\n            Component.setAttribute(componentName, attr);\r\n    }\r\n    static getComponentType(componentName) {\r\n        let componentType = Component.componentTypes[componentName];\r\n        return componentType;\r\n    }\r\n}\r\n//==========================================\r\n// 用于创建 React 的 React.Fragment \r\nComponent.Fragment = \"\";\r\n//==========================================\r\n// private static defaultComponentAttribute: ComponentAttribute = {\r\n//     container: false, movable: false, showHandler: false, resize: false\r\n// }\r\nComponent.componentAttributes = {\r\n    'div': { container: true, movable: true, showHandler: true, resize: true },\r\n    'img': { container: false, movable: true, resize: true },\r\n    'label': { movable: true },\r\n    'ul': { container: false, movable: true, showHandler: true, resize: false },\r\n    'li': { container: true, movable: false, },\r\n    'table': { container: false, movable: true, showHandler: true, resize: true },\r\n    'thead': { container: false, movable: false },\r\n    'tbody': { container: false, movable: false },\r\n    'tfoot': { container: false, movable: false },\r\n    'tr': { container: false, movable: false },\r\n    'td': { container: true, movable: false },\r\n};\r\nComponent.componentPropEditors = {};\r\nComponent.componentPropEditorDisplay = {};\r\nComponent.componentTypes = {};\r\n//# sourceMappingURL=component.js.map","import * as React from \"react\";\r\nexport class ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    componentDidCatch(error, info) {\r\n        // Display fallback UI\r\n        this.setState({ error });\r\n        // You can also log the error to an error reporting service\r\n        //   logErrorToMyService(error, info);\r\n        debugger;\r\n    }\r\n    render() {\r\n        let { error } = this.state || {};\r\n        if (error) {\r\n            // You can render any custom fallback UI\r\n            return React.createElement(\"div\", { className: \"error\" },\r\n                React.createElement(\"div\", null, error.message),\r\n                React.createElement(\"div\", null, error.stack));\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n//# sourceMappingURL=error-boundary.js.map","import * as React from \"react\";\r\nimport { Component } from \"./component\";\r\nimport { proptDisplayNames } from \"./common\";\r\nimport { Errors } from \"./errors\";\r\nimport { ErrorBoundary } from \"./error-boundary\";\r\nexport class PropertyEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._element = null;\r\n        this.state = { designer: this.props.designer };\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        return { designer: props.designer };\r\n    }\r\n    getEditors(designer) {\r\n        if (designer == null) {\r\n            return [];\r\n        }\r\n        // 各个控件相同的编辑器\r\n        let commonPropEditorInfos = [];\r\n        let selectedComponents = designer.selectedComponents;\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let componentData = selectedComponents[i];\r\n            let propEditorInfos = Component.getPropEditors(componentData);\r\n            if (i == 0) {\r\n                commonPropEditorInfos = propEditorInfos || [];\r\n            }\r\n            else {\r\n                let items = [];\r\n                commonPropEditorInfos.forEach(propInfo1 => {\r\n                    propEditorInfos.forEach(propInfo2 => {\r\n                        let propName1 = propInfo1.propName; //propInfo1.propNames.join('.')\r\n                        let propName2 = propInfo2.propName; //propInfo2.propNames.join('.')\r\n                        if (propInfo1.editorType == propInfo2.editorType && propName1 == propName2) {\r\n                            items.push(propInfo1);\r\n                        }\r\n                    });\r\n                });\r\n                commonPropEditorInfos = items;\r\n            }\r\n        }\r\n        // 各个控件相同的属性值\r\n        let commonFlatProps;\r\n        for (let i = 0; i < selectedComponents.length; i++) {\r\n            let control = selectedComponents[i];\r\n            let controlProps = Object.assign({}, control.props);\r\n            delete controlProps.children;\r\n            // controlProps = this.flatProps(controlProps)\r\n            if (i == 0) {\r\n                commonFlatProps = controlProps;\r\n            }\r\n            else {\r\n                let obj = {};\r\n                for (let key in commonFlatProps) {\r\n                    if (commonFlatProps[key] == controlProps[key])\r\n                        obj[key] = controlProps[key];\r\n                }\r\n                commonFlatProps = obj;\r\n            }\r\n        }\r\n        let editors = [];\r\n        for (let i = 0; i < commonPropEditorInfos.length; i++) {\r\n            let propEditorInfo = commonPropEditorInfos[i];\r\n            let propName = propEditorInfo.propName;\r\n            ;\r\n            let editorType = propEditorInfo.editorType;\r\n            let value = this.propValue(propName, commonFlatProps);\r\n            let editorProps = {\r\n                value: value,\r\n                editComponents: selectedComponents,\r\n                updateComponentProp: (value) => {\r\n                    let componentProps = selectedComponents.map(o => ({\r\n                        componentId: o.props.id, propName: propEditorInfo.propName, value\r\n                    }));\r\n                    designer.updateComponentProps(...componentProps);\r\n                }\r\n            };\r\n            let editor = React.createElement(editorType, editorProps);\r\n            editors.push({ prop: propEditorInfo.propName, editor, group: propEditorInfo.group });\r\n        }\r\n        return editors;\r\n    }\r\n    propValue(propName, props) {\r\n        if (!propName)\r\n            throw Errors.argumentNull(\"propName\");\r\n        if (!props)\r\n            throw Errors.argumentNull(\"props\");\r\n        let navPropsNames = propName.split(\".\");\r\n        let obj = props;\r\n        for (let i = 0; i < navPropsNames.length; i++) {\r\n            obj = obj[navPropsNames[i]];\r\n            if (obj == null)\r\n                return null;\r\n        }\r\n        return obj;\r\n    }\r\n    render() {\r\n        let { designer } = this.state;\r\n        let editors = this.getEditors(designer);\r\n        if (editors.length == 0) {\r\n            let empty = this.props.empty;\r\n            return React.createElement(\"div\", { className: \"text-center\" }, empty);\r\n        }\r\n        if (this.props.customRender) {\r\n            let items = editors.map(o => Object.assign({ displayName: proptDisplayNames[o.prop] || o.prop }, o));\r\n            let r = this.props.customRender(designer.selectedComponents, items);\r\n            if (r != null) {\r\n                return r;\r\n            }\r\n        }\r\n        let groupEditorsArray = [];\r\n        for (let i = 0; i < editors.length; i++) {\r\n            let group = editors[i].group || '';\r\n            let groupEditors = groupEditorsArray.filter(o => o.group == group)[0];\r\n            if (groupEditors == null) {\r\n                groupEditors = { group: editors[i].group, editors: [] };\r\n                groupEditorsArray.push(groupEditors);\r\n            }\r\n            groupEditors.editors.push({ prop: editors[i].prop, editor: editors[i].editor });\r\n        }\r\n        return React.createElement(React.Fragment, null, groupEditorsArray.map((g) => React.createElement(\"div\", { key: g.group, className: \"panel panel-default\" },\r\n            g.group ? React.createElement(\"div\", { className: \"panel-heading\" }, proptDisplayNames[g.group] || g.group) : null,\r\n            React.createElement(\"div\", { className: \"panel-body\" }, g.editors.map((o, i) => React.createElement(\"div\", { key: o.prop, className: \"form-group clearfix\" },\r\n                React.createElement(\"label\", null, proptDisplayNames[o.prop] || o.prop),\r\n                React.createElement(\"div\", { className: \"control\" },\r\n                    React.createElement(ErrorBoundary, null, o.editor))))))));\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n}\r\n//# sourceMappingURL=property-editor.js.map","import * as React from \"react\";\r\nimport { PropertyEditor } from \"./property-editor\";\r\nimport { classNames } from \"./style\";\r\nexport class EditorPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { componentDatas: [], designer: null };\r\n        this.designerComponentChanged = () => {\r\n            console.assert(this.designer != null);\r\n            this.setState({ designer: this.designer });\r\n        };\r\n    }\r\n    get designer() {\r\n        return this._designer;\r\n    }\r\n    set designer(value) {\r\n        if (this._designer) {\r\n            this._designer.componentRemoved.remove(this.designerComponentChanged);\r\n            this._designer.componentAppend.remove(this.designerComponentChanged);\r\n            this._designer.componentUpdated.remove(this.designerComponentChanged);\r\n            this._designer.componentSelected.remove(this.designerComponentChanged);\r\n        }\r\n        if (value) {\r\n            value.componentRemoved.add(this.designerComponentChanged);\r\n            value.componentAppend.add(this.designerComponentChanged);\r\n            value.componentUpdated.add(this.designerComponentChanged);\r\n            value.componentSelected.add(this.designerComponentChanged);\r\n        }\r\n        this._designer = value;\r\n        this.setState({ designer: value });\r\n    }\r\n    render() {\r\n        let { empty } = this.props;\r\n        empty = empty || React.createElement(\"div\", { className: \"empty\" }, \"\\u6682\\u65E0\\u53EF\\u7528\\u7684\\u5C5E\\u6027\");\r\n        let { designer } = this.state;\r\n        return React.createElement(\"div\", { className: `${classNames.editorPanel} ${this.props.className || \"\"}`, ref: (e) => this.element = e || this.element },\r\n            React.createElement(PropertyEditor, { designer: designer, ref: e => this.editor = e || this.editor, empty: empty, customRender: this.props.customRender }));\r\n    }\r\n}\r\n//# sourceMappingURL=editor-panel.js.map","import { Component, ComponentWrapperContext } from \"./component\";\r\nimport { Errors } from \"./errors\";\r\nimport { appendClassName, classNames, removeClassName } from \"./style\";\r\nimport { ComponentWrapper } from \"./component-wrapper\";\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { guid, constants } from \"./common\";\r\nimport { ComponentPanel } from \"./component-panel\";\r\nexport const PageBuilderContext = React.createContext({ pageBuilder: null });\r\n/** 基于 ReactJS 的页面渲染器 */\r\nexport class ReactPageBuilder {\r\n    constructor(args) {\r\n        if (!args)\r\n            throw Errors.argumentNull(\"args\");\r\n        this.designer = args.designer;\r\n    }\r\n    createDesignTimeElement(type, props, ...children) {\r\n        if (type == null)\r\n            throw Errors.argumentNull('type');\r\n        if (props == null)\r\n            throw Errors.argumentNull('props');\r\n        if (props.id == null)\r\n            throw Errors.argumentFieldCanntNull('id', 'props');\r\n        console.assert(props.id != null);\r\n        if (props.id != null)\r\n            props.key = props.id;\r\n        //===================================================\r\n        // 获取对象的 ComponentAttribute ，以从对象 props 中获取的为准\r\n        let attr1 = Component.getAttribute(type);\r\n        console.assert(attr1 != null);\r\n        let attr2 = props.attr || {};\r\n        let attr = Object.assign({}, attr1, attr2);\r\n        delete props.attr;\r\n        //===================================================\r\n        let className = props.selected ? appendClassName(props.className || '', classNames.componentSelected) : props.className;\r\n        let wrapperProps = Object.assign({}, props);\r\n        delete wrapperProps.ref;\r\n        wrapperProps.className = className;\r\n        return React.createElement(ComponentWrapper, Object.assign({}, wrapperProps, { designer: this.designer, source: { type, attr, props, children } }));\r\n    }\r\n    createPage(pageData, pageElement) {\r\n        if (!pageData)\r\n            throw Errors.argumentNull(\"pageData\");\r\n        if (!pageElement)\r\n            throw Errors.argumentNull(\"pageElement\");\r\n        ReactPageBuilder.fillPageData(pageData);\r\n        this.pageData = pageData;\r\n        this.pageElement = pageElement;\r\n        this.render();\r\n    }\r\n    render() {\r\n        console.assert(this.pageData.props.id != null);\r\n        let c = ReactPageBuilder.createElement(this.pageData, this.createDesignTimeElement.bind(this));\r\n        ReactDOM.render(React.createElement(PageBuilderContext.Provider, { value: { pageBuilder: this } }, c), this.pageElement);\r\n    }\r\n    updateComponentProps(componentProps) {\r\n        let componentDatas = [];\r\n        for (let i = 0; i < componentProps.length; i++) {\r\n            let { componentId, propName, value } = componentProps[i];\r\n            let componentData = this.findComponentData(componentId);\r\n            if (componentData == null)\r\n                continue;\r\n            let navPropsNames = propName.split(\".\");\r\n            console.assert(componentData != null);\r\n            console.assert(navPropsNames != null, 'props is null');\r\n            componentData.props = componentData.props || {};\r\n            let obj = componentData.props;\r\n            for (let i = 0; i < navPropsNames.length - 1; i++) {\r\n                obj = obj[navPropsNames[i]] = obj[navPropsNames[i]] || {};\r\n            }\r\n            obj[navPropsNames[navPropsNames.length - 1]] = value;\r\n            componentDatas.push(componentData);\r\n        }\r\n        this.render();\r\n        return componentDatas;\r\n    }\r\n    setComponentsSize(componentSiezs) {\r\n        let componentDatas = [];\r\n        for (let i = 0; i < componentSiezs.length; i++) {\r\n            let { componentId, size } = componentSiezs[i];\r\n            let componentData = this.findComponentData(componentId);\r\n            if (!componentData)\r\n                throw new Error(`Control ${componentId} is not exits.`);\r\n            componentDatas.push(componentData);\r\n            let style = componentData.props.style = (componentData.props.style || {});\r\n            if (size.height)\r\n                style.height = size.height;\r\n            if (size.width)\r\n                style.width = size.width;\r\n        }\r\n        this.render();\r\n        return componentDatas;\r\n    }\r\n    findComponentData(componentId) {\r\n        let componentDatas = ReactPageBuilder.travelComponentData(this.pageData, (item) => item.props.id == componentId);\r\n        return componentDatas[0];\r\n    }\r\n    /** 对 pageData 进行缺少的字段进行补充 */\r\n    static fillPageData(pageData) {\r\n        if (pageData == null) {\r\n            return;\r\n        }\r\n        pageData.children = pageData.children || [];\r\n        ReactPageBuilder.nameComponent(pageData);\r\n        // PageDesigner.setComponetRefProp(pageData, components);\r\n    }\r\n    static travelComponentData(pageData, filter) {\r\n        let stack = new Array();\r\n        stack.push(pageData);\r\n        let r = [];\r\n        // return new Promise((resolve, reject) => {\r\n        filter = filter || (() => true);\r\n        while (stack.length > 0) {\r\n            let item = stack.shift();\r\n            if (filter(item)) {\r\n                r.push(item);\r\n            }\r\n            //===============================================\r\n            // 子元素有可能为字符串, 过滤出对象\r\n            let children = (item.children || []).filter(o => typeof o == 'object');\r\n            //===============================================\r\n            stack.push(...children);\r\n        }\r\n        return r;\r\n    }\r\n    appendComponent(parentId, componentData, componentIndex) {\r\n        if (!parentId)\r\n            throw Errors.argumentNull('parentId');\r\n        if (!componentData)\r\n            throw Errors.argumentNull('childComponent');\r\n        ReactPageBuilder.nameComponent(componentData);\r\n        let parentControl = this.findComponentData(parentId);\r\n        if (parentControl == null)\r\n            throw new Error('Parent is not exists');\r\n        console.assert(parentControl != null);\r\n        parentControl.children = parentControl.children || [];\r\n        if (componentIndex != null) {\r\n            parentControl.children.splice(componentIndex, 0, componentData);\r\n        }\r\n        else {\r\n            parentControl.children.push(componentData);\r\n        }\r\n        // let { pageData } = this.state;\r\n        // this.setState({ pageData });\r\n        // this.selectComponent(componentData.props.id);\r\n        // this.componentAppend.fire(this)\r\n        this.render();\r\n    }\r\n    /**\r\n     * 选择指定的控件\r\n     * @param control 指定的控件\r\n     */\r\n    selectComponents(componentIds) {\r\n        if (typeof componentIds == 'string')\r\n            componentIds = [componentIds];\r\n        var stack = [];\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            let isSelectedControl = componentIds.indexOf(item.props.id) >= 0;\r\n            item.props.selected = isSelectedControl;\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++) {\r\n                stack.push(children[i]);\r\n            }\r\n        }\r\n        // this.setState({ pageData: this.pageData })\r\n        // this.componentSelected.fire(this.selectedComponentIds)\r\n        this.render();\r\n        //====================================================\r\n        // 设置焦点，以便获取键盘事件\r\n        this.pageElement.focus();\r\n        //====================================================\r\n    }\r\n    setComponentsPosition(positions) {\r\n        let componentDatas = new Array();\r\n        positions.forEach(o => {\r\n            let { componentId } = o;\r\n            let { left, top } = o.position;\r\n            let componentData = this.findComponentData(componentId);\r\n            if (!componentData)\r\n                throw new Error(`Control ${componentId} is not exits.`);\r\n            let style = componentData.props.style = componentData.props.style || {};\r\n            if (left)\r\n                style.left = left;\r\n            if (top)\r\n                style.top = top;\r\n            componentDatas.push(componentData);\r\n        });\r\n        this.render();\r\n        return componentDatas;\r\n    }\r\n    removeComponents(componentIds) {\r\n        let pageData = this.pageData;\r\n        if (!pageData || !pageData.children || pageData.children.length == 0)\r\n            return;\r\n        componentIds.forEach(controlId => {\r\n            this.removeComponentFrom(controlId, pageData.children);\r\n        });\r\n    }\r\n    moveComponent(componentId, parentId, childComponentIndex) {\r\n        let component = this.findComponentData(componentId);\r\n        if (component == null)\r\n            throw new Error(`Cannt find component by id ${componentId}`);\r\n        console.assert(component != null, `Cannt find component by id ${componentId}`);\r\n        let pageData = this.pageData;\r\n        console.assert(pageData.children != null);\r\n        this.removeComponentFrom(componentId, pageData.children);\r\n        this.appendComponent(parentId, component, childComponentIndex);\r\n    }\r\n    removeComponentFrom(componentId, collection) {\r\n        let compoentIndex = null;\r\n        for (let i = 0; i < collection.length; i++) {\r\n            if (componentId == collection[i].props.id) {\r\n                compoentIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (compoentIndex == null) {\r\n            for (let i = 0; i < collection.length; i++) {\r\n                let o = collection[i];\r\n                if (o.children && o.children.length > 0) {\r\n                    let isRemoved = this.removeComponentFrom(componentId, o.children);\r\n                    if (isRemoved) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        if (compoentIndex == 0) {\r\n            collection.shift();\r\n        }\r\n        else if (compoentIndex == collection.length - 1) {\r\n            collection.pop();\r\n        }\r\n        else {\r\n            collection.splice(compoentIndex, 1);\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * 对组件及其子控件进行命名\r\n     * @param component\r\n     */\r\n    static nameComponent(component) {\r\n        let namedComponents = {};\r\n        let props = component.props = component.props || {};\r\n        if (!props.name) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (namedComponents[name]);\r\n            namedComponents[name] = component;\r\n            props.name = name;\r\n        }\r\n        if (!props.id)\r\n            props.id = guid();\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < component.children.length; i++) {\r\n            ReactPageBuilder.nameComponent(component.children[i]);\r\n        }\r\n    }\r\n    static createElement(componentData, h) {\r\n        return ReactPageBuilder._createElement(componentData, { components: [], componentTypes: [] }, h);\r\n    }\r\n    /**\r\n     * 将持久化的元素数据转换为 ReactElement\r\n     * @param componentData 元素数据\r\n     */\r\n    static _createElement(componentData, context, h) {\r\n        if (!componentData)\r\n            throw Errors.argumentNull('componentData');\r\n        h = h || React.createElement;\r\n        try {\r\n            let type = componentData.type;\r\n            let componentName = componentData.type;\r\n            let componentType = Component.getComponentType(componentName);\r\n            if (componentType) {\r\n                type = componentType;\r\n            }\r\n            let children = componentData.children ? componentData.children.map(o => ReactPageBuilder._createElement(o, context, h)) : [];\r\n            let props = componentData.props == null ? {} : Object.assign({}, componentData.props); //JSON.parse(JSON.stringify(componentData.props));\r\n            props.style = Object.assign({}, props.style || {});\r\n            if (componentType != null && componentType[\"defaultProps\"]) {\r\n                props = Object.assign({}, componentType[\"defaultProps\"], props);\r\n            }\r\n            let result;\r\n            if (typeof type == 'string') {\r\n                if (props.text) {\r\n                    children.push(props.text);\r\n                }\r\n                //=========================================\r\n                // props.text 非 DOM 的 prop，并且已经使用完\r\n                delete props.text;\r\n                if (h == React.createElement) {\r\n                    delete props.attr;\r\n                }\r\n                //=========================================\r\n            }\r\n            let masterPage;\r\n            type = type == Component.Fragment ? React.Fragment : type;\r\n            let ref = props.ref;\r\n            props.ref = function (e) {\r\n                if (typeof ref == \"function\")\r\n                    ref(e);\r\n                if (e instanceof MasterPage) {\r\n                    masterPage = e;\r\n                    for (let i = 0; i < context.componentTypes.length; i++) {\r\n                        let typeName = context.componentTypes[i];\r\n                        let childComponents = masterPage.childComponents[typeName] = masterPage.childComponents[typeName] || [];\r\n                        childComponents.push(context.components[i]);\r\n                    }\r\n                }\r\n                else if (e != null) {\r\n                    context.components.push(e);\r\n                    context.componentTypes.push(typeof type == \"string\" ? type : type.name);\r\n                    // masterPage.componentCreated.fire({ component: e, type: typeof type == \"string\" ? type : type.name });\r\n                }\r\n            };\r\n            result = h(type, props, ...children);\r\n            return result;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            return null;\r\n        }\r\n    }\r\n}\r\nexport const MasterPageName = 'MasterPage';\r\nexport const MasterPageContext = React.createContext({ master: null });\r\nexport class MasterPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.childComponents = {};\r\n        let children = MasterPage.children(props);\r\n        this.state = { children };\r\n    }\r\n    static children(props) {\r\n        let arr = props.children == null ? [] :\r\n            Array.isArray(props.children) ? props.children : [props.children];\r\n        let children = [];\r\n        arr.forEach(o => {\r\n            if (!React.isValidElement(o))\r\n                return;\r\n            children.push(o);\r\n        });\r\n        return children;\r\n    }\r\n    static getDerivedStateFromProps(props) {\r\n        let children = MasterPage.children(props);\r\n        return { children };\r\n    }\r\n    render() {\r\n        let props = {};\r\n        for (let key in this.props) {\r\n            if (key == 'ref' || key == 'id')\r\n                continue;\r\n            props[key] = this.props[key];\r\n        }\r\n        props.style = Object.assign({ minHeight: 40 }, props.style);\r\n        let children = this.state.children.filter(o => o.props.parentId == null);\r\n        let master = this;\r\n        console.assert(master != null);\r\n        return React.createElement(MasterPageContext.Provider, { value: { master } }, children);\r\n    }\r\n}\r\nComponent.register(MasterPageName, MasterPage, { container: false, resize: false, noWrapper: true });\r\n/**\r\n * 占位符，用于放置控件\r\n */\r\nexport class PlaceHolder extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        if (!this.props.id) {\r\n            throw Errors.placeHolderIdNull();\r\n        }\r\n    }\r\n    /**\r\n     * 启用拖放操作，以便通过拖放图标添加控件\r\n     */\r\n    enableAppendDroppable(element, master) {\r\n        if (element.getAttribute('enable-append-droppable'))\r\n            return;\r\n        element.setAttribute('enable-append-droppable', 'true');\r\n        console.assert(element != null);\r\n        element.addEventListener('dragover', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = appendClassName(element.className || '', 'active');\r\n            let componentName = event.dataTransfer.getData(constants.componentData);\r\n            if (componentName)\r\n                event.dataTransfer.dropEffect = \"copy\";\r\n            else\r\n                event.dataTransfer.dropEffect = \"move\";\r\n            console.log(`dragover: left:${event.layerX} top:${event.layerX}`);\r\n        });\r\n        let func = function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = removeClassName(element.className, 'active');\r\n        };\r\n        element.addEventListener('dragleave', func);\r\n        element.addEventListener('dragend', func);\r\n        element.addEventListener('dragexit', func);\r\n        element.ondrop = (event) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            element.className = removeClassName(element.className, 'active');\r\n            let ctrl;\r\n            if (event.dataTransfer)\r\n                ctrl = ComponentPanel.getComponentData(event.dataTransfer);\r\n            if (!ctrl)\r\n                return;\r\n            console.assert(this.props.id != null);\r\n            console.assert(this.designer != null);\r\n            ctrl.props.parentId = this.props.id;\r\n            console.assert(master != null, 'host is null');\r\n            this.designer.appendComponent(master.props.id, ctrl);\r\n        };\r\n    }\r\n    enableMoveDroppable(element, host) {\r\n        if (element.getAttribute('enable-move-droppable'))\r\n            return;\r\n        element.setAttribute('enable-move-droppable', 'true');\r\n        $(element)\r\n            .drop('start', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            appendClassName(element, 'active');\r\n        })\r\n            .drop('drop', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            let componentData = this.designer.findComponentData(dd.sourceElement.id);\r\n            console.assert(componentData != null);\r\n            this.designer.moveComponent(dd.sourceElement.id, host.props.id);\r\n            this.designer.updateComponentProps([{\r\n                    componentId: \"string\", propName: \"string\", value: \"any\"\r\n                }]); //dd.sourceElement.id, propName, this.props.id\r\n        })\r\n            .drop('end', (event, dd) => {\r\n            if (dd.sourceElement.id == this.wraper.props.source.props.id)\r\n                return;\r\n            removeClassName(element, 'active');\r\n        });\r\n    }\r\n    render() {\r\n        let empty = this.props.empty || React.createElement(\"div\", { key: guid(), className: \"empty\" }, \"\\u53EF\\u4EE5\\u62D6\\u62C9\\u63A7\\u4EF6\\u5230\\u8FD9\\u91CC\");\r\n        return React.createElement(MasterPageContext.Consumer, null, (args) => {\r\n            let master = args.master;\r\n            if (master == null)\r\n                throw Errors.canntFindMasterPage(this.props.id);\r\n            let children = [];\r\n            if (master.props && master.props.children) {\r\n                let arr;\r\n                if (Array.isArray(master.props.children)) {\r\n                    arr = master.props.children;\r\n                }\r\n                else {\r\n                    arr = [master.props.children];\r\n                }\r\n                children = arr.filter((o) => o.props.parentId != null && o.props.parentId == this.props.id);\r\n            }\r\n            return React.createElement(PageBuilderContext.Consumer, null, args => {\r\n                return React.createElement(ComponentWrapperContext.Consumer, null, wraper => {\r\n                    this.wraper = wraper;\r\n                    console.assert(this.wraper != null);\r\n                    if (args.pageBuilder != null && children.length == 0) {\r\n                        children = [empty];\r\n                    }\r\n                    let element = React.createElement(React.Fragment, null,\r\n                        this.props.children,\r\n                        children);\r\n                    if (args.pageBuilder) {\r\n                        this.designer = args.pageBuilder;\r\n                        element = React.createElement(\"div\", { key: guid(), className: classNames.placeholder, ref: e => {\r\n                                if (!e)\r\n                                    return;\r\n                                this.element = e;\r\n                                this.enableAppendDroppable(e, master);\r\n                                this.enableMoveDroppable(e, master);\r\n                            } }, element);\r\n                    }\r\n                    return element;\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\nComponent.register('PlaceHolder', PlaceHolder, { resize: false, movable: false, container: true });\r\n/** 用于将 ComponentData 显示为组件 */\r\nexport class PageView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        if (!this.props.pageData)\r\n            throw Errors.propCanntNull(PageView.name, 'pageData');\r\n    }\r\n    render() {\r\n        let element = ReactPageBuilder.createElement(this.props.pageData);\r\n        return element;\r\n    }\r\n}\r\n//# sourceMappingURL=react-page-builder.js.map","import * as React from \"react\";\r\nimport { Callback, guid } from \"./common\";\r\nimport { Errors } from \"./errors\";\r\nimport { classNames } from \"./style\";\r\nimport { ReactPageBuilder } from \"./react-page-builder\";\r\nexport class PageDesigner extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.componentSelected = Callback.create();\r\n        this.componentRemoved = Callback.create();\r\n        this.componentAppend = Callback.create();\r\n        this.componentUpdated = Callback.create();\r\n        this.designtimeComponentDidMount = Callback.create();\r\n        // let components: PageDesignerState[\"components\"] = {};\r\n        // PageDesigner.fillPageData(props.pageData);\r\n        this.state = {};\r\n        this.designtimeComponentDidMount.add(() => {\r\n            console.log(`this:designer event:controlComponentDidMount`);\r\n        });\r\n        let pageBuilderType = props.pageBuilderType || ReactPageBuilder;\r\n        this.pageBuilder = new pageBuilderType({ designer: this });\r\n    }\r\n    // private static setComponetRefProp(pageData: ComponentData, components: PageDesignerState[\"components\"]) {\r\n    //     //=========================================================\r\n    //     // 纪录当前 pageData 控件 ID\r\n    //     let componentIds: { [typeName: string]: string[] } = {};\r\n    //     //=========================================================\r\n    //     PageDesigner.travelComponentData(pageData).forEach(item => {\r\n    //         console.assert(item.props != null && item.props.id != null);\r\n    //         componentIds[item.type] = componentIds[item.type] || [];\r\n    //         componentIds[item.type].push(item.props[\"id\"] as string);\r\n    //         let itemRef = item.props.ref;\r\n    //         item.props.ref = (e) => {\r\n    //             if (e != null) {\r\n    //                 components[item.type] = components[item.type] || [];\r\n    //                 components[item.type].push(e);\r\n    //             }\r\n    //             if (typeof itemRef == \"function\")\r\n    //                 itemRef(e);\r\n    //         }\r\n    //     })\r\n    //     //=========================================================\r\n    //     // 仅保留 componentIds 中的控件 \r\n    //     let names = Object.getOwnPropertyNames(components);\r\n    //     for (let i = 0; i < names.length; i++) {\r\n    //         let typename = names[i];\r\n    //         let ids = componentIds[typename] || [];\r\n    //         components[typename] = (components[typename] || []).filter(o => ids.indexOf(o[\"id\"] || o.props[\"id\"]) >= 0)\r\n    //     }\r\n    //     //=========================================================\r\n    // }\r\n    // /** 对 pageData 进行缺少的字段进行补充 */\r\n    // private static fillPageData(pageData: ComponentData) {\r\n    //     if (pageData == null) {\r\n    //         return\r\n    //     }\r\n    //     pageData.children = pageData.children || [];\r\n    //     PageDesigner.nameComponent(pageData);\r\n    //     // PageDesigner.setComponetRefProp(pageData, components);\r\n    // }\r\n    // allComponents(): React.Component[] {\r\n    //     let r: React.Component[] = [];\r\n    //     for (let key in this.state.components) {\r\n    //         r.push(...this.state.components[key]);\r\n    //     }\r\n    //     return r;\r\n    // }\r\n    /** 页面数据 */\r\n    get pageData() {\r\n        return this.props.pageData;\r\n    }\r\n    /** 获取已选择了的组件编号 */\r\n    get selectedComponentIds() {\r\n        return this.selectedComponents.map(o => o.props.id);\r\n    }\r\n    /** 获取已选择了的组件 */\r\n    get selectedComponents() {\r\n        let arr = new Array();\r\n        let stack = new Array();\r\n        stack.push(this.pageData);\r\n        while (stack.length > 0) {\r\n            let item = stack.pop();\r\n            if (item.props != null && item.props.selected == true)\r\n                arr.push(item);\r\n            let children = item.children || [];\r\n            for (let i = 0; i < children.length; i++)\r\n                stack.push(children[i]);\r\n        }\r\n        return arr;\r\n    }\r\n    /** 更新组件属性 */\r\n    updateComponentProp(componentId, propName, value) {\r\n        return this.updateComponentProps({ componentId, propName, value });\r\n    }\r\n    /** 更新组件多个属性 */\r\n    updateComponentProps(...componentProps) {\r\n        let componentDatas = this.pageBuilder.updateComponentProps(componentProps);\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    /**\r\n     * 对组件及其子控件进行命名\r\n     * @param component\r\n     */\r\n    static nameComponent(component) {\r\n        let namedComponents = {};\r\n        let props = component.props = component.props || {};\r\n        if (!props.name) {\r\n            let num = 0;\r\n            let name;\r\n            do {\r\n                num = num + 1;\r\n                name = `${component.type}${num}`;\r\n            } while (namedComponents[name]);\r\n            namedComponents[name] = component;\r\n            props.name = name;\r\n        }\r\n        if (!props.id)\r\n            props.id = guid();\r\n        if (!component.children || component.children.length == 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < component.children.length; i++) {\r\n            PageDesigner.nameComponent(component.children[i]);\r\n        }\r\n    }\r\n    /**\r\n     * 添加控件\r\n     * @param parentId 父控件编号\r\n     * @param componentData 控件数据\r\n     * @param componentIndex 新添加组件在子组件中的次序\r\n     */\r\n    appendComponent(parentId, componentData, componentIndex) {\r\n        if (!parentId)\r\n            throw Errors.argumentNull('parentId');\r\n        if (!componentData)\r\n            throw Errors.argumentNull('childComponent');\r\n        this.pageBuilder.appendComponent(parentId, componentData, componentIndex);\r\n        this.selectComponent(componentData.props.id);\r\n        this.componentAppend.fire(this);\r\n    }\r\n    /**\r\n     * 设置控件位置\r\n     * @param componentId 组件编号\r\n     * @param position 组件位置\r\n     */\r\n    setComponentPosition(componentId, position) {\r\n        return this.setComponentsPosition([{ componentId, position }]);\r\n    }\r\n    /**\r\n     * 设置控件大小\r\n     * @param componentId 组件编号\r\n     * @param size 组件大小\r\n     */\r\n    setComponentSize(componentId, size) {\r\n        // console.assert(componentId != null)\r\n        // console.assert(size != null)\r\n        // let componentData = this.findComponentData(componentId);\r\n        // if (!componentData)\r\n        //     throw new Error(`Control ${componentId} is not exits.`);\r\n        // let style = componentData.props.style = (componentData.props.style || {});\r\n        // if (size.height)\r\n        //     style.height = size.height\r\n        // if (size.width)\r\n        //     style.width = size.width\r\n        // let { pageData } = this.state;\r\n        // this.setState({ pageData });\r\n        let componentDatas = this.pageBuilder.setComponentsSize([{ componentId, size }]);\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    /** 设置多个组件的位置 */\r\n    setComponentsPosition(positions) {\r\n        let componentDatas = this.pageBuilder.setComponentsPosition(positions);\r\n        this.componentUpdated.fire(componentDatas);\r\n    }\r\n    /**\r\n     * 选择指定的控件\r\n     * @param control 指定的控件\r\n     */\r\n    selectComponent(componentIds) {\r\n        let ids = typeof componentIds == \"string\" ? [componentIds] : componentIds;\r\n        this.pageBuilder.selectComponents(ids);\r\n        this.componentSelected.fire(ids);\r\n    }\r\n    /** 移除控件 */\r\n    removeComponent(...componentIds) {\r\n        if (!componentIds)\r\n            throw Errors.argumentNull(\"componentIds\");\r\n        this.pageBuilder.removeComponents(componentIds);\r\n        this.componentRemoved.fire(componentIds);\r\n    }\r\n    /**\r\n     * 移动控件到另外一个控件容器\r\n     * @param componentId 要移动的组件编号\r\n     * @param parentId 目标组件编号\r\n     * @param beforeChildId 组件的前一个子组件编号\r\n     */\r\n    moveComponent(componentId, parentId, childComponentIndex) {\r\n        this.pageBuilder.moveComponent(componentId, parentId, childComponentIndex);\r\n    }\r\n    // private static travelComponentData(pageData: ComponentData, filter?: (item: ComponentData) => boolean): ComponentData[] {\r\n    //     let stack = new Array<ComponentData>();\r\n    //     stack.push(pageData);\r\n    //     let r: ComponentData[] = [];\r\n    //     // return new Promise((resolve, reject) => {\r\n    //     filter = filter || (() => true);\r\n    //     while (stack.length > 0) {\r\n    //         let item = stack.shift();\r\n    //         if (filter(item)) {\r\n    //             r.push(item);\r\n    //         }\r\n    //         //===============================================\r\n    //         // 子元素有可能为字符串, 过滤出对象\r\n    //         let children = (item.children || []).filter(o => typeof o == 'object') as ComponentData[]\r\n    //         //===============================================\r\n    //         stack.push(...children);\r\n    //     }\r\n    //     return r;\r\n    // }\r\n    // findComponetsByTypeName(componentTypeName: string) {\r\n    //     let components = this.state.components[componentTypeName];\r\n    //     return components;\r\n    // }\r\n    // findComponentData(componentId: string): ComponentData | null {\r\n    //     let pageData = this.state.pageData;\r\n    //     if (!pageData)\r\n    //         throw Errors.pageDataIsNull();\r\n    //     let componentDatas = PageDesigner.travelComponentData(pageData, (item) => item.props.id == componentId)\r\n    //     return componentDatas[0];\r\n    // }\r\n    onKeyDown(e) {\r\n        const DELETE_KEY_CODE = 46;\r\n        if (e.keyCode == DELETE_KEY_CODE) {\r\n            if (this.selectedComponents.length == 0)\r\n                return;\r\n            this.removeComponent(...this.selectedComponentIds);\r\n        }\r\n    }\r\n    // private createDesignTimeElement(type: string | React.ComponentClass<any>, props: ComponentProps<any>, ...children: any[]) {\r\n    //     if (type == null) throw Errors.argumentNull('type')\r\n    //     if (props == null) throw Errors.argumentNull('props')\r\n    //     if (props.id == null) throw Errors.argumentFieldCanntNull('id', 'props')\r\n    //     console.assert(props.id != null)\r\n    //     if (props.id != null)\r\n    //         props.key = props.id;\r\n    //     //===================================================\r\n    //     // 获取对象的 ComponentAttribute ，以从对象 props 中获取的为准\r\n    //     let attr1 = Component.getAttribute(type)\r\n    //     console.assert(attr1 != null)\r\n    //     let attr2 = props.attr || {}\r\n    //     let attr = Object.assign({}, attr1, attr2)\r\n    //     delete props.attr\r\n    //     //===================================================\r\n    //     let className = props.selected ? appendClassName(props.className || '', classNames.componentSelected) : props.className\r\n    //     let wrapperProps = Object.assign({}, props);\r\n    //     delete wrapperProps.ref;\r\n    //     wrapperProps.className = className;\r\n    //     return <ComponentWrapper {...wrapperProps} designer={this}\r\n    //         source={{ type, attr, props, children }}>\r\n    //     </ComponentWrapper>\r\n    // }\r\n    // static getDerivedStateFromProps(props: PageDesignerProps, state: PageDesignerState) {\r\n    //     PageDesigner.fillPageData(props.pageData);\r\n    //     return { pageData: props.pageData } as Partial<PageDesignerState>;\r\n    // }\r\n    componentDidMount() {\r\n        this.pageBuilder.createPage(this.pageData, this.element);\r\n    }\r\n    render() {\r\n        let style = this.props.style;\r\n        let result = React.createElement(\"div\", { className: classNames.designer, tabIndex: 1, style: style, onKeyDown: (e) => this.onKeyDown(e), ref: e => {\r\n                this.element = e || this.element;\r\n            } });\r\n        return result;\r\n    }\r\n}\r\nPageDesigner.defaultProps = { pageData: null, wrapDesignTimeElement: true };\r\n//# sourceMappingURL=page-designer.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from \"react\";\r\nexport class PropEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    static dropdown(items, valueType) {\r\n        return dropdown(items, valueType);\r\n    }\r\n    static textInput() {\r\n        return TextInput;\r\n    }\r\n}\r\nexport class TextInput extends PropEditor {\r\n    render() {\r\n        let { value } = this.props;\r\n        return React.createElement(\"input\", { className: 'form-control', value: value || '', onChange: e => {\r\n                // this.setState({ value: e.target.value })\r\n                this.props.updateComponentProp(e.target.value);\r\n            } });\r\n    }\r\n}\r\nfunction dropdown(items, valueType) {\r\n    let itemsPromise;\r\n    let textValues = [];\r\n    if (valueType == null && Array.isArray(items)) {\r\n        valueType = items.length > 0 && typeof items[0] == \"number\" ? \"number\" : \"string\";\r\n        for (let i = 0; i < items.length; i++) {\r\n            textValues[i] = { text: items[i], value: items[i] };\r\n        }\r\n    }\r\n    else if (valueType == null) {\r\n        valueType = \"string\";\r\n        let propNames = Object.getOwnPropertyNames(items);\r\n        for (let i = 0; i < propNames.length; i++) {\r\n            textValues[i] = { text: items[propNames[i]], value: propNames[i] };\r\n        }\r\n    }\r\n    else if (Array.isArray(items)) {\r\n        textValues = items;\r\n    }\r\n    else {\r\n        itemsPromise = items;\r\n    }\r\n    class Dropdown extends PropEditor {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {};\r\n        }\r\n        componentDidMount() {\r\n            return __awaiter(this, void 0, void 0, function* () {\r\n                if (itemsPromise) {\r\n                    let items = yield itemsPromise;\r\n                    this.setState({ items });\r\n                }\r\n            });\r\n        }\r\n        render() {\r\n            let { items } = this.state;\r\n            let { value } = this.props;\r\n            items = items || textValues;\r\n            return React.createElement(\"select\", { className: 'form-control', value: value == null ? \"\" : value, onChange: e => {\r\n                    let textValue = e.target.value;\r\n                    if (valueType == \"number\") {\r\n                        let integerRegex = /^\\d+$/;\r\n                        let floatRegex = /^[+-]?\\d+(\\.\\d+)?$/;\r\n                        if (integerRegex.test(textValue))\r\n                            value = parseInt(textValue);\r\n                        else if (floatRegex.test(textValue))\r\n                            value = parseFloat(textValue);\r\n                        else\r\n                            value = null;\r\n                    }\r\n                    else {\r\n                        value = textValue;\r\n                    }\r\n                    this.props.updateComponentProp(value);\r\n                } }, items.map(o => React.createElement(\"option\", { key: o.value, value: o.value }, o.text)));\r\n        }\r\n    }\r\n    return Dropdown;\r\n}\r\n//# sourceMappingURL=prop-editor.js.map","import './jquery';\r\nimport '../lib/jquery.event.drag-2.2';\r\nimport '../lib/jquery.event.drag.live-2.2';\r\nimport '../lib/jquery.event.drop-2.2';\r\nimport '../lib/jquery.event.drop.live-2.2';\r\nexport { proptDisplayNames as strings, proptDisplayNames } from \"./common\";\r\nexport { Component } from \"./component\";\r\nexport { ComponentPanel } from \"./component-panel\";\r\nexport { EditorPanel } from \"./editor-panel\";\r\nexport { PageDesigner } from \"./page-designer\";\r\nexport { PropEditor, TextInput, } from \"./prop-editor\";\r\nexport { classNames } from \"./style\";\r\nexport { PageBuilderContext, MasterPage, MasterPageContext, PlaceHolder, PageView } from \"./react-page-builder\";\r\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}